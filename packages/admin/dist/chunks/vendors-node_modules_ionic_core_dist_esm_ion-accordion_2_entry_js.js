"use strict";
(self["webpackChunk"] = self["webpackChunk"] || []).push([["vendors-node_modules_ionic_core_dist_esm_ion-accordion_2_entry_js"],{

/***/ "../../../node_modules/@ionic/core/dist/esm/ion-accordion_2.entry.js":
/*!***************************************************************************!*\
  !*** ../../../node_modules/@ionic/core/dist/esm/ion-accordion_2.entry.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ion_accordion": () => (/* binding */ Accordion),
/* harmony export */   "ion_accordion_group": () => (/* binding */ AccordionGroup)
/* harmony export */ });
/* harmony import */ var _index_06cd27b1_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-06cd27b1.js */ "../../../node_modules/@ionic/core/dist/esm/index-06cd27b1.js");
/* harmony import */ var _ionic_global_a049bcbf_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ionic-global-a049bcbf.js */ "../../../node_modules/@ionic/core/dist/esm/ionic-global-a049bcbf.js");
/* harmony import */ var _helpers_eed79a2b_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./helpers-eed79a2b.js */ "../../../node_modules/@ionic/core/dist/esm/helpers-eed79a2b.js");
/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */




const accordionIosCss = ":host{display:block;position:relative;width:100%;background-color:var(--ion-background-color, #ffffff);overflow:hidden;z-index:0}:host(.accordion-expanding) ::slotted(ion-item[slot=header]),:host(.accordion-expanded) ::slotted(ion-item[slot=header]){--border-width:0px}:host(.accordion-animated){-webkit-transition:all 300ms cubic-bezier(0.25, 0.8, 0.5, 1);transition:all 300ms cubic-bezier(0.25, 0.8, 0.5, 1)}:host(.accordion-animated) #content{-webkit-transition:max-height 300ms cubic-bezier(0.25, 0.8, 0.5, 1);transition:max-height 300ms cubic-bezier(0.25, 0.8, 0.5, 1)}#content{overflow:hidden;will-change:max-height}:host(.accordion-collapsing) #content{max-height:0 !important}:host(.accordion-collapsed) #content{display:none}:host(.accordion-expanding) #content{max-height:0}:host(.accordion-disabled) #header,:host(.accordion-readonly) #header,:host(.accordion-disabled) #content,:host(.accordion-readonly) #content{pointer-events:none}:host(.accordion-disabled) #header,:host(.accordion-disabled) #content{opacity:0.4}@media (prefers-reduced-motion: reduce){:host,#content{-webkit-transition:none !important;transition:none !important}}:host(.accordion-next) ::slotted(ion-item[slot=header]){--border-width:0.55px 0px 0.55px 0px}";

const accordionMdCss = ":host{display:block;position:relative;width:100%;background-color:var(--ion-background-color, #ffffff);overflow:hidden;z-index:0}:host(.accordion-expanding) ::slotted(ion-item[slot=header]),:host(.accordion-expanded) ::slotted(ion-item[slot=header]){--border-width:0px}:host(.accordion-animated){-webkit-transition:all 300ms cubic-bezier(0.25, 0.8, 0.5, 1);transition:all 300ms cubic-bezier(0.25, 0.8, 0.5, 1)}:host(.accordion-animated) #content{-webkit-transition:max-height 300ms cubic-bezier(0.25, 0.8, 0.5, 1);transition:max-height 300ms cubic-bezier(0.25, 0.8, 0.5, 1)}#content{overflow:hidden;will-change:max-height}:host(.accordion-collapsing) #content{max-height:0 !important}:host(.accordion-collapsed) #content{display:none}:host(.accordion-expanding) #content{max-height:0}:host(.accordion-disabled) #header,:host(.accordion-readonly) #header,:host(.accordion-disabled) #content,:host(.accordion-readonly) #content{pointer-events:none}:host(.accordion-disabled) #header,:host(.accordion-disabled) #content{opacity:0.4}@media (prefers-reduced-motion: reduce){:host,#content{-webkit-transition:none !important;transition:none !important}}";

let Accordion = class {
  constructor(hostRef) {
    (0,_index_06cd27b1_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);
    this.updateListener = () => this.updateState(false);
    this.state = 1 /* Collapsed */;
    this.isNext = false;
    this.isPrevious = false;
    /**
     * The value of the accordion. Defaults to an autogenerated
     * value.
     */
    this.value = `ion-accordion-${accordionIds++}`;
    /**
     * If `true`, the accordion cannot be interacted with.
     */
    this.disabled = false;
    /**
     * If `true`, the accordion cannot be interacted with,
     * but does not alter the opacity.
     */
    this.readonly = false;
    /**
     * The toggle icon to use. This icon will be
     * rotated when the accordion is expanded
     * or collapsed.
     */
    this.toggleIcon = 'chevron-down';
    /**
     * The slot inside of `ion-item` to
     * place the toggle icon. Defaults to `'end'`.
     */
    this.toggleIconSlot = 'end';
    this.setItemDefaults = () => {
      const ionItem = this.getSlottedHeaderIonItem();
      if (!ionItem) {
        return;
      }
      /**
       * For a11y purposes, we make
       * the ion-item a button so users
       * can tab to it and use keyboard
       * navigation to get around.
       */
      ionItem.button = true;
      ionItem.detail = false;
      /**
       * By default, the lines in an
       * item should be full here, but
       * only do that if a user has
       * not explicitly overridden them
       */
      if (ionItem.lines === undefined) {
        ionItem.lines = 'full';
      }
    };
    this.getSlottedHeaderIonItem = () => {
      const { headerEl } = this;
      if (!headerEl) {
        return;
      }
      /**
       * Get the first ion-item
       * slotted in the header slot
       */
      const slot = headerEl.querySelector('slot');
      if (!slot) {
        return;
      }
      // This is not defined in unit tests
      const ionItem = slot.assignedElements && slot.assignedElements().find(el => el.tagName === 'ION-ITEM');
      return ionItem;
    };
    this.setAria = (expanded = false) => {
      const ionItem = this.getSlottedHeaderIonItem();
      if (!ionItem) {
        return;
      }
      /**
       * Get the native <button> element inside of
       * ion-item because that is what will be focused
       */
      const root = (0,_helpers_eed79a2b_js__WEBPACK_IMPORTED_MODULE_2__.g)(ionItem);
      const button = root.querySelector('button');
      if (!button) {
        return;
      }
      button.setAttribute('aria-expanded', `${expanded}`);
    };
    this.slotToggleIcon = () => {
      const ionItem = this.getSlottedHeaderIonItem();
      if (!ionItem) {
        return;
      }
      const { toggleIconSlot, toggleIcon } = this;
      /**
       * Check if there already is a toggle icon.
       * If so, do not add another one.
       */
      const existingToggleIcon = ionItem.querySelector('.ion-accordion-toggle-icon');
      if (existingToggleIcon) {
        return;
      }
      const iconEl = document.createElement('ion-icon');
      iconEl.slot = toggleIconSlot;
      iconEl.lazy = false;
      iconEl.classList.add('ion-accordion-toggle-icon');
      iconEl.icon = toggleIcon;
      iconEl.setAttribute('aria-hidden', 'true');
      ionItem.appendChild(iconEl);
    };
    this.expandAccordion = (initialUpdate = false) => {
      if (initialUpdate) {
        this.state = 4 /* Expanded */;
        return;
      }
      if (this.state === 4 /* Expanded */) {
        return;
      }
      const { contentEl, contentElWrapper } = this;
      if (contentEl === undefined || contentElWrapper === undefined) {
        return;
      }
      if (this.currentRaf !== undefined) {
        cancelAnimationFrame(this.currentRaf);
      }
      if (this.shouldAnimate()) {
        (0,_helpers_eed79a2b_js__WEBPACK_IMPORTED_MODULE_2__.r)(() => {
          this.state = 8 /* Expanding */;
          this.currentRaf = (0,_helpers_eed79a2b_js__WEBPACK_IMPORTED_MODULE_2__.r)(async () => {
            const contentHeight = contentElWrapper.offsetHeight;
            const waitForTransition = (0,_helpers_eed79a2b_js__WEBPACK_IMPORTED_MODULE_2__.t)(contentEl, 2000);
            contentEl.style.setProperty('max-height', `${contentHeight}px`);
            await waitForTransition;
            this.state = 4 /* Expanded */;
            contentEl.style.removeProperty('max-height');
          });
        });
      }
      else {
        this.state = 4 /* Expanded */;
      }
    };
    this.collapseAccordion = (initialUpdate = false) => {
      if (initialUpdate) {
        this.state = 1 /* Collapsed */;
        return;
      }
      if (this.state === 1 /* Collapsed */) {
        return;
      }
      const { contentEl } = this;
      if (contentEl === undefined) {
        return;
      }
      if (this.currentRaf !== undefined) {
        cancelAnimationFrame(this.currentRaf);
      }
      if (this.shouldAnimate()) {
        this.currentRaf = (0,_helpers_eed79a2b_js__WEBPACK_IMPORTED_MODULE_2__.r)(async () => {
          const contentHeight = contentEl.offsetHeight;
          contentEl.style.setProperty('max-height', `${contentHeight}px`);
          (0,_helpers_eed79a2b_js__WEBPACK_IMPORTED_MODULE_2__.r)(async () => {
            const waitForTransition = (0,_helpers_eed79a2b_js__WEBPACK_IMPORTED_MODULE_2__.t)(contentEl, 2000);
            this.state = 2 /* Collapsing */;
            await waitForTransition;
            this.state = 1 /* Collapsed */;
            contentEl.style.removeProperty('max-height');
          });
        });
      }
      else {
        this.state = 1 /* Collapsed */;
      }
    };
    /**
     * Helper function to determine if
     * something should animate.
     * If prefers-reduced-motion is set
     * then we should not animate, regardless
     * of what is set in the config.
     */
    this.shouldAnimate = () => {
      if (typeof window === 'undefined') {
        return false;
      }
      const prefersReducedMotion = matchMedia('(prefers-reduced-motion: reduce)').matches;
      if (prefersReducedMotion) {
        return false;
      }
      const animated = _ionic_global_a049bcbf_js__WEBPACK_IMPORTED_MODULE_1__.c.get('animated', true);
      if (!animated) {
        return false;
      }
      if (this.accordionGroupEl && !this.accordionGroupEl.animated) {
        return false;
      }
      return true;
    };
    this.updateState = async (initialUpdate = false) => {
      const accordionGroup = this.accordionGroupEl;
      const accordionValue = this.value;
      if (!accordionGroup) {
        return;
      }
      const value = accordionGroup.value;
      const shouldExpand = (Array.isArray(value)) ? value.includes(accordionValue) : value === accordionValue;
      if (shouldExpand) {
        this.expandAccordion(initialUpdate);
        this.isNext = this.isPrevious = false;
      }
      else {
        this.collapseAccordion(initialUpdate);
        /**
         * When using popout or inset,
         * the collapsed accordion items
         * may need additional border radius
         * applied. Check to see if the
         * next or previous accordion is selected.
         */
        const nextAccordion = this.getNextSibling();
        const nextAccordionValue = nextAccordion && nextAccordion.value;
        if (nextAccordionValue !== undefined) {
          this.isPrevious = (Array.isArray(value)) ? value.includes(nextAccordionValue) : value === nextAccordionValue;
        }
        const previousAccordion = this.getPreviousSibling();
        const previousAccordionValue = previousAccordion && previousAccordion.value;
        if (previousAccordionValue !== undefined) {
          this.isNext = (Array.isArray(value)) ? value.includes(previousAccordionValue) : value === previousAccordionValue;
        }
      }
    };
    this.getNextSibling = () => {
      if (!this.el) {
        return;
      }
      const nextSibling = this.el.nextElementSibling;
      if ((nextSibling === null || nextSibling === void 0 ? void 0 : nextSibling.tagName) !== 'ION-ACCORDION') {
        return;
      }
      return nextSibling;
    };
    this.getPreviousSibling = () => {
      if (!this.el) {
        return;
      }
      const previousSibling = this.el.previousElementSibling;
      if ((previousSibling === null || previousSibling === void 0 ? void 0 : previousSibling.tagName) !== 'ION-ACCORDION') {
        return;
      }
      return previousSibling;
    };
  }
  connectedCallback() {
    const accordionGroupEl = this.accordionGroupEl = this.el && this.el.closest('ion-accordion-group');
    if (accordionGroupEl) {
      this.updateState(true);
      (0,_helpers_eed79a2b_js__WEBPACK_IMPORTED_MODULE_2__.a)(accordionGroupEl, 'ionChange', this.updateListener);
    }
  }
  disconnectedCallback() {
    const accordionGroupEl = this.accordionGroupEl;
    if (accordionGroupEl) {
      (0,_helpers_eed79a2b_js__WEBPACK_IMPORTED_MODULE_2__.b)(accordionGroupEl, 'ionChange', this.updateListener);
    }
  }
  componentDidLoad() {
    this.setItemDefaults();
    this.slotToggleIcon();
    /**
     * We need to wait a tick because we
     * just set ionItem.button = true and
     * the button has not have been rendered yet.
     */
    (0,_helpers_eed79a2b_js__WEBPACK_IMPORTED_MODULE_2__.r)(() => {
      /**
       * Set aria label on button inside of ion-item
       * once the inner content has been rendered.
       */
      const expanded = this.state === 4 /* Expanded */ || this.state === 8 /* Expanding */;
      this.setAria(expanded);
    });
  }
  toggleExpanded() {
    const { accordionGroupEl, value, state } = this;
    if (accordionGroupEl) {
      /**
       * Because the accordion group may or may
       * not allow multiple accordions open, we
       * need to request the toggling of this
       * accordion and the accordion group will
       * make the decision on whether or not
       * to allow it.
       */
      const expand = state === 1 /* Collapsed */ || state === 2 /* Collapsing */;
      accordionGroupEl.requestAccordionToggle(value, expand);
    }
  }
  render() {
    const { disabled, readonly } = this;
    const mode = (0,_ionic_global_a049bcbf_js__WEBPACK_IMPORTED_MODULE_1__.b)(this);
    const expanded = this.state === 4 /* Expanded */ || this.state === 8 /* Expanding */;
    const headerPart = expanded ? 'header expanded' : 'header';
    const contentPart = expanded ? 'content expanded' : 'content';
    this.setAria(expanded);
    return ((0,_index_06cd27b1_js__WEBPACK_IMPORTED_MODULE_0__.h)(_index_06cd27b1_js__WEBPACK_IMPORTED_MODULE_0__.H, { class: {
        [mode]: true,
        'accordion-expanding': this.state === 8 /* Expanding */,
        'accordion-expanded': this.state === 4 /* Expanded */,
        'accordion-collapsing': this.state === 2 /* Collapsing */,
        'accordion-collapsed': this.state === 1 /* Collapsed */,
        'accordion-next': this.isNext,
        'accordion-previous': this.isPrevious,
        'accordion-disabled': disabled,
        'accordion-readonly': readonly,
        'accordion-animated': _ionic_global_a049bcbf_js__WEBPACK_IMPORTED_MODULE_1__.c.getBoolean('animated', true)
      } }, (0,_index_06cd27b1_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { onClick: () => this.toggleExpanded(), id: "header", part: headerPart, "aria-controls": "content", ref: headerEl => this.headerEl = headerEl }, (0,_index_06cd27b1_js__WEBPACK_IMPORTED_MODULE_0__.h)("slot", { name: "header" })), (0,_index_06cd27b1_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { id: "content", part: contentPart, role: "region", "aria-labelledby": "header", ref: contentEl => this.contentEl = contentEl }, (0,_index_06cd27b1_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { id: "content-wrapper", ref: contentElWrapper => this.contentElWrapper = contentElWrapper }, (0,_index_06cd27b1_js__WEBPACK_IMPORTED_MODULE_0__.h)("slot", { name: "content" })))));
  }
  static get delegatesFocus() { return true; }
  get el() { return (0,_index_06cd27b1_js__WEBPACK_IMPORTED_MODULE_0__.i)(this); }
};
let accordionIds = 0;
Accordion.style = {
  ios: accordionIosCss,
  md: accordionMdCss
};

const accordionGroupIosCss = ":host{display:block}:host(.accordion-group-expand-inset){margin-left:16px;margin-right:16px;margin-top:16px;margin-bottom:16px}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){:host(.accordion-group-expand-inset){margin-left:unset;margin-right:unset;-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:16px;margin-inline-end:16px}}:host(.accordion-group-expand-inset) ::slotted(ion-accordion.accordion-expanding),:host(.accordion-group-expand-inset) ::slotted(ion-accordion.accordion-expanded){border-bottom:none}";

const accordionGroupMdCss = ":host{display:block}:host(.accordion-group-expand-inset){margin-left:16px;margin-right:16px;margin-top:16px;margin-bottom:16px}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){:host(.accordion-group-expand-inset){margin-left:unset;margin-right:unset;-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:16px;margin-inline-end:16px}}:host(.accordion-group-expand-inset) ::slotted(ion-accordion){-webkit-box-shadow:0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12);box-shadow:0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12)}:host(.accordion-group-expand-inset) ::slotted(ion-accordion.accordion-expanding),:host(.accordion-group-expand-inset) ::slotted(ion-accordion.accordion-expanded){margin-left:0;margin-right:0;margin-top:16px;margin-bottom:16px;border-radius:6px}:host(.accordion-group-expand-inset) ::slotted(ion-accordion.accordion-previous){border-bottom-right-radius:6px;border-bottom-left-radius:6px}:host-context([dir=rtl]):host(.accordion-group-expand-inset) ::slotted(ion-accordion.accordion-previous),:host-context([dir=rtl]).accordion-group-expand-inset ::slotted(ion-accordion.accordion-previous){border-bottom-right-radius:6px;border-bottom-left-radius:6px}:host(.accordion-group-expand-inset) ::slotted(ion-accordion.accordion-next){border-top-left-radius:6px;border-top-right-radius:6px}:host-context([dir=rtl]):host(.accordion-group-expand-inset) ::slotted(ion-accordion.accordion-next),:host-context([dir=rtl]).accordion-group-expand-inset ::slotted(ion-accordion.accordion-next){border-top-left-radius:6px;border-top-right-radius:6px}:host(.accordion-group-expand-inset) ::slotted(ion-accordion):first-of-type{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}";

let AccordionGroup = class {
  constructor(hostRef) {
    (0,_index_06cd27b1_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);
    this.ionChange = (0,_index_06cd27b1_js__WEBPACK_IMPORTED_MODULE_0__.e)(this, "ionChange", 7);
    /**
     * If `true`, all accordions inside of the
     * accordion group will animate when expanding
     * or collapsing.
     */
    this.animated = true;
    /**
     * If `true`, the accordion group cannot be interacted with.
     */
    this.disabled = false;
    /**
     * If `true`, the accordion group cannot be interacted with,
     * but does not alter the opacity.
     */
    this.readonly = false;
    /**
     * Describes the expansion behavior for each accordion.
     * Possible values are `"compact"` and `"inset"`.
     * Defaults to `"compact"`.
     */
    this.expand = 'compact';
  }
  valueChanged() {
    const { value, multiple } = this;
    /**
     * If accordion group does not
     * let multiple accordions be open
     * at once, but user passes an array
     * just grab the first value.
     */
    if (!multiple && Array.isArray(value)) {
      this.value = value[0];
    }
    else {
      this.ionChange.emit({ value: this.value });
    }
  }
  async disabledChanged() {
    const { disabled } = this;
    const accordions = await this.getAccordions();
    for (const accordion of accordions) {
      accordion.disabled = disabled;
    }
  }
  async readonlyChanged() {
    const { readonly } = this;
    const accordions = await this.getAccordions();
    for (const accordion of accordions) {
      accordion.readonly = readonly;
    }
  }
  async onKeydown(ev) {
    const activeElement = document.activeElement;
    if (!activeElement) {
      return;
    }
    const accordionEl = (activeElement.tagName === 'ION-ACCORDION') ? activeElement : activeElement.closest('ion-accordion');
    if (!accordionEl) {
      return;
    }
    const closestGroup = accordionEl.closest('ion-accordion-group');
    if (closestGroup !== this.el) {
      return;
    }
    // If the active accordion is not in the current array of accordions, do not do anything
    const accordions = await this.getAccordions();
    const startingIndex = accordions.findIndex(a => a === accordionEl);
    if (startingIndex === -1) {
      return;
    }
    let accordion;
    if (ev.key === 'ArrowDown') {
      accordion = this.findNextAccordion(accordions, startingIndex);
    }
    else if (ev.key === 'ArrowUp') {
      accordion = this.findPreviousAccordion(accordions, startingIndex);
    }
    else if (ev.key === 'Home') {
      accordion = accordions[0];
    }
    else if (ev.key === 'End') {
      accordion = accordions[accordions.length - 1];
    }
    if (accordion !== undefined && accordion !== activeElement) {
      accordion.focus();
    }
  }
  async componentDidLoad() {
    if (this.disabled) {
      this.disabledChanged();
    }
    if (this.readonly) {
      this.readonlyChanged();
    }
  }
  /**
   * @internal
   */
  async requestAccordionToggle(accordionValue, accordionExpand) {
    const { multiple, value, readonly, disabled } = this;
    if (readonly || disabled) {
      return;
    }
    if (accordionExpand) {
      /**
       * If group accepts multiple values
       * check to see if value is already in
       * in values array. If not, add it
       * to the array.
       */
      if (multiple) {
        const groupValue = value || [];
        const processedValue = Array.isArray(groupValue) ? groupValue : [groupValue];
        const valueExists = processedValue.find(v => v === accordionValue);
        if (valueExists === undefined && accordionValue !== undefined) {
          this.value = [...processedValue, accordionValue];
        }
      }
      else {
        this.value = accordionValue;
      }
    }
    else {
      /**
       * If collapsing accordion, either filter the value
       * out of the values array or unset the value.
       */
      if (multiple) {
        const groupValue = value || [];
        const processedValue = Array.isArray(groupValue) ? groupValue : [groupValue];
        this.value = processedValue.filter(v => v !== accordionValue);
      }
      else {
        this.value = undefined;
      }
    }
  }
  findNextAccordion(accordions, startingIndex) {
    const nextAccordion = accordions[startingIndex + 1];
    // tslint:disable-next-line:strict-type-predicates
    if (nextAccordion === undefined) {
      return accordions[0];
    }
    return nextAccordion;
  }
  findPreviousAccordion(accordions, startingIndex) {
    const prevAccordion = accordions[startingIndex - 1];
    // tslint:disable-next-line:strict-type-predicates
    if (prevAccordion === undefined) {
      return accordions[accordions.length - 1];
    }
    return prevAccordion;
  }
  /**
   * @internal
   */
  async getAccordions() {
    return Array.from(this.el.querySelectorAll(':scope > ion-accordion'));
  }
  render() {
    const { disabled, readonly, expand } = this;
    const mode = (0,_ionic_global_a049bcbf_js__WEBPACK_IMPORTED_MODULE_1__.b)(this);
    return ((0,_index_06cd27b1_js__WEBPACK_IMPORTED_MODULE_0__.h)(_index_06cd27b1_js__WEBPACK_IMPORTED_MODULE_0__.H, { class: {
        [mode]: true,
        'accordion-group-disabled': disabled,
        'accordion-group-readonly': readonly,
        [`accordion-group-expand-${expand}`]: true
      }, role: "presentation" }, (0,_index_06cd27b1_js__WEBPACK_IMPORTED_MODULE_0__.h)("slot", null)));
  }
  get el() { return (0,_index_06cd27b1_js__WEBPACK_IMPORTED_MODULE_0__.i)(this); }
  static get watchers() { return {
    "value": ["valueChanged"],
    "disabled": ["disabledChanged"],
    "readonly": ["readonlyChanged"]
  }; }
};
AccordionGroup.style = {
  ios: accordionGroupIosCss,
  md: accordionGroupMdCss
};




/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2h1bmtzL3ZlbmRvcnMtbm9kZV9tb2R1bGVzX2lvbmljX2NvcmVfZGlzdF9lc21faW9uLWFjY29yZGlvbl8yX2VudHJ5X2pzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQzZHO0FBQ25DO0FBQ3NFOztBQUVoSiwrQkFBK0IsY0FBYyxrQkFBa0IsV0FBVyxzREFBc0QsZ0JBQWdCLFVBQVUseUhBQXlILG1CQUFtQiwyQkFBMkIsNkRBQTZELHFEQUFxRCxvQ0FBb0Msb0VBQW9FLDREQUE0RCxTQUFTLGdCQUFnQix1QkFBdUIsc0NBQXNDLHdCQUF3QixxQ0FBcUMsYUFBYSxxQ0FBcUMsYUFBYSw4SUFBOEksb0JBQW9CLHVFQUF1RSxZQUFZLHdDQUF3QyxlQUFlLG1DQUFtQyw0QkFBNEIsd0RBQXdELHFDQUFxQzs7QUFFanZDLDhCQUE4QixjQUFjLGtCQUFrQixXQUFXLHNEQUFzRCxnQkFBZ0IsVUFBVSx5SEFBeUgsbUJBQW1CLDJCQUEyQiw2REFBNkQscURBQXFELG9DQUFvQyxvRUFBb0UsNERBQTRELFNBQVMsZ0JBQWdCLHVCQUF1QixzQ0FBc0Msd0JBQXdCLHFDQUFxQyxhQUFhLHFDQUFxQyxhQUFhLDhJQUE4SSxvQkFBb0IsdUVBQXVFLFlBQVksd0NBQXdDLGVBQWUsbUNBQW1DLDRCQUE0Qjs7QUFFbnBDO0FBQ0E7QUFDQSxJQUFJLHFEQUFnQjtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLGVBQWU7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksc0NBQXNDO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksNkJBQTZCO0FBQ3pDLGlCQUFpQiw0REFBVTtBQUMzQixZQUFZLHFEQUFDLENBQUMsaURBQUksSUFBSTtBQUN0QjtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsT0FBTztBQUMxQyxPQUFPLHdCQUF3QixFQUFFLHFEQUFDO0FBQ2xDO0FBQ0EsYUFBYSxPQUFPLHFEQUFVO0FBQzlCLDBCQUEwQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRTZFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9AaW9uaWMvY29yZS9kaXN0L2VzbS9pb24tYWNjb3JkaW9uXzIuZW50cnkuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyohXG4gKiAoQykgSW9uaWMgaHR0cDovL2lvbmljZnJhbWV3b3JrLmNvbSAtIE1JVCBMaWNlbnNlXG4gKi9cbmltcG9ydCB7IHIgYXMgcmVnaXN0ZXJJbnN0YW5jZSwgaCwgSCBhcyBIb3N0LCBpIGFzIGdldEVsZW1lbnQsIGUgYXMgY3JlYXRlRXZlbnQgfSBmcm9tICcuL2luZGV4LTA2Y2QyN2IxLmpzJztcbmltcG9ydCB7IGMgYXMgY29uZmlnLCBiIGFzIGdldElvbk1vZGUgfSBmcm9tICcuL2lvbmljLWdsb2JhbC1hMDQ5YmNiZi5qcyc7XG5pbXBvcnQgeyByIGFzIHJhZiwgdCBhcyB0cmFuc2l0aW9uRW5kQXN5bmMsIGEgYXMgYWRkRXZlbnRMaXN0ZW5lciwgYiBhcyByZW1vdmVFdmVudExpc3RlbmVyLCBnIGFzIGdldEVsZW1lbnRSb290IH0gZnJvbSAnLi9oZWxwZXJzLWVlZDc5YTJiLmpzJztcblxuY29uc3QgYWNjb3JkaW9uSW9zQ3NzID0gXCI6aG9zdHtkaXNwbGF5OmJsb2NrO3Bvc2l0aW9uOnJlbGF0aXZlO3dpZHRoOjEwMCU7YmFja2dyb3VuZC1jb2xvcjp2YXIoLS1pb24tYmFja2dyb3VuZC1jb2xvciwgI2ZmZmZmZik7b3ZlcmZsb3c6aGlkZGVuO3otaW5kZXg6MH06aG9zdCguYWNjb3JkaW9uLWV4cGFuZGluZykgOjpzbG90dGVkKGlvbi1pdGVtW3Nsb3Q9aGVhZGVyXSksOmhvc3QoLmFjY29yZGlvbi1leHBhbmRlZCkgOjpzbG90dGVkKGlvbi1pdGVtW3Nsb3Q9aGVhZGVyXSl7LS1ib3JkZXItd2lkdGg6MHB4fTpob3N0KC5hY2NvcmRpb24tYW5pbWF0ZWQpey13ZWJraXQtdHJhbnNpdGlvbjphbGwgMzAwbXMgY3ViaWMtYmV6aWVyKDAuMjUsIDAuOCwgMC41LCAxKTt0cmFuc2l0aW9uOmFsbCAzMDBtcyBjdWJpYy1iZXppZXIoMC4yNSwgMC44LCAwLjUsIDEpfTpob3N0KC5hY2NvcmRpb24tYW5pbWF0ZWQpICNjb250ZW50ey13ZWJraXQtdHJhbnNpdGlvbjptYXgtaGVpZ2h0IDMwMG1zIGN1YmljLWJlemllcigwLjI1LCAwLjgsIDAuNSwgMSk7dHJhbnNpdGlvbjptYXgtaGVpZ2h0IDMwMG1zIGN1YmljLWJlemllcigwLjI1LCAwLjgsIDAuNSwgMSl9I2NvbnRlbnR7b3ZlcmZsb3c6aGlkZGVuO3dpbGwtY2hhbmdlOm1heC1oZWlnaHR9Omhvc3QoLmFjY29yZGlvbi1jb2xsYXBzaW5nKSAjY29udGVudHttYXgtaGVpZ2h0OjAgIWltcG9ydGFudH06aG9zdCguYWNjb3JkaW9uLWNvbGxhcHNlZCkgI2NvbnRlbnR7ZGlzcGxheTpub25lfTpob3N0KC5hY2NvcmRpb24tZXhwYW5kaW5nKSAjY29udGVudHttYXgtaGVpZ2h0OjB9Omhvc3QoLmFjY29yZGlvbi1kaXNhYmxlZCkgI2hlYWRlciw6aG9zdCguYWNjb3JkaW9uLXJlYWRvbmx5KSAjaGVhZGVyLDpob3N0KC5hY2NvcmRpb24tZGlzYWJsZWQpICNjb250ZW50LDpob3N0KC5hY2NvcmRpb24tcmVhZG9ubHkpICNjb250ZW50e3BvaW50ZXItZXZlbnRzOm5vbmV9Omhvc3QoLmFjY29yZGlvbi1kaXNhYmxlZCkgI2hlYWRlciw6aG9zdCguYWNjb3JkaW9uLWRpc2FibGVkKSAjY29udGVudHtvcGFjaXR5OjAuNH1AbWVkaWEgKHByZWZlcnMtcmVkdWNlZC1tb3Rpb246IHJlZHVjZSl7Omhvc3QsI2NvbnRlbnR7LXdlYmtpdC10cmFuc2l0aW9uOm5vbmUgIWltcG9ydGFudDt0cmFuc2l0aW9uOm5vbmUgIWltcG9ydGFudH19Omhvc3QoLmFjY29yZGlvbi1uZXh0KSA6OnNsb3R0ZWQoaW9uLWl0ZW1bc2xvdD1oZWFkZXJdKXstLWJvcmRlci13aWR0aDowLjU1cHggMHB4IDAuNTVweCAwcHh9XCI7XG5cbmNvbnN0IGFjY29yZGlvbk1kQ3NzID0gXCI6aG9zdHtkaXNwbGF5OmJsb2NrO3Bvc2l0aW9uOnJlbGF0aXZlO3dpZHRoOjEwMCU7YmFja2dyb3VuZC1jb2xvcjp2YXIoLS1pb24tYmFja2dyb3VuZC1jb2xvciwgI2ZmZmZmZik7b3ZlcmZsb3c6aGlkZGVuO3otaW5kZXg6MH06aG9zdCguYWNjb3JkaW9uLWV4cGFuZGluZykgOjpzbG90dGVkKGlvbi1pdGVtW3Nsb3Q9aGVhZGVyXSksOmhvc3QoLmFjY29yZGlvbi1leHBhbmRlZCkgOjpzbG90dGVkKGlvbi1pdGVtW3Nsb3Q9aGVhZGVyXSl7LS1ib3JkZXItd2lkdGg6MHB4fTpob3N0KC5hY2NvcmRpb24tYW5pbWF0ZWQpey13ZWJraXQtdHJhbnNpdGlvbjphbGwgMzAwbXMgY3ViaWMtYmV6aWVyKDAuMjUsIDAuOCwgMC41LCAxKTt0cmFuc2l0aW9uOmFsbCAzMDBtcyBjdWJpYy1iZXppZXIoMC4yNSwgMC44LCAwLjUsIDEpfTpob3N0KC5hY2NvcmRpb24tYW5pbWF0ZWQpICNjb250ZW50ey13ZWJraXQtdHJhbnNpdGlvbjptYXgtaGVpZ2h0IDMwMG1zIGN1YmljLWJlemllcigwLjI1LCAwLjgsIDAuNSwgMSk7dHJhbnNpdGlvbjptYXgtaGVpZ2h0IDMwMG1zIGN1YmljLWJlemllcigwLjI1LCAwLjgsIDAuNSwgMSl9I2NvbnRlbnR7b3ZlcmZsb3c6aGlkZGVuO3dpbGwtY2hhbmdlOm1heC1oZWlnaHR9Omhvc3QoLmFjY29yZGlvbi1jb2xsYXBzaW5nKSAjY29udGVudHttYXgtaGVpZ2h0OjAgIWltcG9ydGFudH06aG9zdCguYWNjb3JkaW9uLWNvbGxhcHNlZCkgI2NvbnRlbnR7ZGlzcGxheTpub25lfTpob3N0KC5hY2NvcmRpb24tZXhwYW5kaW5nKSAjY29udGVudHttYXgtaGVpZ2h0OjB9Omhvc3QoLmFjY29yZGlvbi1kaXNhYmxlZCkgI2hlYWRlciw6aG9zdCguYWNjb3JkaW9uLXJlYWRvbmx5KSAjaGVhZGVyLDpob3N0KC5hY2NvcmRpb24tZGlzYWJsZWQpICNjb250ZW50LDpob3N0KC5hY2NvcmRpb24tcmVhZG9ubHkpICNjb250ZW50e3BvaW50ZXItZXZlbnRzOm5vbmV9Omhvc3QoLmFjY29yZGlvbi1kaXNhYmxlZCkgI2hlYWRlciw6aG9zdCguYWNjb3JkaW9uLWRpc2FibGVkKSAjY29udGVudHtvcGFjaXR5OjAuNH1AbWVkaWEgKHByZWZlcnMtcmVkdWNlZC1tb3Rpb246IHJlZHVjZSl7Omhvc3QsI2NvbnRlbnR7LXdlYmtpdC10cmFuc2l0aW9uOm5vbmUgIWltcG9ydGFudDt0cmFuc2l0aW9uOm5vbmUgIWltcG9ydGFudH19XCI7XG5cbmxldCBBY2NvcmRpb24gPSBjbGFzcyB7XG4gIGNvbnN0cnVjdG9yKGhvc3RSZWYpIHtcbiAgICByZWdpc3Rlckluc3RhbmNlKHRoaXMsIGhvc3RSZWYpO1xuICAgIHRoaXMudXBkYXRlTGlzdGVuZXIgPSAoKSA9PiB0aGlzLnVwZGF0ZVN0YXRlKGZhbHNlKTtcbiAgICB0aGlzLnN0YXRlID0gMSAvKiBDb2xsYXBzZWQgKi87XG4gICAgdGhpcy5pc05leHQgPSBmYWxzZTtcbiAgICB0aGlzLmlzUHJldmlvdXMgPSBmYWxzZTtcbiAgICAvKipcbiAgICAgKiBUaGUgdmFsdWUgb2YgdGhlIGFjY29yZGlvbi4gRGVmYXVsdHMgdG8gYW4gYXV0b2dlbmVyYXRlZFxuICAgICAqIHZhbHVlLlxuICAgICAqL1xuICAgIHRoaXMudmFsdWUgPSBgaW9uLWFjY29yZGlvbi0ke2FjY29yZGlvbklkcysrfWA7XG4gICAgLyoqXG4gICAgICogSWYgYHRydWVgLCB0aGUgYWNjb3JkaW9uIGNhbm5vdCBiZSBpbnRlcmFjdGVkIHdpdGguXG4gICAgICovXG4gICAgdGhpcy5kaXNhYmxlZCA9IGZhbHNlO1xuICAgIC8qKlxuICAgICAqIElmIGB0cnVlYCwgdGhlIGFjY29yZGlvbiBjYW5ub3QgYmUgaW50ZXJhY3RlZCB3aXRoLFxuICAgICAqIGJ1dCBkb2VzIG5vdCBhbHRlciB0aGUgb3BhY2l0eS5cbiAgICAgKi9cbiAgICB0aGlzLnJlYWRvbmx5ID0gZmFsc2U7XG4gICAgLyoqXG4gICAgICogVGhlIHRvZ2dsZSBpY29uIHRvIHVzZS4gVGhpcyBpY29uIHdpbGwgYmVcbiAgICAgKiByb3RhdGVkIHdoZW4gdGhlIGFjY29yZGlvbiBpcyBleHBhbmRlZFxuICAgICAqIG9yIGNvbGxhcHNlZC5cbiAgICAgKi9cbiAgICB0aGlzLnRvZ2dsZUljb24gPSAnY2hldnJvbi1kb3duJztcbiAgICAvKipcbiAgICAgKiBUaGUgc2xvdCBpbnNpZGUgb2YgYGlvbi1pdGVtYCB0b1xuICAgICAqIHBsYWNlIHRoZSB0b2dnbGUgaWNvbi4gRGVmYXVsdHMgdG8gYCdlbmQnYC5cbiAgICAgKi9cbiAgICB0aGlzLnRvZ2dsZUljb25TbG90ID0gJ2VuZCc7XG4gICAgdGhpcy5zZXRJdGVtRGVmYXVsdHMgPSAoKSA9PiB7XG4gICAgICBjb25zdCBpb25JdGVtID0gdGhpcy5nZXRTbG90dGVkSGVhZGVySW9uSXRlbSgpO1xuICAgICAgaWYgKCFpb25JdGVtKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIC8qKlxuICAgICAgICogRm9yIGExMXkgcHVycG9zZXMsIHdlIG1ha2VcbiAgICAgICAqIHRoZSBpb24taXRlbSBhIGJ1dHRvbiBzbyB1c2Vyc1xuICAgICAgICogY2FuIHRhYiB0byBpdCBhbmQgdXNlIGtleWJvYXJkXG4gICAgICAgKiBuYXZpZ2F0aW9uIHRvIGdldCBhcm91bmQuXG4gICAgICAgKi9cbiAgICAgIGlvbkl0ZW0uYnV0dG9uID0gdHJ1ZTtcbiAgICAgIGlvbkl0ZW0uZGV0YWlsID0gZmFsc2U7XG4gICAgICAvKipcbiAgICAgICAqIEJ5IGRlZmF1bHQsIHRoZSBsaW5lcyBpbiBhblxuICAgICAgICogaXRlbSBzaG91bGQgYmUgZnVsbCBoZXJlLCBidXRcbiAgICAgICAqIG9ubHkgZG8gdGhhdCBpZiBhIHVzZXIgaGFzXG4gICAgICAgKiBub3QgZXhwbGljaXRseSBvdmVycmlkZGVuIHRoZW1cbiAgICAgICAqL1xuICAgICAgaWYgKGlvbkl0ZW0ubGluZXMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpb25JdGVtLmxpbmVzID0gJ2Z1bGwnO1xuICAgICAgfVxuICAgIH07XG4gICAgdGhpcy5nZXRTbG90dGVkSGVhZGVySW9uSXRlbSA9ICgpID0+IHtcbiAgICAgIGNvbnN0IHsgaGVhZGVyRWwgfSA9IHRoaXM7XG4gICAgICBpZiAoIWhlYWRlckVsKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIC8qKlxuICAgICAgICogR2V0IHRoZSBmaXJzdCBpb24taXRlbVxuICAgICAgICogc2xvdHRlZCBpbiB0aGUgaGVhZGVyIHNsb3RcbiAgICAgICAqL1xuICAgICAgY29uc3Qgc2xvdCA9IGhlYWRlckVsLnF1ZXJ5U2VsZWN0b3IoJ3Nsb3QnKTtcbiAgICAgIGlmICghc2xvdCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICAvLyBUaGlzIGlzIG5vdCBkZWZpbmVkIGluIHVuaXQgdGVzdHNcbiAgICAgIGNvbnN0IGlvbkl0ZW0gPSBzbG90LmFzc2lnbmVkRWxlbWVudHMgJiYgc2xvdC5hc3NpZ25lZEVsZW1lbnRzKCkuZmluZChlbCA9PiBlbC50YWdOYW1lID09PSAnSU9OLUlURU0nKTtcbiAgICAgIHJldHVybiBpb25JdGVtO1xuICAgIH07XG4gICAgdGhpcy5zZXRBcmlhID0gKGV4cGFuZGVkID0gZmFsc2UpID0+IHtcbiAgICAgIGNvbnN0IGlvbkl0ZW0gPSB0aGlzLmdldFNsb3R0ZWRIZWFkZXJJb25JdGVtKCk7XG4gICAgICBpZiAoIWlvbkl0ZW0pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgLyoqXG4gICAgICAgKiBHZXQgdGhlIG5hdGl2ZSA8YnV0dG9uPiBlbGVtZW50IGluc2lkZSBvZlxuICAgICAgICogaW9uLWl0ZW0gYmVjYXVzZSB0aGF0IGlzIHdoYXQgd2lsbCBiZSBmb2N1c2VkXG4gICAgICAgKi9cbiAgICAgIGNvbnN0IHJvb3QgPSBnZXRFbGVtZW50Um9vdChpb25JdGVtKTtcbiAgICAgIGNvbnN0IGJ1dHRvbiA9IHJvb3QucXVlcnlTZWxlY3RvcignYnV0dG9uJyk7XG4gICAgICBpZiAoIWJ1dHRvbikge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBidXR0b24uc2V0QXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJywgYCR7ZXhwYW5kZWR9YCk7XG4gICAgfTtcbiAgICB0aGlzLnNsb3RUb2dnbGVJY29uID0gKCkgPT4ge1xuICAgICAgY29uc3QgaW9uSXRlbSA9IHRoaXMuZ2V0U2xvdHRlZEhlYWRlcklvbkl0ZW0oKTtcbiAgICAgIGlmICghaW9uSXRlbSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjb25zdCB7IHRvZ2dsZUljb25TbG90LCB0b2dnbGVJY29uIH0gPSB0aGlzO1xuICAgICAgLyoqXG4gICAgICAgKiBDaGVjayBpZiB0aGVyZSBhbHJlYWR5IGlzIGEgdG9nZ2xlIGljb24uXG4gICAgICAgKiBJZiBzbywgZG8gbm90IGFkZCBhbm90aGVyIG9uZS5cbiAgICAgICAqL1xuICAgICAgY29uc3QgZXhpc3RpbmdUb2dnbGVJY29uID0gaW9uSXRlbS5xdWVyeVNlbGVjdG9yKCcuaW9uLWFjY29yZGlvbi10b2dnbGUtaWNvbicpO1xuICAgICAgaWYgKGV4aXN0aW5nVG9nZ2xlSWNvbikge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjb25zdCBpY29uRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpb24taWNvbicpO1xuICAgICAgaWNvbkVsLnNsb3QgPSB0b2dnbGVJY29uU2xvdDtcbiAgICAgIGljb25FbC5sYXp5ID0gZmFsc2U7XG4gICAgICBpY29uRWwuY2xhc3NMaXN0LmFkZCgnaW9uLWFjY29yZGlvbi10b2dnbGUtaWNvbicpO1xuICAgICAgaWNvbkVsLmljb24gPSB0b2dnbGVJY29uO1xuICAgICAgaWNvbkVsLnNldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nLCAndHJ1ZScpO1xuICAgICAgaW9uSXRlbS5hcHBlbmRDaGlsZChpY29uRWwpO1xuICAgIH07XG4gICAgdGhpcy5leHBhbmRBY2NvcmRpb24gPSAoaW5pdGlhbFVwZGF0ZSA9IGZhbHNlKSA9PiB7XG4gICAgICBpZiAoaW5pdGlhbFVwZGF0ZSkge1xuICAgICAgICB0aGlzLnN0YXRlID0gNCAvKiBFeHBhbmRlZCAqLztcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuc3RhdGUgPT09IDQgLyogRXhwYW5kZWQgKi8pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3QgeyBjb250ZW50RWwsIGNvbnRlbnRFbFdyYXBwZXIgfSA9IHRoaXM7XG4gICAgICBpZiAoY29udGVudEVsID09PSB1bmRlZmluZWQgfHwgY29udGVudEVsV3JhcHBlciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmN1cnJlbnRSYWYgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBjYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLmN1cnJlbnRSYWYpO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuc2hvdWxkQW5pbWF0ZSgpKSB7XG4gICAgICAgIHJhZigoKSA9PiB7XG4gICAgICAgICAgdGhpcy5zdGF0ZSA9IDggLyogRXhwYW5kaW5nICovO1xuICAgICAgICAgIHRoaXMuY3VycmVudFJhZiA9IHJhZihhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjb250ZW50SGVpZ2h0ID0gY29udGVudEVsV3JhcHBlci5vZmZzZXRIZWlnaHQ7XG4gICAgICAgICAgICBjb25zdCB3YWl0Rm9yVHJhbnNpdGlvbiA9IHRyYW5zaXRpb25FbmRBc3luYyhjb250ZW50RWwsIDIwMDApO1xuICAgICAgICAgICAgY29udGVudEVsLnN0eWxlLnNldFByb3BlcnR5KCdtYXgtaGVpZ2h0JywgYCR7Y29udGVudEhlaWdodH1weGApO1xuICAgICAgICAgICAgYXdhaXQgd2FpdEZvclRyYW5zaXRpb247XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gNCAvKiBFeHBhbmRlZCAqLztcbiAgICAgICAgICAgIGNvbnRlbnRFbC5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnbWF4LWhlaWdodCcpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICB0aGlzLnN0YXRlID0gNCAvKiBFeHBhbmRlZCAqLztcbiAgICAgIH1cbiAgICB9O1xuICAgIHRoaXMuY29sbGFwc2VBY2NvcmRpb24gPSAoaW5pdGlhbFVwZGF0ZSA9IGZhbHNlKSA9PiB7XG4gICAgICBpZiAoaW5pdGlhbFVwZGF0ZSkge1xuICAgICAgICB0aGlzLnN0YXRlID0gMSAvKiBDb2xsYXBzZWQgKi87XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLnN0YXRlID09PSAxIC8qIENvbGxhcHNlZCAqLykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICAgIGlmIChjb250ZW50RWwgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5jdXJyZW50UmFmICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy5jdXJyZW50UmFmKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLnNob3VsZEFuaW1hdGUoKSkge1xuICAgICAgICB0aGlzLmN1cnJlbnRSYWYgPSByYWYoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IGNvbnRlbnRIZWlnaHQgPSBjb250ZW50RWwub2Zmc2V0SGVpZ2h0O1xuICAgICAgICAgIGNvbnRlbnRFbC5zdHlsZS5zZXRQcm9wZXJ0eSgnbWF4LWhlaWdodCcsIGAke2NvbnRlbnRIZWlnaHR9cHhgKTtcbiAgICAgICAgICByYWYoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgd2FpdEZvclRyYW5zaXRpb24gPSB0cmFuc2l0aW9uRW5kQXN5bmMoY29udGVudEVsLCAyMDAwKTtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSAyIC8qIENvbGxhcHNpbmcgKi87XG4gICAgICAgICAgICBhd2FpdCB3YWl0Rm9yVHJhbnNpdGlvbjtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSAxIC8qIENvbGxhcHNlZCAqLztcbiAgICAgICAgICAgIGNvbnRlbnRFbC5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnbWF4LWhlaWdodCcpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICB0aGlzLnN0YXRlID0gMSAvKiBDb2xsYXBzZWQgKi87XG4gICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBIZWxwZXIgZnVuY3Rpb24gdG8gZGV0ZXJtaW5lIGlmXG4gICAgICogc29tZXRoaW5nIHNob3VsZCBhbmltYXRlLlxuICAgICAqIElmIHByZWZlcnMtcmVkdWNlZC1tb3Rpb24gaXMgc2V0XG4gICAgICogdGhlbiB3ZSBzaG91bGQgbm90IGFuaW1hdGUsIHJlZ2FyZGxlc3NcbiAgICAgKiBvZiB3aGF0IGlzIHNldCBpbiB0aGUgY29uZmlnLlxuICAgICAqL1xuICAgIHRoaXMuc2hvdWxkQW5pbWF0ZSA9ICgpID0+IHtcbiAgICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICBjb25zdCBwcmVmZXJzUmVkdWNlZE1vdGlvbiA9IG1hdGNoTWVkaWEoJyhwcmVmZXJzLXJlZHVjZWQtbW90aW9uOiByZWR1Y2UpJykubWF0Y2hlcztcbiAgICAgIGlmIChwcmVmZXJzUmVkdWNlZE1vdGlvbikge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICBjb25zdCBhbmltYXRlZCA9IGNvbmZpZy5nZXQoJ2FuaW1hdGVkJywgdHJ1ZSk7XG4gICAgICBpZiAoIWFuaW1hdGVkKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmFjY29yZGlvbkdyb3VwRWwgJiYgIXRoaXMuYWNjb3JkaW9uR3JvdXBFbC5hbmltYXRlZCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuICAgIHRoaXMudXBkYXRlU3RhdGUgPSBhc3luYyAoaW5pdGlhbFVwZGF0ZSA9IGZhbHNlKSA9PiB7XG4gICAgICBjb25zdCBhY2NvcmRpb25Hcm91cCA9IHRoaXMuYWNjb3JkaW9uR3JvdXBFbDtcbiAgICAgIGNvbnN0IGFjY29yZGlvblZhbHVlID0gdGhpcy52YWx1ZTtcbiAgICAgIGlmICghYWNjb3JkaW9uR3JvdXApIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3QgdmFsdWUgPSBhY2NvcmRpb25Hcm91cC52YWx1ZTtcbiAgICAgIGNvbnN0IHNob3VsZEV4cGFuZCA9IChBcnJheS5pc0FycmF5KHZhbHVlKSkgPyB2YWx1ZS5pbmNsdWRlcyhhY2NvcmRpb25WYWx1ZSkgOiB2YWx1ZSA9PT0gYWNjb3JkaW9uVmFsdWU7XG4gICAgICBpZiAoc2hvdWxkRXhwYW5kKSB7XG4gICAgICAgIHRoaXMuZXhwYW5kQWNjb3JkaW9uKGluaXRpYWxVcGRhdGUpO1xuICAgICAgICB0aGlzLmlzTmV4dCA9IHRoaXMuaXNQcmV2aW91cyA9IGZhbHNlO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIHRoaXMuY29sbGFwc2VBY2NvcmRpb24oaW5pdGlhbFVwZGF0ZSk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBXaGVuIHVzaW5nIHBvcG91dCBvciBpbnNldCxcbiAgICAgICAgICogdGhlIGNvbGxhcHNlZCBhY2NvcmRpb24gaXRlbXNcbiAgICAgICAgICogbWF5IG5lZWQgYWRkaXRpb25hbCBib3JkZXIgcmFkaXVzXG4gICAgICAgICAqIGFwcGxpZWQuIENoZWNrIHRvIHNlZSBpZiB0aGVcbiAgICAgICAgICogbmV4dCBvciBwcmV2aW91cyBhY2NvcmRpb24gaXMgc2VsZWN0ZWQuXG4gICAgICAgICAqL1xuICAgICAgICBjb25zdCBuZXh0QWNjb3JkaW9uID0gdGhpcy5nZXROZXh0U2libGluZygpO1xuICAgICAgICBjb25zdCBuZXh0QWNjb3JkaW9uVmFsdWUgPSBuZXh0QWNjb3JkaW9uICYmIG5leHRBY2NvcmRpb24udmFsdWU7XG4gICAgICAgIGlmIChuZXh0QWNjb3JkaW9uVmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHRoaXMuaXNQcmV2aW91cyA9IChBcnJheS5pc0FycmF5KHZhbHVlKSkgPyB2YWx1ZS5pbmNsdWRlcyhuZXh0QWNjb3JkaW9uVmFsdWUpIDogdmFsdWUgPT09IG5leHRBY2NvcmRpb25WYWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwcmV2aW91c0FjY29yZGlvbiA9IHRoaXMuZ2V0UHJldmlvdXNTaWJsaW5nKCk7XG4gICAgICAgIGNvbnN0IHByZXZpb3VzQWNjb3JkaW9uVmFsdWUgPSBwcmV2aW91c0FjY29yZGlvbiAmJiBwcmV2aW91c0FjY29yZGlvbi52YWx1ZTtcbiAgICAgICAgaWYgKHByZXZpb3VzQWNjb3JkaW9uVmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHRoaXMuaXNOZXh0ID0gKEFycmF5LmlzQXJyYXkodmFsdWUpKSA/IHZhbHVlLmluY2x1ZGVzKHByZXZpb3VzQWNjb3JkaW9uVmFsdWUpIDogdmFsdWUgPT09IHByZXZpb3VzQWNjb3JkaW9uVmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICAgIHRoaXMuZ2V0TmV4dFNpYmxpbmcgPSAoKSA9PiB7XG4gICAgICBpZiAoIXRoaXMuZWwpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3QgbmV4dFNpYmxpbmcgPSB0aGlzLmVsLm5leHRFbGVtZW50U2libGluZztcbiAgICAgIGlmICgobmV4dFNpYmxpbmcgPT09IG51bGwgfHwgbmV4dFNpYmxpbmcgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG5leHRTaWJsaW5nLnRhZ05hbWUpICE9PSAnSU9OLUFDQ09SRElPTicpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG5leHRTaWJsaW5nO1xuICAgIH07XG4gICAgdGhpcy5nZXRQcmV2aW91c1NpYmxpbmcgPSAoKSA9PiB7XG4gICAgICBpZiAoIXRoaXMuZWwpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3QgcHJldmlvdXNTaWJsaW5nID0gdGhpcy5lbC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nO1xuICAgICAgaWYgKChwcmV2aW91c1NpYmxpbmcgPT09IG51bGwgfHwgcHJldmlvdXNTaWJsaW5nID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwcmV2aW91c1NpYmxpbmcudGFnTmFtZSkgIT09ICdJT04tQUNDT1JESU9OJykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICByZXR1cm4gcHJldmlvdXNTaWJsaW5nO1xuICAgIH07XG4gIH1cbiAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgY29uc3QgYWNjb3JkaW9uR3JvdXBFbCA9IHRoaXMuYWNjb3JkaW9uR3JvdXBFbCA9IHRoaXMuZWwgJiYgdGhpcy5lbC5jbG9zZXN0KCdpb24tYWNjb3JkaW9uLWdyb3VwJyk7XG4gICAgaWYgKGFjY29yZGlvbkdyb3VwRWwpIHtcbiAgICAgIHRoaXMudXBkYXRlU3RhdGUodHJ1ZSk7XG4gICAgICBhZGRFdmVudExpc3RlbmVyKGFjY29yZGlvbkdyb3VwRWwsICdpb25DaGFuZ2UnLCB0aGlzLnVwZGF0ZUxpc3RlbmVyKTtcbiAgICB9XG4gIH1cbiAgZGlzY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgY29uc3QgYWNjb3JkaW9uR3JvdXBFbCA9IHRoaXMuYWNjb3JkaW9uR3JvdXBFbDtcbiAgICBpZiAoYWNjb3JkaW9uR3JvdXBFbCkge1xuICAgICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcihhY2NvcmRpb25Hcm91cEVsLCAnaW9uQ2hhbmdlJywgdGhpcy51cGRhdGVMaXN0ZW5lcik7XG4gICAgfVxuICB9XG4gIGNvbXBvbmVudERpZExvYWQoKSB7XG4gICAgdGhpcy5zZXRJdGVtRGVmYXVsdHMoKTtcbiAgICB0aGlzLnNsb3RUb2dnbGVJY29uKCk7XG4gICAgLyoqXG4gICAgICogV2UgbmVlZCB0byB3YWl0IGEgdGljayBiZWNhdXNlIHdlXG4gICAgICoganVzdCBzZXQgaW9uSXRlbS5idXR0b24gPSB0cnVlIGFuZFxuICAgICAqIHRoZSBidXR0b24gaGFzIG5vdCBoYXZlIGJlZW4gcmVuZGVyZWQgeWV0LlxuICAgICAqL1xuICAgIHJhZigoKSA9PiB7XG4gICAgICAvKipcbiAgICAgICAqIFNldCBhcmlhIGxhYmVsIG9uIGJ1dHRvbiBpbnNpZGUgb2YgaW9uLWl0ZW1cbiAgICAgICAqIG9uY2UgdGhlIGlubmVyIGNvbnRlbnQgaGFzIGJlZW4gcmVuZGVyZWQuXG4gICAgICAgKi9cbiAgICAgIGNvbnN0IGV4cGFuZGVkID0gdGhpcy5zdGF0ZSA9PT0gNCAvKiBFeHBhbmRlZCAqLyB8fCB0aGlzLnN0YXRlID09PSA4IC8qIEV4cGFuZGluZyAqLztcbiAgICAgIHRoaXMuc2V0QXJpYShleHBhbmRlZCk7XG4gICAgfSk7XG4gIH1cbiAgdG9nZ2xlRXhwYW5kZWQoKSB7XG4gICAgY29uc3QgeyBhY2NvcmRpb25Hcm91cEVsLCB2YWx1ZSwgc3RhdGUgfSA9IHRoaXM7XG4gICAgaWYgKGFjY29yZGlvbkdyb3VwRWwpIHtcbiAgICAgIC8qKlxuICAgICAgICogQmVjYXVzZSB0aGUgYWNjb3JkaW9uIGdyb3VwIG1heSBvciBtYXlcbiAgICAgICAqIG5vdCBhbGxvdyBtdWx0aXBsZSBhY2NvcmRpb25zIG9wZW4sIHdlXG4gICAgICAgKiBuZWVkIHRvIHJlcXVlc3QgdGhlIHRvZ2dsaW5nIG9mIHRoaXNcbiAgICAgICAqIGFjY29yZGlvbiBhbmQgdGhlIGFjY29yZGlvbiBncm91cCB3aWxsXG4gICAgICAgKiBtYWtlIHRoZSBkZWNpc2lvbiBvbiB3aGV0aGVyIG9yIG5vdFxuICAgICAgICogdG8gYWxsb3cgaXQuXG4gICAgICAgKi9cbiAgICAgIGNvbnN0IGV4cGFuZCA9IHN0YXRlID09PSAxIC8qIENvbGxhcHNlZCAqLyB8fCBzdGF0ZSA9PT0gMiAvKiBDb2xsYXBzaW5nICovO1xuICAgICAgYWNjb3JkaW9uR3JvdXBFbC5yZXF1ZXN0QWNjb3JkaW9uVG9nZ2xlKHZhbHVlLCBleHBhbmQpO1xuICAgIH1cbiAgfVxuICByZW5kZXIoKSB7XG4gICAgY29uc3QgeyBkaXNhYmxlZCwgcmVhZG9ubHkgfSA9IHRoaXM7XG4gICAgY29uc3QgbW9kZSA9IGdldElvbk1vZGUodGhpcyk7XG4gICAgY29uc3QgZXhwYW5kZWQgPSB0aGlzLnN0YXRlID09PSA0IC8qIEV4cGFuZGVkICovIHx8IHRoaXMuc3RhdGUgPT09IDggLyogRXhwYW5kaW5nICovO1xuICAgIGNvbnN0IGhlYWRlclBhcnQgPSBleHBhbmRlZCA/ICdoZWFkZXIgZXhwYW5kZWQnIDogJ2hlYWRlcic7XG4gICAgY29uc3QgY29udGVudFBhcnQgPSBleHBhbmRlZCA/ICdjb250ZW50IGV4cGFuZGVkJyA6ICdjb250ZW50JztcbiAgICB0aGlzLnNldEFyaWEoZXhwYW5kZWQpO1xuICAgIHJldHVybiAoaChIb3N0LCB7IGNsYXNzOiB7XG4gICAgICAgIFttb2RlXTogdHJ1ZSxcbiAgICAgICAgJ2FjY29yZGlvbi1leHBhbmRpbmcnOiB0aGlzLnN0YXRlID09PSA4IC8qIEV4cGFuZGluZyAqLyxcbiAgICAgICAgJ2FjY29yZGlvbi1leHBhbmRlZCc6IHRoaXMuc3RhdGUgPT09IDQgLyogRXhwYW5kZWQgKi8sXG4gICAgICAgICdhY2NvcmRpb24tY29sbGFwc2luZyc6IHRoaXMuc3RhdGUgPT09IDIgLyogQ29sbGFwc2luZyAqLyxcbiAgICAgICAgJ2FjY29yZGlvbi1jb2xsYXBzZWQnOiB0aGlzLnN0YXRlID09PSAxIC8qIENvbGxhcHNlZCAqLyxcbiAgICAgICAgJ2FjY29yZGlvbi1uZXh0JzogdGhpcy5pc05leHQsXG4gICAgICAgICdhY2NvcmRpb24tcHJldmlvdXMnOiB0aGlzLmlzUHJldmlvdXMsXG4gICAgICAgICdhY2NvcmRpb24tZGlzYWJsZWQnOiBkaXNhYmxlZCxcbiAgICAgICAgJ2FjY29yZGlvbi1yZWFkb25seSc6IHJlYWRvbmx5LFxuICAgICAgICAnYWNjb3JkaW9uLWFuaW1hdGVkJzogY29uZmlnLmdldEJvb2xlYW4oJ2FuaW1hdGVkJywgdHJ1ZSlcbiAgICAgIH0gfSwgaChcImRpdlwiLCB7IG9uQ2xpY2s6ICgpID0+IHRoaXMudG9nZ2xlRXhwYW5kZWQoKSwgaWQ6IFwiaGVhZGVyXCIsIHBhcnQ6IGhlYWRlclBhcnQsIFwiYXJpYS1jb250cm9sc1wiOiBcImNvbnRlbnRcIiwgcmVmOiBoZWFkZXJFbCA9PiB0aGlzLmhlYWRlckVsID0gaGVhZGVyRWwgfSwgaChcInNsb3RcIiwgeyBuYW1lOiBcImhlYWRlclwiIH0pKSwgaChcImRpdlwiLCB7IGlkOiBcImNvbnRlbnRcIiwgcGFydDogY29udGVudFBhcnQsIHJvbGU6IFwicmVnaW9uXCIsIFwiYXJpYS1sYWJlbGxlZGJ5XCI6IFwiaGVhZGVyXCIsIHJlZjogY29udGVudEVsID0+IHRoaXMuY29udGVudEVsID0gY29udGVudEVsIH0sIGgoXCJkaXZcIiwgeyBpZDogXCJjb250ZW50LXdyYXBwZXJcIiwgcmVmOiBjb250ZW50RWxXcmFwcGVyID0+IHRoaXMuY29udGVudEVsV3JhcHBlciA9IGNvbnRlbnRFbFdyYXBwZXIgfSwgaChcInNsb3RcIiwgeyBuYW1lOiBcImNvbnRlbnRcIiB9KSkpKSk7XG4gIH1cbiAgc3RhdGljIGdldCBkZWxlZ2F0ZXNGb2N1cygpIHsgcmV0dXJuIHRydWU7IH1cbiAgZ2V0IGVsKCkgeyByZXR1cm4gZ2V0RWxlbWVudCh0aGlzKTsgfVxufTtcbmxldCBhY2NvcmRpb25JZHMgPSAwO1xuQWNjb3JkaW9uLnN0eWxlID0ge1xuICBpb3M6IGFjY29yZGlvbklvc0NzcyxcbiAgbWQ6IGFjY29yZGlvbk1kQ3NzXG59O1xuXG5jb25zdCBhY2NvcmRpb25Hcm91cElvc0NzcyA9IFwiOmhvc3R7ZGlzcGxheTpibG9ja306aG9zdCguYWNjb3JkaW9uLWdyb3VwLWV4cGFuZC1pbnNldCl7bWFyZ2luLWxlZnQ6MTZweDttYXJnaW4tcmlnaHQ6MTZweDttYXJnaW4tdG9wOjE2cHg7bWFyZ2luLWJvdHRvbToxNnB4fUBzdXBwb3J0cyAoKC13ZWJraXQtbWFyZ2luLXN0YXJ0OiAwKSBvciAobWFyZ2luLWlubGluZS1zdGFydDogMCkpIG9yICgtd2Via2l0LW1hcmdpbi1zdGFydDogMCl7Omhvc3QoLmFjY29yZGlvbi1ncm91cC1leHBhbmQtaW5zZXQpe21hcmdpbi1sZWZ0OnVuc2V0O21hcmdpbi1yaWdodDp1bnNldDstd2Via2l0LW1hcmdpbi1zdGFydDoxNnB4O21hcmdpbi1pbmxpbmUtc3RhcnQ6MTZweDstd2Via2l0LW1hcmdpbi1lbmQ6MTZweDttYXJnaW4taW5saW5lLWVuZDoxNnB4fX06aG9zdCguYWNjb3JkaW9uLWdyb3VwLWV4cGFuZC1pbnNldCkgOjpzbG90dGVkKGlvbi1hY2NvcmRpb24uYWNjb3JkaW9uLWV4cGFuZGluZyksOmhvc3QoLmFjY29yZGlvbi1ncm91cC1leHBhbmQtaW5zZXQpIDo6c2xvdHRlZChpb24tYWNjb3JkaW9uLmFjY29yZGlvbi1leHBhbmRlZCl7Ym9yZGVyLWJvdHRvbTpub25lfVwiO1xuXG5jb25zdCBhY2NvcmRpb25Hcm91cE1kQ3NzID0gXCI6aG9zdHtkaXNwbGF5OmJsb2NrfTpob3N0KC5hY2NvcmRpb24tZ3JvdXAtZXhwYW5kLWluc2V0KXttYXJnaW4tbGVmdDoxNnB4O21hcmdpbi1yaWdodDoxNnB4O21hcmdpbi10b3A6MTZweDttYXJnaW4tYm90dG9tOjE2cHh9QHN1cHBvcnRzICgoLXdlYmtpdC1tYXJnaW4tc3RhcnQ6IDApIG9yIChtYXJnaW4taW5saW5lLXN0YXJ0OiAwKSkgb3IgKC13ZWJraXQtbWFyZ2luLXN0YXJ0OiAwKXs6aG9zdCguYWNjb3JkaW9uLWdyb3VwLWV4cGFuZC1pbnNldCl7bWFyZ2luLWxlZnQ6dW5zZXQ7bWFyZ2luLXJpZ2h0OnVuc2V0Oy13ZWJraXQtbWFyZ2luLXN0YXJ0OjE2cHg7bWFyZ2luLWlubGluZS1zdGFydDoxNnB4Oy13ZWJraXQtbWFyZ2luLWVuZDoxNnB4O21hcmdpbi1pbmxpbmUtZW5kOjE2cHh9fTpob3N0KC5hY2NvcmRpb24tZ3JvdXAtZXhwYW5kLWluc2V0KSA6OnNsb3R0ZWQoaW9uLWFjY29yZGlvbil7LXdlYmtpdC1ib3gtc2hhZG93OjBweCAzcHggMXB4IC0ycHggcmdiYSgwLCAwLCAwLCAwLjIpLCAwcHggMnB4IDJweCAwcHggcmdiYSgwLCAwLCAwLCAwLjE0KSwgMHB4IDFweCA1cHggMHB4IHJnYmEoMCwgMCwgMCwgMC4xMik7Ym94LXNoYWRvdzowcHggM3B4IDFweCAtMnB4IHJnYmEoMCwgMCwgMCwgMC4yKSwgMHB4IDJweCAycHggMHB4IHJnYmEoMCwgMCwgMCwgMC4xNCksIDBweCAxcHggNXB4IDBweCByZ2JhKDAsIDAsIDAsIDAuMTIpfTpob3N0KC5hY2NvcmRpb24tZ3JvdXAtZXhwYW5kLWluc2V0KSA6OnNsb3R0ZWQoaW9uLWFjY29yZGlvbi5hY2NvcmRpb24tZXhwYW5kaW5nKSw6aG9zdCguYWNjb3JkaW9uLWdyb3VwLWV4cGFuZC1pbnNldCkgOjpzbG90dGVkKGlvbi1hY2NvcmRpb24uYWNjb3JkaW9uLWV4cGFuZGVkKXttYXJnaW4tbGVmdDowO21hcmdpbi1yaWdodDowO21hcmdpbi10b3A6MTZweDttYXJnaW4tYm90dG9tOjE2cHg7Ym9yZGVyLXJhZGl1czo2cHh9Omhvc3QoLmFjY29yZGlvbi1ncm91cC1leHBhbmQtaW5zZXQpIDo6c2xvdHRlZChpb24tYWNjb3JkaW9uLmFjY29yZGlvbi1wcmV2aW91cyl7Ym9yZGVyLWJvdHRvbS1yaWdodC1yYWRpdXM6NnB4O2JvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6NnB4fTpob3N0LWNvbnRleHQoW2Rpcj1ydGxdKTpob3N0KC5hY2NvcmRpb24tZ3JvdXAtZXhwYW5kLWluc2V0KSA6OnNsb3R0ZWQoaW9uLWFjY29yZGlvbi5hY2NvcmRpb24tcHJldmlvdXMpLDpob3N0LWNvbnRleHQoW2Rpcj1ydGxdKS5hY2NvcmRpb24tZ3JvdXAtZXhwYW5kLWluc2V0IDo6c2xvdHRlZChpb24tYWNjb3JkaW9uLmFjY29yZGlvbi1wcmV2aW91cyl7Ym9yZGVyLWJvdHRvbS1yaWdodC1yYWRpdXM6NnB4O2JvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6NnB4fTpob3N0KC5hY2NvcmRpb24tZ3JvdXAtZXhwYW5kLWluc2V0KSA6OnNsb3R0ZWQoaW9uLWFjY29yZGlvbi5hY2NvcmRpb24tbmV4dCl7Ym9yZGVyLXRvcC1sZWZ0LXJhZGl1czo2cHg7Ym9yZGVyLXRvcC1yaWdodC1yYWRpdXM6NnB4fTpob3N0LWNvbnRleHQoW2Rpcj1ydGxdKTpob3N0KC5hY2NvcmRpb24tZ3JvdXAtZXhwYW5kLWluc2V0KSA6OnNsb3R0ZWQoaW9uLWFjY29yZGlvbi5hY2NvcmRpb24tbmV4dCksOmhvc3QtY29udGV4dChbZGlyPXJ0bF0pLmFjY29yZGlvbi1ncm91cC1leHBhbmQtaW5zZXQgOjpzbG90dGVkKGlvbi1hY2NvcmRpb24uYWNjb3JkaW9uLW5leHQpe2JvcmRlci10b3AtbGVmdC1yYWRpdXM6NnB4O2JvcmRlci10b3AtcmlnaHQtcmFkaXVzOjZweH06aG9zdCguYWNjb3JkaW9uLWdyb3VwLWV4cGFuZC1pbnNldCkgOjpzbG90dGVkKGlvbi1hY2NvcmRpb24pOmZpcnN0LW9mLXR5cGV7bWFyZ2luLWxlZnQ6MDttYXJnaW4tcmlnaHQ6MDttYXJnaW4tdG9wOjA7bWFyZ2luLWJvdHRvbTowfVwiO1xuXG5sZXQgQWNjb3JkaW9uR3JvdXAgPSBjbGFzcyB7XG4gIGNvbnN0cnVjdG9yKGhvc3RSZWYpIHtcbiAgICByZWdpc3Rlckluc3RhbmNlKHRoaXMsIGhvc3RSZWYpO1xuICAgIHRoaXMuaW9uQ2hhbmdlID0gY3JlYXRlRXZlbnQodGhpcywgXCJpb25DaGFuZ2VcIiwgNyk7XG4gICAgLyoqXG4gICAgICogSWYgYHRydWVgLCBhbGwgYWNjb3JkaW9ucyBpbnNpZGUgb2YgdGhlXG4gICAgICogYWNjb3JkaW9uIGdyb3VwIHdpbGwgYW5pbWF0ZSB3aGVuIGV4cGFuZGluZ1xuICAgICAqIG9yIGNvbGxhcHNpbmcuXG4gICAgICovXG4gICAgdGhpcy5hbmltYXRlZCA9IHRydWU7XG4gICAgLyoqXG4gICAgICogSWYgYHRydWVgLCB0aGUgYWNjb3JkaW9uIGdyb3VwIGNhbm5vdCBiZSBpbnRlcmFjdGVkIHdpdGguXG4gICAgICovXG4gICAgdGhpcy5kaXNhYmxlZCA9IGZhbHNlO1xuICAgIC8qKlxuICAgICAqIElmIGB0cnVlYCwgdGhlIGFjY29yZGlvbiBncm91cCBjYW5ub3QgYmUgaW50ZXJhY3RlZCB3aXRoLFxuICAgICAqIGJ1dCBkb2VzIG5vdCBhbHRlciB0aGUgb3BhY2l0eS5cbiAgICAgKi9cbiAgICB0aGlzLnJlYWRvbmx5ID0gZmFsc2U7XG4gICAgLyoqXG4gICAgICogRGVzY3JpYmVzIHRoZSBleHBhbnNpb24gYmVoYXZpb3IgZm9yIGVhY2ggYWNjb3JkaW9uLlxuICAgICAqIFBvc3NpYmxlIHZhbHVlcyBhcmUgYFwiY29tcGFjdFwiYCBhbmQgYFwiaW5zZXRcImAuXG4gICAgICogRGVmYXVsdHMgdG8gYFwiY29tcGFjdFwiYC5cbiAgICAgKi9cbiAgICB0aGlzLmV4cGFuZCA9ICdjb21wYWN0JztcbiAgfVxuICB2YWx1ZUNoYW5nZWQoKSB7XG4gICAgY29uc3QgeyB2YWx1ZSwgbXVsdGlwbGUgfSA9IHRoaXM7XG4gICAgLyoqXG4gICAgICogSWYgYWNjb3JkaW9uIGdyb3VwIGRvZXMgbm90XG4gICAgICogbGV0IG11bHRpcGxlIGFjY29yZGlvbnMgYmUgb3BlblxuICAgICAqIGF0IG9uY2UsIGJ1dCB1c2VyIHBhc3NlcyBhbiBhcnJheVxuICAgICAqIGp1c3QgZ3JhYiB0aGUgZmlyc3QgdmFsdWUuXG4gICAgICovXG4gICAgaWYgKCFtdWx0aXBsZSAmJiBBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlWzBdO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHRoaXMuaW9uQ2hhbmdlLmVtaXQoeyB2YWx1ZTogdGhpcy52YWx1ZSB9KTtcbiAgICB9XG4gIH1cbiAgYXN5bmMgZGlzYWJsZWRDaGFuZ2VkKCkge1xuICAgIGNvbnN0IHsgZGlzYWJsZWQgfSA9IHRoaXM7XG4gICAgY29uc3QgYWNjb3JkaW9ucyA9IGF3YWl0IHRoaXMuZ2V0QWNjb3JkaW9ucygpO1xuICAgIGZvciAoY29uc3QgYWNjb3JkaW9uIG9mIGFjY29yZGlvbnMpIHtcbiAgICAgIGFjY29yZGlvbi5kaXNhYmxlZCA9IGRpc2FibGVkO1xuICAgIH1cbiAgfVxuICBhc3luYyByZWFkb25seUNoYW5nZWQoKSB7XG4gICAgY29uc3QgeyByZWFkb25seSB9ID0gdGhpcztcbiAgICBjb25zdCBhY2NvcmRpb25zID0gYXdhaXQgdGhpcy5nZXRBY2NvcmRpb25zKCk7XG4gICAgZm9yIChjb25zdCBhY2NvcmRpb24gb2YgYWNjb3JkaW9ucykge1xuICAgICAgYWNjb3JkaW9uLnJlYWRvbmx5ID0gcmVhZG9ubHk7XG4gICAgfVxuICB9XG4gIGFzeW5jIG9uS2V5ZG93bihldikge1xuICAgIGNvbnN0IGFjdGl2ZUVsZW1lbnQgPSBkb2N1bWVudC5hY3RpdmVFbGVtZW50O1xuICAgIGlmICghYWN0aXZlRWxlbWVudCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBhY2NvcmRpb25FbCA9IChhY3RpdmVFbGVtZW50LnRhZ05hbWUgPT09ICdJT04tQUNDT1JESU9OJykgPyBhY3RpdmVFbGVtZW50IDogYWN0aXZlRWxlbWVudC5jbG9zZXN0KCdpb24tYWNjb3JkaW9uJyk7XG4gICAgaWYgKCFhY2NvcmRpb25FbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBjbG9zZXN0R3JvdXAgPSBhY2NvcmRpb25FbC5jbG9zZXN0KCdpb24tYWNjb3JkaW9uLWdyb3VwJyk7XG4gICAgaWYgKGNsb3Nlc3RHcm91cCAhPT0gdGhpcy5lbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvLyBJZiB0aGUgYWN0aXZlIGFjY29yZGlvbiBpcyBub3QgaW4gdGhlIGN1cnJlbnQgYXJyYXkgb2YgYWNjb3JkaW9ucywgZG8gbm90IGRvIGFueXRoaW5nXG4gICAgY29uc3QgYWNjb3JkaW9ucyA9IGF3YWl0IHRoaXMuZ2V0QWNjb3JkaW9ucygpO1xuICAgIGNvbnN0IHN0YXJ0aW5nSW5kZXggPSBhY2NvcmRpb25zLmZpbmRJbmRleChhID0+IGEgPT09IGFjY29yZGlvbkVsKTtcbiAgICBpZiAoc3RhcnRpbmdJbmRleCA9PT0gLTEpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgbGV0IGFjY29yZGlvbjtcbiAgICBpZiAoZXYua2V5ID09PSAnQXJyb3dEb3duJykge1xuICAgICAgYWNjb3JkaW9uID0gdGhpcy5maW5kTmV4dEFjY29yZGlvbihhY2NvcmRpb25zLCBzdGFydGluZ0luZGV4KTtcbiAgICB9XG4gICAgZWxzZSBpZiAoZXYua2V5ID09PSAnQXJyb3dVcCcpIHtcbiAgICAgIGFjY29yZGlvbiA9IHRoaXMuZmluZFByZXZpb3VzQWNjb3JkaW9uKGFjY29yZGlvbnMsIHN0YXJ0aW5nSW5kZXgpO1xuICAgIH1cbiAgICBlbHNlIGlmIChldi5rZXkgPT09ICdIb21lJykge1xuICAgICAgYWNjb3JkaW9uID0gYWNjb3JkaW9uc1swXTtcbiAgICB9XG4gICAgZWxzZSBpZiAoZXYua2V5ID09PSAnRW5kJykge1xuICAgICAgYWNjb3JkaW9uID0gYWNjb3JkaW9uc1thY2NvcmRpb25zLmxlbmd0aCAtIDFdO1xuICAgIH1cbiAgICBpZiAoYWNjb3JkaW9uICE9PSB1bmRlZmluZWQgJiYgYWNjb3JkaW9uICE9PSBhY3RpdmVFbGVtZW50KSB7XG4gICAgICBhY2NvcmRpb24uZm9jdXMoKTtcbiAgICB9XG4gIH1cbiAgYXN5bmMgY29tcG9uZW50RGlkTG9hZCgpIHtcbiAgICBpZiAodGhpcy5kaXNhYmxlZCkge1xuICAgICAgdGhpcy5kaXNhYmxlZENoYW5nZWQoKTtcbiAgICB9XG4gICAgaWYgKHRoaXMucmVhZG9ubHkpIHtcbiAgICAgIHRoaXMucmVhZG9ubHlDaGFuZ2VkKCk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIGFzeW5jIHJlcXVlc3RBY2NvcmRpb25Ub2dnbGUoYWNjb3JkaW9uVmFsdWUsIGFjY29yZGlvbkV4cGFuZCkge1xuICAgIGNvbnN0IHsgbXVsdGlwbGUsIHZhbHVlLCByZWFkb25seSwgZGlzYWJsZWQgfSA9IHRoaXM7XG4gICAgaWYgKHJlYWRvbmx5IHx8IGRpc2FibGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChhY2NvcmRpb25FeHBhbmQpIHtcbiAgICAgIC8qKlxuICAgICAgICogSWYgZ3JvdXAgYWNjZXB0cyBtdWx0aXBsZSB2YWx1ZXNcbiAgICAgICAqIGNoZWNrIHRvIHNlZSBpZiB2YWx1ZSBpcyBhbHJlYWR5IGluXG4gICAgICAgKiBpbiB2YWx1ZXMgYXJyYXkuIElmIG5vdCwgYWRkIGl0XG4gICAgICAgKiB0byB0aGUgYXJyYXkuXG4gICAgICAgKi9cbiAgICAgIGlmIChtdWx0aXBsZSkge1xuICAgICAgICBjb25zdCBncm91cFZhbHVlID0gdmFsdWUgfHwgW107XG4gICAgICAgIGNvbnN0IHByb2Nlc3NlZFZhbHVlID0gQXJyYXkuaXNBcnJheShncm91cFZhbHVlKSA/IGdyb3VwVmFsdWUgOiBbZ3JvdXBWYWx1ZV07XG4gICAgICAgIGNvbnN0IHZhbHVlRXhpc3RzID0gcHJvY2Vzc2VkVmFsdWUuZmluZCh2ID0+IHYgPT09IGFjY29yZGlvblZhbHVlKTtcbiAgICAgICAgaWYgKHZhbHVlRXhpc3RzID09PSB1bmRlZmluZWQgJiYgYWNjb3JkaW9uVmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHRoaXMudmFsdWUgPSBbLi4ucHJvY2Vzc2VkVmFsdWUsIGFjY29yZGlvblZhbHVlXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIHRoaXMudmFsdWUgPSBhY2NvcmRpb25WYWx1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAvKipcbiAgICAgICAqIElmIGNvbGxhcHNpbmcgYWNjb3JkaW9uLCBlaXRoZXIgZmlsdGVyIHRoZSB2YWx1ZVxuICAgICAgICogb3V0IG9mIHRoZSB2YWx1ZXMgYXJyYXkgb3IgdW5zZXQgdGhlIHZhbHVlLlxuICAgICAgICovXG4gICAgICBpZiAobXVsdGlwbGUpIHtcbiAgICAgICAgY29uc3QgZ3JvdXBWYWx1ZSA9IHZhbHVlIHx8IFtdO1xuICAgICAgICBjb25zdCBwcm9jZXNzZWRWYWx1ZSA9IEFycmF5LmlzQXJyYXkoZ3JvdXBWYWx1ZSkgPyBncm91cFZhbHVlIDogW2dyb3VwVmFsdWVdO1xuICAgICAgICB0aGlzLnZhbHVlID0gcHJvY2Vzc2VkVmFsdWUuZmlsdGVyKHYgPT4gdiAhPT0gYWNjb3JkaW9uVmFsdWUpO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIHRoaXMudmFsdWUgPSB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGZpbmROZXh0QWNjb3JkaW9uKGFjY29yZGlvbnMsIHN0YXJ0aW5nSW5kZXgpIHtcbiAgICBjb25zdCBuZXh0QWNjb3JkaW9uID0gYWNjb3JkaW9uc1tzdGFydGluZ0luZGV4ICsgMV07XG4gICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOnN0cmljdC10eXBlLXByZWRpY2F0ZXNcbiAgICBpZiAobmV4dEFjY29yZGlvbiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gYWNjb3JkaW9uc1swXTtcbiAgICB9XG4gICAgcmV0dXJuIG5leHRBY2NvcmRpb247XG4gIH1cbiAgZmluZFByZXZpb3VzQWNjb3JkaW9uKGFjY29yZGlvbnMsIHN0YXJ0aW5nSW5kZXgpIHtcbiAgICBjb25zdCBwcmV2QWNjb3JkaW9uID0gYWNjb3JkaW9uc1tzdGFydGluZ0luZGV4IC0gMV07XG4gICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOnN0cmljdC10eXBlLXByZWRpY2F0ZXNcbiAgICBpZiAocHJldkFjY29yZGlvbiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gYWNjb3JkaW9uc1thY2NvcmRpb25zLmxlbmd0aCAtIDFdO1xuICAgIH1cbiAgICByZXR1cm4gcHJldkFjY29yZGlvbjtcbiAgfVxuICAvKipcbiAgICogQGludGVybmFsXG4gICAqL1xuICBhc3luYyBnZXRBY2NvcmRpb25zKCkge1xuICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMuZWwucXVlcnlTZWxlY3RvckFsbCgnOnNjb3BlID4gaW9uLWFjY29yZGlvbicpKTtcbiAgfVxuICByZW5kZXIoKSB7XG4gICAgY29uc3QgeyBkaXNhYmxlZCwgcmVhZG9ubHksIGV4cGFuZCB9ID0gdGhpcztcbiAgICBjb25zdCBtb2RlID0gZ2V0SW9uTW9kZSh0aGlzKTtcbiAgICByZXR1cm4gKGgoSG9zdCwgeyBjbGFzczoge1xuICAgICAgICBbbW9kZV06IHRydWUsXG4gICAgICAgICdhY2NvcmRpb24tZ3JvdXAtZGlzYWJsZWQnOiBkaXNhYmxlZCxcbiAgICAgICAgJ2FjY29yZGlvbi1ncm91cC1yZWFkb25seSc6IHJlYWRvbmx5LFxuICAgICAgICBbYGFjY29yZGlvbi1ncm91cC1leHBhbmQtJHtleHBhbmR9YF06IHRydWVcbiAgICAgIH0sIHJvbGU6IFwicHJlc2VudGF0aW9uXCIgfSwgaChcInNsb3RcIiwgbnVsbCkpKTtcbiAgfVxuICBnZXQgZWwoKSB7IHJldHVybiBnZXRFbGVtZW50KHRoaXMpOyB9XG4gIHN0YXRpYyBnZXQgd2F0Y2hlcnMoKSB7IHJldHVybiB7XG4gICAgXCJ2YWx1ZVwiOiBbXCJ2YWx1ZUNoYW5nZWRcIl0sXG4gICAgXCJkaXNhYmxlZFwiOiBbXCJkaXNhYmxlZENoYW5nZWRcIl0sXG4gICAgXCJyZWFkb25seVwiOiBbXCJyZWFkb25seUNoYW5nZWRcIl1cbiAgfTsgfVxufTtcbkFjY29yZGlvbkdyb3VwLnN0eWxlID0ge1xuICBpb3M6IGFjY29yZGlvbkdyb3VwSW9zQ3NzLFxuICBtZDogYWNjb3JkaW9uR3JvdXBNZENzc1xufTtcblxuZXhwb3J0IHsgQWNjb3JkaW9uIGFzIGlvbl9hY2NvcmRpb24sIEFjY29yZGlvbkdyb3VwIGFzIGlvbl9hY2NvcmRpb25fZ3JvdXAgfTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==