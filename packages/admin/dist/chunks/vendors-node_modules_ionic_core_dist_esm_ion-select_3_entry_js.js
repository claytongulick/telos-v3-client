"use strict";
(self["webpackChunk"] = self["webpackChunk"] || []).push([["vendors-node_modules_ionic_core_dist_esm_ion-select_3_entry_js"],{

/***/ "../../../node_modules/@ionic/core/dist/esm/ion-select_3.entry.js":
/*!************************************************************************!*\
  !*** ../../../node_modules/@ionic/core/dist/esm/ion-select_3.entry.js ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ion_select": () => (/* binding */ Select),
/* harmony export */   "ion_select_option": () => (/* binding */ SelectOption),
/* harmony export */   "ion_select_popover": () => (/* binding */ SelectPopover)
/* harmony export */ });
/* harmony import */ var _index_06cd27b1_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-06cd27b1.js */ "../../../node_modules/@ionic/core/dist/esm/index-06cd27b1.js");
/* harmony import */ var _ionic_global_a049bcbf_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ionic-global-a049bcbf.js */ "../../../node_modules/@ionic/core/dist/esm/ionic-global-a049bcbf.js");
/* harmony import */ var _helpers_eed79a2b_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./helpers-eed79a2b.js */ "../../../node_modules/@ionic/core/dist/esm/helpers-eed79a2b.js");
/* harmony import */ var _overlays_f2e55e3a_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./overlays-f2e55e3a.js */ "../../../node_modules/@ionic/core/dist/esm/overlays-f2e55e3a.js");
/* harmony import */ var _theme_a24ff1ad_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./theme-a24ff1ad.js */ "../../../node_modules/@ionic/core/dist/esm/theme-a24ff1ad.js");
/* harmony import */ var _haptic_9a9aa7ec_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./haptic-9a9aa7ec.js */ "../../../node_modules/@ionic/core/dist/esm/haptic-9a9aa7ec.js");
/* harmony import */ var _index_41bf41f2_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./index-41bf41f2.js */ "../../../node_modules/@ionic/core/dist/esm/index-41bf41f2.js");
/* harmony import */ var _gesture_controller_68c023a4_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./gesture-controller-68c023a4.js */ "../../../node_modules/@ionic/core/dist/esm/gesture-controller-68c023a4.js");
/* harmony import */ var _index_c841c933_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./index-c841c933.js */ "../../../node_modules/@ionic/core/dist/esm/index-c841c933.js");
/* harmony import */ var _animation_c9c2a359_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./animation-c9c2a359.js */ "../../../node_modules/@ionic/core/dist/esm/animation-c9c2a359.js");
/* harmony import */ var _framework_delegate_a922018c_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./framework-delegate-a922018c.js */ "../../../node_modules/@ionic/core/dist/esm/framework-delegate-a922018c.js");
/* harmony import */ var _index_c8ef55b5_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./index-c8ef55b5.js */ "../../../node_modules/@ionic/core/dist/esm/index-c8ef55b5.js");
/* harmony import */ var _cubic_bezier_154a53a5_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./cubic-bezier-154a53a5.js */ "../../../node_modules/@ionic/core/dist/esm/cubic-bezier-154a53a5.js");
/* harmony import */ var _hardware_back_button_ace6a71b_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./hardware-back-button-ace6a71b.js */ "../../../node_modules/@ionic/core/dist/esm/hardware-back-button-ace6a71b.js");
/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */















const watchForOptions = (containerEl, tagName, onChange) => {
  /* tslint:disable-next-line */
  if (typeof MutationObserver === 'undefined') {
    return;
  }
  const mutation = new MutationObserver(mutationList => {
    onChange(getSelectedOption(mutationList, tagName));
  });
  mutation.observe(containerEl, {
    childList: true,
    subtree: true
  });
  return mutation;
};
const getSelectedOption = (mutationList, tagName) => {
  let newOption;
  mutationList.forEach(mut => {
    // tslint:disable-next-line: prefer-for-of
    for (let i = 0; i < mut.addedNodes.length; i++) {
      newOption = findCheckedOption(mut.addedNodes[i], tagName) || newOption;
    }
  });
  return newOption;
};
const findCheckedOption = (el, tagName) => {
  if (el.nodeType !== 1) {
    return undefined;
  }
  const options = (el.tagName === tagName.toUpperCase())
    ? [el]
    : Array.from(el.querySelectorAll(tagName));
  return options.find((o) => o.value === el.value);
};

const selectIosCss = ":host{--placeholder-color:currentColor;--placeholder-opacity:0.33;padding-left:var(--padding-start);padding-right:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);display:-ms-flexbox;display:flex;position:relative;-ms-flex-align:center;align-items:center;font-family:var(--ion-font-family, inherit);overflow:hidden;z-index:2}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){:host{padding-left:unset;padding-right:unset;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end)}}:host(.in-item){position:static;max-width:45%}:host(.select-disabled){opacity:0.4;pointer-events:none}:host(.ion-focused) button{border:2px solid #5e9ed6}.select-placeholder{color:var(--placeholder-color);opacity:var(--placeholder-opacity)}label{left:0;top:0;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;position:absolute;width:100%;height:100%;border:0;background:transparent;cursor:pointer;-webkit-appearance:none;-moz-appearance:none;appearance:none;outline:none;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;opacity:0}[dir=rtl] label,:host-context([dir=rtl]) label{left:unset;right:unset;right:0}label::-moz-focus-inner{border:0}button{position:absolute;top:0;left:0;right:0;bottom:0;width:100%;height:100%;margin:0;padding:0;border:0;outline:0;clip:rect(0 0 0 0);opacity:0;overflow:hidden;-webkit-appearance:none;-moz-appearance:none}.select-icon{position:relative}.select-text{-ms-flex:1;flex:1;min-width:16px;font-size:inherit;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.select-icon-inner{left:5px;top:50%;margin-top:-2px;position:absolute;width:0;height:0;border-top:5px solid;border-right:5px solid transparent;border-left:5px solid transparent;color:currentColor;pointer-events:none}[dir=rtl] .select-icon-inner,:host-context([dir=rtl]) .select-icon-inner{left:unset;right:unset;right:5px}:host{--padding-top:10px;--padding-end:10px;--padding-bottom:10px;--padding-start:20px}.select-icon{width:12px;height:18px;opacity:0.33}";

const selectMdCss = ":host{--placeholder-color:currentColor;--placeholder-opacity:0.33;padding-left:var(--padding-start);padding-right:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);display:-ms-flexbox;display:flex;position:relative;-ms-flex-align:center;align-items:center;font-family:var(--ion-font-family, inherit);overflow:hidden;z-index:2}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){:host{padding-left:unset;padding-right:unset;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end)}}:host(.in-item){position:static;max-width:45%}:host(.select-disabled){opacity:0.4;pointer-events:none}:host(.ion-focused) button{border:2px solid #5e9ed6}.select-placeholder{color:var(--placeholder-color);opacity:var(--placeholder-opacity)}label{left:0;top:0;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;position:absolute;width:100%;height:100%;border:0;background:transparent;cursor:pointer;-webkit-appearance:none;-moz-appearance:none;appearance:none;outline:none;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;opacity:0}[dir=rtl] label,:host-context([dir=rtl]) label{left:unset;right:unset;right:0}label::-moz-focus-inner{border:0}button{position:absolute;top:0;left:0;right:0;bottom:0;width:100%;height:100%;margin:0;padding:0;border:0;outline:0;clip:rect(0 0 0 0);opacity:0;overflow:hidden;-webkit-appearance:none;-moz-appearance:none}.select-icon{position:relative}.select-text{-ms-flex:1;flex:1;min-width:16px;font-size:inherit;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.select-icon-inner{left:5px;top:50%;margin-top:-2px;position:absolute;width:0;height:0;border-top:5px solid;border-right:5px solid transparent;border-left:5px solid transparent;color:currentColor;pointer-events:none}[dir=rtl] .select-icon-inner,:host-context([dir=rtl]) .select-icon-inner{left:unset;right:unset;right:5px}:host{--padding-top:10px;--padding-end:0;--padding-bottom:10px;--padding-start:16px}.select-icon{width:19px;height:19px;-webkit-transition:-webkit-transform 0.15s cubic-bezier(0.4, 0, 0.2, 1);transition:-webkit-transform 0.15s cubic-bezier(0.4, 0, 0.2, 1);transition:transform 0.15s cubic-bezier(0.4, 0, 0.2, 1);transition:transform 0.15s cubic-bezier(0.4, 0, 0.2, 1), -webkit-transform 0.15s cubic-bezier(0.4, 0, 0.2, 1);opacity:0.55}:host-context(.item-label-stacked) .select-icon,:host-context(.item-label-floating:not(.item-fill-outline)) .select-icon,:host-context(.item-label-floating.item-fill-outline){-webkit-transform:translate3d(0,  -9px,  0);transform:translate3d(0,  -9px,  0)}:host-context(.item-has-focus) .select-icon{-webkit-transform:rotate(180deg);transform:rotate(180deg)}:host-context(.item-has-focus.item-label-stacked) .select-icon,:host-context(.item-has-focus.item-label-floating:not(.item-fill-outline)) .select-icon{-webkit-transform:translate3d(0,  -9px,  0) rotate(180deg);transform:translate3d(0,  -9px,  0) rotate(180deg)}:host-context(ion-item.ion-focused) .select-icon,:host-context(.item-has-focus) .select-icon{color:var(--highlight-color-focused);opacity:1}";

let Select = class {
  constructor(hostRef) {
    (0,_index_06cd27b1_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);
    this.ionChange = (0,_index_06cd27b1_js__WEBPACK_IMPORTED_MODULE_0__.e)(this, "ionChange", 7);
    this.ionCancel = (0,_index_06cd27b1_js__WEBPACK_IMPORTED_MODULE_0__.e)(this, "ionCancel", 7);
    this.ionFocus = (0,_index_06cd27b1_js__WEBPACK_IMPORTED_MODULE_0__.e)(this, "ionFocus", 7);
    this.ionBlur = (0,_index_06cd27b1_js__WEBPACK_IMPORTED_MODULE_0__.e)(this, "ionBlur", 7);
    this.ionStyle = (0,_index_06cd27b1_js__WEBPACK_IMPORTED_MODULE_0__.e)(this, "ionStyle", 7);
    this.inputId = `ion-sel-${selectIds++}`;
    this.didInit = false;
    this.isExpanded = false;
    /**
     * If `true`, the user cannot interact with the select.
     */
    this.disabled = false;
    /**
     * The text to display on the cancel button.
     */
    this.cancelText = 'Cancel';
    /**
     * The text to display on the ok button.
     */
    this.okText = 'OK';
    /**
     * The name of the control, which is submitted with the form data.
     */
    this.name = this.inputId;
    /**
     * If `true`, the select can accept multiple values.
     */
    this.multiple = false;
    /**
     * The interface the select should use: `action-sheet`, `popover` or `alert`.
     */
    this.interface = 'alert';
    /**
     * Any additional options that the `alert`, `action-sheet` or `popover` interface
     * can take. See the [ion-alert docs](../alert), the
     * [ion-action-sheet docs](../action-sheet) and the
     * [ion-popover docs](../popover) for the
     * create options for each interface.
     *
     * Note: `interfaceOptions` will not override `inputs` or `buttons` with the `alert` interface.
     */
    this.interfaceOptions = {};
    this.onClick = (ev) => {
      this.setFocus();
      this.open(ev);
    };
    this.onFocus = () => {
      this.ionFocus.emit();
    };
    this.onBlur = () => {
      this.ionBlur.emit();
    };
  }
  styleChanged() {
    this.emitStyle();
  }
  valueChanged() {
    this.emitStyle();
    if (this.didInit) {
      this.ionChange.emit({
        value: this.value,
      });
    }
  }
  async connectedCallback() {
    this.updateOverlayOptions();
    this.emitStyle();
    this.mutationO = watchForOptions(this.el, 'ion-select-option', async () => {
      this.updateOverlayOptions();
    });
  }
  disconnectedCallback() {
    if (this.mutationO) {
      this.mutationO.disconnect();
      this.mutationO = undefined;
    }
  }
  componentDidLoad() {
    this.didInit = true;
  }
  /**
   * Open the select overlay. The overlay is either an alert, action sheet, or popover,
   * depending on the `interface` property on the `ion-select`.
   *
   * @param event The user interface event that called the open.
   */
  async open(event) {
    if (this.disabled || this.isExpanded) {
      return undefined;
    }
    const overlay = this.overlay = await this.createOverlay(event);
    this.isExpanded = true;
    overlay.onDidDismiss().then(() => {
      this.overlay = undefined;
      this.isExpanded = false;
      this.setFocus();
    });
    await overlay.present();
    // focus selected option for popovers
    if (this.interface === 'popover') {
      let indexOfSelected = this.childOpts.map(o => o.value).indexOf(this.value);
      indexOfSelected = indexOfSelected > -1 ? indexOfSelected : 0; // default to first option if nothing selected
      const selectedEl = overlay.querySelector(`.select-interface-option:nth-child(${indexOfSelected + 1})`);
      if (selectedEl) {
        (0,_helpers_eed79a2b_js__WEBPACK_IMPORTED_MODULE_2__.f)(selectedEl);
      }
    }
    return overlay;
  }
  createOverlay(ev) {
    let selectInterface = this.interface;
    if (selectInterface === 'action-sheet' && this.multiple) {
      console.warn(`Select interface cannot be "${selectInterface}" with a multi-value select. Using the "alert" interface instead.`);
      selectInterface = 'alert';
    }
    if (selectInterface === 'popover' && !ev) {
      console.warn(`Select interface cannot be a "${selectInterface}" without passing an event. Using the "alert" interface instead.`);
      selectInterface = 'alert';
    }
    if (selectInterface === 'action-sheet') {
      return this.openActionSheet();
    }
    if (selectInterface === 'popover') {
      return this.openPopover(ev);
    }
    return this.openAlert();
  }
  updateOverlayOptions() {
    const overlay = this.overlay;
    if (!overlay) {
      return;
    }
    const childOpts = this.childOpts;
    const value = this.value;
    switch (this.interface) {
      case 'action-sheet':
        overlay.buttons = this.createActionSheetButtons(childOpts, value);
        break;
      case 'popover':
        const popover = overlay.querySelector('ion-select-popover');
        if (popover) {
          popover.options = this.createPopoverOptions(childOpts, value);
        }
        break;
      case 'alert':
        const inputType = (this.multiple ? 'checkbox' : 'radio');
        overlay.inputs = this.createAlertInputs(childOpts, inputType, value);
        break;
    }
  }
  createActionSheetButtons(data, selectValue) {
    const actionSheetButtons = data.map(option => {
      const value = getOptionValue(option);
      // Remove hydrated before copying over classes
      const copyClasses = Array.from(option.classList).filter(cls => cls !== 'hydrated').join(' ');
      const optClass = `${OPTION_CLASS} ${copyClasses}`;
      return {
        role: (isOptionSelected(value, selectValue, this.compareWith) ? 'selected' : ''),
        text: option.textContent,
        cssClass: optClass,
        handler: () => {
          this.value = value;
        }
      };
    });
    // Add "cancel" button
    actionSheetButtons.push({
      text: this.cancelText,
      role: 'cancel',
      handler: () => {
        this.ionCancel.emit();
      }
    });
    return actionSheetButtons;
  }
  createAlertInputs(data, inputType, selectValue) {
    const alertInputs = data.map(option => {
      const value = getOptionValue(option);
      // Remove hydrated before copying over classes
      const copyClasses = Array.from(option.classList).filter(cls => cls !== 'hydrated').join(' ');
      const optClass = `${OPTION_CLASS} ${copyClasses}`;
      return {
        type: inputType,
        cssClass: optClass,
        label: option.textContent || '',
        value,
        checked: isOptionSelected(value, selectValue, this.compareWith),
        disabled: option.disabled
      };
    });
    return alertInputs;
  }
  createPopoverOptions(data, selectValue) {
    const popoverOptions = data.map(option => {
      const value = getOptionValue(option);
      // Remove hydrated before copying over classes
      const copyClasses = Array.from(option.classList).filter(cls => cls !== 'hydrated').join(' ');
      const optClass = `${OPTION_CLASS} ${copyClasses}`;
      return {
        text: option.textContent || '',
        cssClass: optClass,
        value,
        checked: isOptionSelected(value, selectValue, this.compareWith),
        disabled: option.disabled,
        handler: (selected) => {
          this.value = selected;
          if (!this.multiple) {
            this.close();
          }
        }
      };
    });
    return popoverOptions;
  }
  async openPopover(ev) {
    const interfaceOptions = this.interfaceOptions;
    const mode = (0,_ionic_global_a049bcbf_js__WEBPACK_IMPORTED_MODULE_1__.b)(this);
    const showBackdrop = mode === 'md' ? false : true;
    const multiple = this.multiple;
    const value = this.value;
    let event = ev;
    let size = 'auto';
    const item = this.el.closest('ion-item');
    // If the select is inside of an item containing a floating
    // or stacked label then the popover should take up the
    // full width of the item when it presents
    if (item && (item.classList.contains('item-label-floating') || item.classList.contains('item-label-stacked'))) {
      event = Object.assign(Object.assign({}, ev), { detail: {
          ionShadowTarget: item
        } });
      size = 'cover';
    }
    const popoverOpts = Object.assign(Object.assign({ mode,
      event, alignment: 'center', size,
      showBackdrop }, interfaceOptions), { component: 'ion-select-popover', cssClass: ['select-popover', interfaceOptions.cssClass], componentProps: {
        header: interfaceOptions.header,
        subHeader: interfaceOptions.subHeader,
        message: interfaceOptions.message,
        multiple,
        value,
        options: this.createPopoverOptions(this.childOpts, value)
      } });
    return _overlays_f2e55e3a_js__WEBPACK_IMPORTED_MODULE_3__.c.create(popoverOpts);
  }
  async openActionSheet() {
    const mode = (0,_ionic_global_a049bcbf_js__WEBPACK_IMPORTED_MODULE_1__.b)(this);
    const interfaceOptions = this.interfaceOptions;
    const actionSheetOpts = Object.assign(Object.assign({ mode }, interfaceOptions), { buttons: this.createActionSheetButtons(this.childOpts, this.value), cssClass: ['select-action-sheet', interfaceOptions.cssClass] });
    return _overlays_f2e55e3a_js__WEBPACK_IMPORTED_MODULE_3__.b.create(actionSheetOpts);
  }
  async openAlert() {
    const label = this.getLabel();
    const labelText = (label) ? label.textContent : null;
    const interfaceOptions = this.interfaceOptions;
    const inputType = (this.multiple ? 'checkbox' : 'radio');
    const mode = (0,_ionic_global_a049bcbf_js__WEBPACK_IMPORTED_MODULE_1__.b)(this);
    const alertOpts = Object.assign(Object.assign({ mode }, interfaceOptions), { header: interfaceOptions.header ? interfaceOptions.header : labelText, inputs: this.createAlertInputs(this.childOpts, inputType, this.value), buttons: [
        {
          text: this.cancelText,
          role: 'cancel',
          handler: () => {
            this.ionCancel.emit();
          }
        },
        {
          text: this.okText,
          handler: (selectedValues) => {
            this.value = selectedValues;
          }
        }
      ], cssClass: ['select-alert', interfaceOptions.cssClass,
        (this.multiple ? 'multiple-select-alert' : 'single-select-alert')] });
    return _overlays_f2e55e3a_js__WEBPACK_IMPORTED_MODULE_3__.a.create(alertOpts);
  }
  /**
   * Close the select interface.
   */
  close() {
    // TODO check !this.overlay || !this.isFocus()
    if (!this.overlay) {
      return Promise.resolve(false);
    }
    return this.overlay.dismiss();
  }
  getLabel() {
    return (0,_helpers_eed79a2b_js__WEBPACK_IMPORTED_MODULE_2__.k)(this.el);
  }
  hasValue() {
    return this.getText() !== '';
  }
  get childOpts() {
    return Array.from(this.el.querySelectorAll('ion-select-option'));
  }
  getText() {
    const selectedText = this.selectedText;
    if (selectedText != null && selectedText !== '') {
      return selectedText;
    }
    return generateText(this.childOpts, this.value, this.compareWith);
  }
  setFocus() {
    if (this.focusEl) {
      this.focusEl.focus();
    }
  }
  emitStyle() {
    this.ionStyle.emit({
      'interactive': true,
      'interactive-disabled': this.disabled,
      'select': true,
      'select-disabled': this.disabled,
      'has-placeholder': this.placeholder !== undefined,
      'has-value': this.hasValue(),
      'has-focus': this.isExpanded,
    });
  }
  render() {
    const { disabled, el, inputId, isExpanded, name, placeholder, value } = this;
    const mode = (0,_ionic_global_a049bcbf_js__WEBPACK_IMPORTED_MODULE_1__.b)(this);
    const { labelText, labelId } = (0,_helpers_eed79a2b_js__WEBPACK_IMPORTED_MODULE_2__.e)(el, inputId);
    (0,_helpers_eed79a2b_js__WEBPACK_IMPORTED_MODULE_2__.h)(true, el, name, parseValue(value), disabled);
    const displayValue = this.getText();
    let addPlaceholderClass = false;
    let selectText = displayValue;
    if (selectText === '' && placeholder !== undefined) {
      selectText = placeholder;
      addPlaceholderClass = true;
    }
    const selectTextClasses = {
      'select-text': true,
      'select-placeholder': addPlaceholderClass
    };
    const textPart = addPlaceholderClass ? 'placeholder' : 'text';
    // If there is a label then we need to concatenate it with the
    // current value (or placeholder) and a comma so it separates
    // nicely when the screen reader announces it, otherwise just
    // announce the value / placeholder
    const displayLabel = labelText !== undefined
      ? (selectText !== '' ? `${selectText}, ${labelText}` : labelText)
      : selectText;
    return ((0,_index_06cd27b1_js__WEBPACK_IMPORTED_MODULE_0__.h)(_index_06cd27b1_js__WEBPACK_IMPORTED_MODULE_0__.H, { onClick: this.onClick, role: "button", "aria-haspopup": "listbox", "aria-disabled": disabled ? 'true' : null, "aria-label": displayLabel, class: {
        [mode]: true,
        'in-item': (0,_theme_a24ff1ad_js__WEBPACK_IMPORTED_MODULE_4__.h)('ion-item', el),
        'select-disabled': disabled,
        'select-expanded': isExpanded
      } }, (0,_index_06cd27b1_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { "aria-hidden": "true", class: selectTextClasses, part: textPart }, selectText), (0,_index_06cd27b1_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "select-icon", role: "presentation", part: "icon" }, (0,_index_06cd27b1_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "select-icon-inner" })), (0,_index_06cd27b1_js__WEBPACK_IMPORTED_MODULE_0__.h)("label", { id: labelId }, displayLabel), (0,_index_06cd27b1_js__WEBPACK_IMPORTED_MODULE_0__.h)("button", { type: "button", disabled: disabled, id: inputId, "aria-labelledby": labelId, "aria-haspopup": "listbox", "aria-expanded": `${isExpanded}`, onFocus: this.onFocus, onBlur: this.onBlur, ref: (focusEl => this.focusEl = focusEl) })));
  }
  get el() { return (0,_index_06cd27b1_js__WEBPACK_IMPORTED_MODULE_0__.i)(this); }
  static get watchers() { return {
    "disabled": ["styleChanged"],
    "placeholder": ["styleChanged"],
    "isExpanded": ["styleChanged"],
    "value": ["valueChanged"]
  }; }
};
const isOptionSelected = (currentValue, compareValue, compareWith) => {
  if (currentValue === undefined) {
    return false;
  }
  if (Array.isArray(currentValue)) {
    return currentValue.some(val => compareOptions(val, compareValue, compareWith));
  }
  else {
    return compareOptions(currentValue, compareValue, compareWith);
  }
};
const getOptionValue = (el) => {
  const value = el.value;
  return (value === undefined)
    ? el.textContent || ''
    : value;
};
const parseValue = (value) => {
  if (value == null) {
    return undefined;
  }
  if (Array.isArray(value)) {
    return value.join(',');
  }
  return value.toString();
};
const compareOptions = (currentValue, compareValue, compareWith) => {
  if (typeof compareWith === 'function') {
    return compareWith(currentValue, compareValue);
  }
  else if (typeof compareWith === 'string') {
    return currentValue[compareWith] === compareValue[compareWith];
  }
  else {
    return Array.isArray(compareValue) ? compareValue.includes(currentValue) : currentValue === compareValue;
  }
};
const generateText = (opts, value, compareWith) => {
  if (value === undefined) {
    return '';
  }
  if (Array.isArray(value)) {
    return value
      .map(v => textForValue(opts, v, compareWith))
      .filter(opt => opt !== null)
      .join(', ');
  }
  else {
    return textForValue(opts, value, compareWith) || '';
  }
};
const textForValue = (opts, value, compareWith) => {
  const selectOpt = opts.find(opt => {
    return compareOptions(getOptionValue(opt), value, compareWith);
  });
  return selectOpt
    ? selectOpt.textContent
    : null;
};
let selectIds = 0;
const OPTION_CLASS = 'select-interface-option';
Select.style = {
  ios: selectIosCss,
  md: selectMdCss
};

const selectOptionCss = ":host{display:none}";

let SelectOption = class {
  constructor(hostRef) {
    (0,_index_06cd27b1_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);
    this.inputId = `ion-selopt-${selectOptionIds++}`;
    /**
     * If `true`, the user cannot interact with the select option. This property does not apply when `interface="action-sheet"` as `ion-action-sheet` does not allow for disabled buttons.
     */
    this.disabled = false;
  }
  render() {
    return ((0,_index_06cd27b1_js__WEBPACK_IMPORTED_MODULE_0__.h)(_index_06cd27b1_js__WEBPACK_IMPORTED_MODULE_0__.H, { role: "option", id: this.inputId, class: (0,_ionic_global_a049bcbf_js__WEBPACK_IMPORTED_MODULE_1__.b)(this) }));
  }
  get el() { return (0,_index_06cd27b1_js__WEBPACK_IMPORTED_MODULE_0__.i)(this); }
};
let selectOptionIds = 0;
SelectOption.style = selectOptionCss;

const selectPopoverIosCss = ".sc-ion-select-popover-ios-h ion-list.sc-ion-select-popover-ios{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}ion-list-header.sc-ion-select-popover-ios,ion-label.sc-ion-select-popover-ios{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}";

const selectPopoverMdCss = ".sc-ion-select-popover-md-h ion-list.sc-ion-select-popover-md{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}ion-list-header.sc-ion-select-popover-md,ion-label.sc-ion-select-popover-md{margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}ion-list.sc-ion-select-popover-md ion-radio.sc-ion-select-popover-md{opacity:0}ion-item.sc-ion-select-popover-md{--inner-border-width:0}.item-radio-checked.sc-ion-select-popover-md{--background:rgba(var(--ion-color-primary-rgb, 56, 128, 255), 0.08);--background-focused:var(--ion-color-primary, #3880ff);--background-focused-opacity:0.2;--background-hover:var(--ion-color-primary, #3880ff);--background-hover-opacity:0.12}.item-checkbox-checked.sc-ion-select-popover-md{--background-activated:var(--ion-item-color, var(--ion-text-color, #000));--background-focused:var(--ion-item-color, var(--ion-text-color, #000));--background-hover:var(--ion-item-color, var(--ion-text-color, #000));--color:var(--ion-color-primary, #3880ff)}";

let SelectPopover = class {
  constructor(hostRef) {
    (0,_index_06cd27b1_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);
    /**
     * An array of options for the popover
     */
    this.options = [];
  }
  onSelect(ev) {
    this.setChecked(ev);
    this.callOptionHandler(ev);
  }
  findOptionFromEvent(ev) {
    const { options } = this;
    return options.find(o => o.value === ev.target.value);
  }
  /**
   * When an option is selected we need to get the value(s)
   * of the selected option(s) and return it in the option
   * handler
   */
  callOptionHandler(ev) {
    const option = this.findOptionFromEvent(ev);
    const values = this.getValues(ev);
    if (option && option.handler) {
      (0,_overlays_f2e55e3a_js__WEBPACK_IMPORTED_MODULE_3__.s)(option.handler, values);
    }
  }
  /**
   * This is required when selecting a radio that is already
   * selected because it will not trigger the ionChange event
   * but we still want to close the popover
   */
  rbClick(ev) {
    this.callOptionHandler(ev);
  }
  setChecked(ev) {
    const { multiple } = this;
    const option = this.findOptionFromEvent(ev);
    // this is a popover with checkboxes (multiple value select)
    // we need to set the checked value for this option
    if (multiple && option) {
      option.checked = ev.detail.checked;
    }
  }
  getValues(ev) {
    const { multiple, options } = this;
    if (multiple) {
      // this is a popover with checkboxes (multiple value select)
      // return an array of all the checked values
      return options.filter(o => o.checked).map(o => o.value);
    }
    // this is a popover with radio buttons (single value select)
    // return the value that was clicked, otherwise undefined
    const option = this.findOptionFromEvent(ev);
    return option ? option.value : undefined;
  }
  renderOptions(options) {
    const { multiple } = this;
    switch (multiple) {
      case true: return this.renderCheckboxOptions(options);
      default: return this.renderRadioOptions(options);
    }
  }
  renderCheckboxOptions(options) {
    return (options.map(option => (0,_index_06cd27b1_js__WEBPACK_IMPORTED_MODULE_0__.h)("ion-item", { class: (0,_theme_a24ff1ad_js__WEBPACK_IMPORTED_MODULE_4__.g)(option.cssClass) }, (0,_index_06cd27b1_js__WEBPACK_IMPORTED_MODULE_0__.h)("ion-checkbox", { slot: "start", value: option.value, disabled: option.disabled, checked: option.checked }), (0,_index_06cd27b1_js__WEBPACK_IMPORTED_MODULE_0__.h)("ion-label", null, option.text))));
  }
  renderRadioOptions(options) {
    const checked = options.filter(o => o.checked).map(o => o.value)[0];
    return ((0,_index_06cd27b1_js__WEBPACK_IMPORTED_MODULE_0__.h)("ion-radio-group", { value: checked }, options.map(option => (0,_index_06cd27b1_js__WEBPACK_IMPORTED_MODULE_0__.h)("ion-item", { class: (0,_theme_a24ff1ad_js__WEBPACK_IMPORTED_MODULE_4__.g)(option.cssClass) }, (0,_index_06cd27b1_js__WEBPACK_IMPORTED_MODULE_0__.h)("ion-label", null, option.text), (0,_index_06cd27b1_js__WEBPACK_IMPORTED_MODULE_0__.h)("ion-radio", { value: option.value, disabled: option.disabled, onClick: ev => this.rbClick(ev) })))));
  }
  render() {
    const { header, message, options, subHeader } = this;
    const hasSubHeaderOrMessage = subHeader !== undefined || message !== undefined;
    return ((0,_index_06cd27b1_js__WEBPACK_IMPORTED_MODULE_0__.h)(_index_06cd27b1_js__WEBPACK_IMPORTED_MODULE_0__.H, { class: (0,_ionic_global_a049bcbf_js__WEBPACK_IMPORTED_MODULE_1__.b)(this) }, (0,_index_06cd27b1_js__WEBPACK_IMPORTED_MODULE_0__.h)("ion-list", null, header !== undefined && (0,_index_06cd27b1_js__WEBPACK_IMPORTED_MODULE_0__.h)("ion-list-header", null, header), hasSubHeaderOrMessage &&
      (0,_index_06cd27b1_js__WEBPACK_IMPORTED_MODULE_0__.h)("ion-item", null, (0,_index_06cd27b1_js__WEBPACK_IMPORTED_MODULE_0__.h)("ion-label", { class: "ion-text-wrap" }, subHeader !== undefined && (0,_index_06cd27b1_js__WEBPACK_IMPORTED_MODULE_0__.h)("h3", null, subHeader), message !== undefined && (0,_index_06cd27b1_js__WEBPACK_IMPORTED_MODULE_0__.h)("p", null, message))), this.renderOptions(options))));
  }
};
SelectPopover.style = {
  ios: selectPopoverIosCss,
  md: selectPopoverMdCss
};




/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2h1bmtzL3ZlbmRvcnMtbm9kZV9tb2R1bGVzX2lvbmljX2NvcmVfZGlzdF9lc21faW9uLXNlbGVjdF8zX2VudHJ5X2pzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQzZHO0FBQ2hEO0FBQzREO0FBQ1E7QUFDeEQ7QUFDM0M7QUFDRDtBQUNhO0FBQ2I7QUFDSTtBQUNTO0FBQ2I7QUFDTztBQUNROztBQUU1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLDJCQUEyQjtBQUMvQztBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsNEJBQTRCLGlDQUFpQywyQkFBMkIsa0NBQWtDLGlDQUFpQywrQkFBK0IscUNBQXFDLG9CQUFvQixhQUFhLGtCQUFrQixzQkFBc0IsbUJBQW1CLDRDQUE0QyxnQkFBZ0IsVUFBVSwrRkFBK0YsTUFBTSxtQkFBbUIsb0JBQW9CLDJDQUEyQywwQ0FBMEMsdUNBQXVDLHVDQUF1QyxnQkFBZ0IsZ0JBQWdCLGNBQWMsd0JBQXdCLFlBQVksb0JBQW9CLDJCQUEyQix5QkFBeUIsb0JBQW9CLCtCQUErQixtQ0FBbUMsTUFBTSxPQUFPLE1BQU0sY0FBYyxlQUFlLGFBQWEsZ0JBQWdCLGtCQUFrQixXQUFXLFlBQVksU0FBUyx1QkFBdUIsZUFBZSx3QkFBd0IscUJBQXFCLGdCQUFnQixhQUFhLG9CQUFvQixhQUFhLHNCQUFzQixtQkFBbUIsVUFBVSwrQ0FBK0MsV0FBVyxZQUFZLFFBQVEsd0JBQXdCLFNBQVMsT0FBTyxrQkFBa0IsTUFBTSxPQUFPLFFBQVEsU0FBUyxXQUFXLFlBQVksU0FBUyxVQUFVLFNBQVMsVUFBVSxtQkFBbUIsVUFBVSxnQkFBZ0Is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QU0sd0RBQVE7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxXQUFXO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLG9CQUFvQjtBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxXQUFXO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyxxREFBQyxlQUFlLE9BQU8scURBQVcsbUJBQW1CLEVBQUUscURBQUMsbUJBQW1CLHdGQUF3RixHQUFHLHFEQUFDO0FBQ3pNO0FBQ0E7QUFDQTtBQUNBLFlBQVkscURBQUMsc0JBQXNCLGdCQUFnQix3QkFBd0IscURBQUMsZUFBZSxPQUFPLHFEQUFXLG1CQUFtQixFQUFFLHFEQUFDLGtDQUFrQyxxREFBQyxnQkFBZ0IsaUZBQWlGO0FBQ3ZRO0FBQ0E7QUFDQSxZQUFZLHNDQUFzQztBQUNsRDtBQUNBLFlBQVkscURBQUMsQ0FBQyxpREFBSSxJQUFJLE9BQU8sNERBQVUsUUFBUSxFQUFFLHFEQUFDLDJDQUEyQyxxREFBQztBQUM5RixNQUFNLHFEQUFDLG1CQUFtQixxREFBQyxnQkFBZ0Isd0JBQXdCLDZCQUE2QixxREFBQyxrREFBa0QscURBQUM7QUFDcEo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUV3RyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uLi8uLi8uLi9ub2RlX21vZHVsZXMvQGlvbmljL2NvcmUvZGlzdC9lc20vaW9uLXNlbGVjdF8zLmVudHJ5LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogKEMpIElvbmljIGh0dHA6Ly9pb25pY2ZyYW1ld29yay5jb20gLSBNSVQgTGljZW5zZVxuICovXG5pbXBvcnQgeyByIGFzIHJlZ2lzdGVySW5zdGFuY2UsIGUgYXMgY3JlYXRlRXZlbnQsIGgsIEggYXMgSG9zdCwgaSBhcyBnZXRFbGVtZW50IH0gZnJvbSAnLi9pbmRleC0wNmNkMjdiMS5qcyc7XG5pbXBvcnQgeyBiIGFzIGdldElvbk1vZGUgfSBmcm9tICcuL2lvbmljLWdsb2JhbC1hMDQ5YmNiZi5qcyc7XG5pbXBvcnQgeyBmIGFzIGZvY3VzRWxlbWVudCwgayBhcyBmaW5kSXRlbUxhYmVsLCBlIGFzIGdldEFyaWFMYWJlbCwgaCBhcyByZW5kZXJIaWRkZW5JbnB1dCB9IGZyb20gJy4vaGVscGVycy1lZWQ3OWEyYi5qcyc7XG5pbXBvcnQgeyBjIGFzIHBvcG92ZXJDb250cm9sbGVyLCBiIGFzIGFjdGlvblNoZWV0Q29udHJvbGxlciwgYSBhcyBhbGVydENvbnRyb2xsZXIsIHMgYXMgc2FmZUNhbGwgfSBmcm9tICcuL292ZXJsYXlzLWYyZTU1ZTNhLmpzJztcbmltcG9ydCB7IGggYXMgaG9zdENvbnRleHQsIGcgYXMgZ2V0Q2xhc3NNYXAgfSBmcm9tICcuL3RoZW1lLWEyNGZmMWFkLmpzJztcbmltcG9ydCAnLi9oYXB0aWMtOWE5YWE3ZWMuanMnO1xuaW1wb3J0ICcuL2luZGV4LTQxYmY0MWYyLmpzJztcbmltcG9ydCAnLi9nZXN0dXJlLWNvbnRyb2xsZXItNjhjMDIzYTQuanMnO1xuaW1wb3J0ICcuL2luZGV4LWM4NDFjOTMzLmpzJztcbmltcG9ydCAnLi9hbmltYXRpb24tYzljMmEzNTkuanMnO1xuaW1wb3J0ICcuL2ZyYW1ld29yay1kZWxlZ2F0ZS1hOTIyMDE4Yy5qcyc7XG5pbXBvcnQgJy4vaW5kZXgtYzhlZjU1YjUuanMnO1xuaW1wb3J0ICcuL2N1YmljLWJlemllci0xNTRhNTNhNS5qcyc7XG5pbXBvcnQgJy4vaGFyZHdhcmUtYmFjay1idXR0b24tYWNlNmE3MWIuanMnO1xuXG5jb25zdCB3YXRjaEZvck9wdGlvbnMgPSAoY29udGFpbmVyRWwsIHRhZ05hbWUsIG9uQ2hhbmdlKSA9PiB7XG4gIC8qIHRzbGludDpkaXNhYmxlLW5leHQtbGluZSAqL1xuICBpZiAodHlwZW9mIE11dGF0aW9uT2JzZXJ2ZXIgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IG11dGF0aW9uID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIobXV0YXRpb25MaXN0ID0+IHtcbiAgICBvbkNoYW5nZShnZXRTZWxlY3RlZE9wdGlvbihtdXRhdGlvbkxpc3QsIHRhZ05hbWUpKTtcbiAgfSk7XG4gIG11dGF0aW9uLm9ic2VydmUoY29udGFpbmVyRWwsIHtcbiAgICBjaGlsZExpc3Q6IHRydWUsXG4gICAgc3VidHJlZTogdHJ1ZVxuICB9KTtcbiAgcmV0dXJuIG11dGF0aW9uO1xufTtcbmNvbnN0IGdldFNlbGVjdGVkT3B0aW9uID0gKG11dGF0aW9uTGlzdCwgdGFnTmFtZSkgPT4ge1xuICBsZXQgbmV3T3B0aW9uO1xuICBtdXRhdGlvbkxpc3QuZm9yRWFjaChtdXQgPT4ge1xuICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTogcHJlZmVyLWZvci1vZlxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbXV0LmFkZGVkTm9kZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIG5ld09wdGlvbiA9IGZpbmRDaGVja2VkT3B0aW9uKG11dC5hZGRlZE5vZGVzW2ldLCB0YWdOYW1lKSB8fCBuZXdPcHRpb247XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIG5ld09wdGlvbjtcbn07XG5jb25zdCBmaW5kQ2hlY2tlZE9wdGlvbiA9IChlbCwgdGFnTmFtZSkgPT4ge1xuICBpZiAoZWwubm9kZVR5cGUgIT09IDEpIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG4gIGNvbnN0IG9wdGlvbnMgPSAoZWwudGFnTmFtZSA9PT0gdGFnTmFtZS50b1VwcGVyQ2FzZSgpKVxuICAgID8gW2VsXVxuICAgIDogQXJyYXkuZnJvbShlbC5xdWVyeVNlbGVjdG9yQWxsKHRhZ05hbWUpKTtcbiAgcmV0dXJuIG9wdGlvbnMuZmluZCgobykgPT4gby52YWx1ZSA9PT0gZWwudmFsdWUpO1xufTtcblxuY29uc3Qgc2VsZWN0SW9zQ3NzID0gXCI6aG9zdHstLXBsYWNlaG9sZGVyLWNvbG9yOmN1cnJlbnRDb2xvcjstLXBsYWNlaG9sZGVyLW9wYWNpdHk6MC4zMztwYWRkaW5nLWxlZnQ6dmFyKC0tcGFkZGluZy1zdGFydCk7cGFkZGluZy1yaWdodDp2YXIoLS1wYWRkaW5nLWVuZCk7cGFkZGluZy10b3A6dmFyKC0tcGFkZGluZy10b3ApO3BhZGRpbmctYm90dG9tOnZhcigtLXBhZGRpbmctYm90dG9tKTtkaXNwbGF5Oi1tcy1mbGV4Ym94O2Rpc3BsYXk6ZmxleDtwb3NpdGlvbjpyZWxhdGl2ZTstbXMtZmxleC1hbGlnbjpjZW50ZXI7YWxpZ24taXRlbXM6Y2VudGVyO2ZvbnQtZmFtaWx5OnZhcigtLWlvbi1mb250LWZhbWlseSwgaW5oZXJpdCk7b3ZlcmZsb3c6aGlkZGVuO3otaW5kZXg6Mn1Ac3VwcG9ydHMgKCgtd2Via2l0LW1hcmdpbi1zdGFydDogMCkgb3IgKG1hcmdpbi1pbmxpbmUtc3RhcnQ6IDApKSBvciAoLXdlYmtpdC1tYXJnaW4tc3RhcnQ6IDApezpob3N0e3BhZGRpbmctbGVmdDp1bnNldDtwYWRkaW5nLXJpZ2h0OnVuc2V0Oy13ZWJraXQtcGFkZGluZy1zdGFydDp2YXIoLS1wYWRkaW5nLXN0YXJ0KTtwYWRkaW5nLWlubGluZS1zdGFydDp2YXIoLS1wYWRkaW5nLXN0YXJ0KTstd2Via2l0LXBhZGRpbmctZW5kOnZhcigtLXBhZGRpbmctZW5kKTtwYWRkaW5nLWlubGluZS1lbmQ6dmFyKC0tcGFkZGluZy1lbmQpfX06aG9zdCguaW4taXRlbSl7cG9zaXRpb246c3RhdGljO21heC13aWR0aDo0NSV9Omhvc3QoLnNlbGVjdC1kaXNhYmxlZCl7b3BhY2l0eTowLjQ7cG9pbnRlci1ldmVudHM6bm9uZX06aG9zdCguaW9uLWZvY3VzZWQpIGJ1dHRvbntib3JkZXI6MnB4IHNvbGlkICM1ZTllZDZ9LnNlbGVjdC1wbGFjZWhvbGRlcntjb2xvcjp2YXIoLS1wbGFjZWhvbGRlci1jb2xvcik7b3BhY2l0eTp2YXIoLS1wbGFjZWhvbGRlci1vcGFjaXR5KX1sYWJlbHtsZWZ0OjA7dG9wOjA7bWFyZ2luLWxlZnQ6MDttYXJnaW4tcmlnaHQ6MDttYXJnaW4tdG9wOjA7bWFyZ2luLWJvdHRvbTowO3Bvc2l0aW9uOmFic29sdXRlO3dpZHRoOjEwMCU7aGVpZ2h0OjEwMCU7Ym9yZGVyOjA7YmFja2dyb3VuZDp0cmFuc3BhcmVudDtjdXJzb3I6cG9pbnRlcjstd2Via2l0LWFwcGVhcmFuY2U6bm9uZTstbW96LWFwcGVhcmFuY2U6bm9uZTthcHBlYXJhbmNlOm5vbmU7b3V0bGluZTpub25lO2Rpc3BsYXk6LW1zLWZsZXhib3g7ZGlzcGxheTpmbGV4Oy1tcy1mbGV4LWFsaWduOmNlbnRlcjthbGlnbi1pdGVtczpjZW50ZXI7b3BhY2l0eTowfVtkaXI9cnRsXSBsYWJlbCw6aG9zdC1jb250ZXh0KFtkaXI9cnRsXSkgbGFiZWx7bGVmdDp1bnNldDtyaWdodDp1bnNldDtyaWdodDowfWxhYmVsOjotbW96LWZvY3VzLWlubmVye2JvcmRlcjowfWJ1dHRvbntwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MDtsZWZ0OjA7cmlnaHQ6MDtib3R0b206MDt3aWR0aDoxMDAlO2hlaWdodDoxMDAlO21hcmdpbjowO3BhZGRpbmc6MDtib3JkZXI6MDtvdXRsaW5lOjA7Y2xpcDpyZWN0KDAgMCAwIDApO29wYWNpdHk6MDtvdmVyZmxvdzpoaWRkZW47LXdlYmtpdC1hcHBlYXJhbmNlOm5vbmU7LW1vei1hcHBlYXJhbmNlOm5vbmV9LnNlbGVjdC1pY29ue3Bvc2l0aW9uOnJlbGF0aXZlfS5zZWxlY3QtdGV4dHstbXMtZmxleDoxO2ZsZXg6MTttaW4td2lkdGg6MTZweDtmb250LXNpemU6aW5oZXJpdDt0ZXh0LW92ZXJmbG93OmVsbGlwc2lzO3doaXRlLXNwYWNlOm5vd3JhcDtvdmVyZmxvdzpoaWRkZW59LnNlbGVjdC1pY29uLWlubmVye2xlZnQ6NXB4O3RvcDo1MCU7bWFyZ2luLXRvcDotMnB4O3Bvc2l0aW9uOmFic29sdXRlO3dpZHRoOjA7aGVpZ2h0OjA7Ym9yZGVyLXRvcDo1cHggc29saWQ7Ym9yZGVyLXJpZ2h0OjVweCBzb2xpZCB0cmFuc3BhcmVudDtib3JkZXItbGVmdDo1cHggc29saWQgdHJhbnNwYXJlbnQ7Y29sb3I6Y3VycmVudENvbG9yO3BvaW50ZXItZXZlbnRzOm5vbmV9W2Rpcj1ydGxdIC5zZWxlY3QtaWNvbi1pbm5lciw6aG9zdC1jb250ZXh0KFtkaXI9cnRsXSkgLnNlbGVjdC1pY29uLWlubmVye2xlZnQ6dW5zZXQ7cmlnaHQ6dW5zZXQ7cmlnaHQ6NXB4fTpob3N0ey0tcGFkZGluZy10b3A6MTBweDstLXBhZGRpbmctZW5kOjEwcHg7LS1wYWRkaW5nLWJvdHRvbToxMHB4Oy0tcGFkZGluZy1zdGFydDoyMHB4fS5zZWxlY3QtaWNvbnt3aWR0aDoxMnB4O2hlaWdodDoxOHB4O29wYWNpdHk6MC4zM31cIjtcblxuY29uc3Qgc2VsZWN0TWRDc3MgPSBcIjpob3N0ey0tcGxhY2Vob2xkZXItY29sb3I6Y3VycmVudENvbG9yOy0tcGxhY2Vob2xkZXItb3BhY2l0eTowLjMzO3BhZGRpbmctbGVmdDp2YXIoLS1wYWRkaW5nLXN0YXJ0KTtwYWRkaW5nLXJpZ2h0OnZhcigtLXBhZGRpbmctZW5kKTtwYWRkaW5nLXRvcDp2YXIoLS1wYWRkaW5nLXRvcCk7cGFkZGluZy1ib3R0b206dmFyKC0tcGFkZGluZy1ib3R0b20pO2Rpc3BsYXk6LW1zLWZsZXhib3g7ZGlzcGxheTpmbGV4O3Bvc2l0aW9uOnJlbGF0aXZlOy1tcy1mbGV4LWFsaWduOmNlbnRlcjthbGlnbi1pdGVtczpjZW50ZXI7Zm9udC1mYW1pbHk6dmFyKC0taW9uLWZvbnQtZmFtaWx5LCBpbmhlcml0KTtvdmVyZmxvdzpoaWRkZW47ei1pbmRleDoyfUBzdXBwb3J0cyAoKC13ZWJraXQtbWFyZ2luLXN0YXJ0OiAwKSBvciAobWFyZ2luLWlubGluZS1zdGFydDogMCkpIG9yICgtd2Via2l0LW1hcmdpbi1zdGFydDogMCl7Omhvc3R7cGFkZGluZy1sZWZ0OnVuc2V0O3BhZGRpbmctcmlnaHQ6dW5zZXQ7LXdlYmtpdC1wYWRkaW5nLXN0YXJ0OnZhcigtLXBhZGRpbmctc3RhcnQpO3BhZGRpbmctaW5saW5lLXN0YXJ0OnZhcigtLXBhZGRpbmctc3RhcnQpOy13ZWJraXQtcGFkZGluZy1lbmQ6dmFyKC0tcGFkZGluZy1lbmQpO3BhZGRpbmctaW5saW5lLWVuZDp2YXIoLS1wYWRkaW5nLWVuZCl9fTpob3N0KC5pbi1pdGVtKXtwb3NpdGlvbjpzdGF0aWM7bWF4LXdpZHRoOjQ1JX06aG9zdCguc2VsZWN0LWRpc2FibGVkKXtvcGFjaXR5OjAuNDtwb2ludGVyLWV2ZW50czpub25lfTpob3N0KC5pb24tZm9jdXNlZCkgYnV0dG9ue2JvcmRlcjoycHggc29saWQgIzVlOWVkNn0uc2VsZWN0LXBsYWNlaG9sZGVye2NvbG9yOnZhcigtLXBsYWNlaG9sZGVyLWNvbG9yKTtvcGFjaXR5OnZhcigtLXBsYWNlaG9sZGVyLW9wYWNpdHkpfWxhYmVse2xlZnQ6MDt0b3A6MDttYXJnaW4tbGVmdDowO21hcmdpbi1yaWdodDowO21hcmdpbi10b3A6MDttYXJnaW4tYm90dG9tOjA7cG9zaXRpb246YWJzb2x1dGU7d2lkdGg6MTAwJTtoZWlnaHQ6MTAwJTtib3JkZXI6MDtiYWNrZ3JvdW5kOnRyYW5zcGFyZW50O2N1cnNvcjpwb2ludGVyOy13ZWJraXQtYXBwZWFyYW5jZTpub25lOy1tb3otYXBwZWFyYW5jZTpub25lO2FwcGVhcmFuY2U6bm9uZTtvdXRsaW5lOm5vbmU7ZGlzcGxheTotbXMtZmxleGJveDtkaXNwbGF5OmZsZXg7LW1zLWZsZXgtYWxpZ246Y2VudGVyO2FsaWduLWl0ZW1zOmNlbnRlcjtvcGFjaXR5OjB9W2Rpcj1ydGxdIGxhYmVsLDpob3N0LWNvbnRleHQoW2Rpcj1ydGxdKSBsYWJlbHtsZWZ0OnVuc2V0O3JpZ2h0OnVuc2V0O3JpZ2h0OjB9bGFiZWw6Oi1tb3otZm9jdXMtaW5uZXJ7Ym9yZGVyOjB9YnV0dG9ue3Bvc2l0aW9uOmFic29sdXRlO3RvcDowO2xlZnQ6MDtyaWdodDowO2JvdHRvbTowO3dpZHRoOjEwMCU7aGVpZ2h0OjEwMCU7bWFyZ2luOjA7cGFkZGluZzowO2JvcmRlcjowO291dGxpbmU6MDtjbGlwOnJlY3QoMCAwIDAgMCk7b3BhY2l0eTowO292ZXJmbG93OmhpZGRlbjstd2Via2l0LWFwcGVhcmFuY2U6bm9uZTstbW96LWFwcGVhcmFuY2U6bm9uZX0uc2VsZWN0LWljb257cG9zaXRpb246cmVsYXRpdmV9LnNlbGVjdC10ZXh0ey1tcy1mbGV4OjE7ZmxleDoxO21pbi13aWR0aDoxNnB4O2ZvbnQtc2l6ZTppbmhlcml0O3RleHQtb3ZlcmZsb3c6ZWxsaXBzaXM7d2hpdGUtc3BhY2U6bm93cmFwO292ZXJmbG93OmhpZGRlbn0uc2VsZWN0LWljb24taW5uZXJ7bGVmdDo1cHg7dG9wOjUwJTttYXJnaW4tdG9wOi0ycHg7cG9zaXRpb246YWJzb2x1dGU7d2lkdGg6MDtoZWlnaHQ6MDtib3JkZXItdG9wOjVweCBzb2xpZDtib3JkZXItcmlnaHQ6NXB4IHNvbGlkIHRyYW5zcGFyZW50O2JvcmRlci1sZWZ0OjVweCBzb2xpZCB0cmFuc3BhcmVudDtjb2xvcjpjdXJyZW50Q29sb3I7cG9pbnRlci1ldmVudHM6bm9uZX1bZGlyPXJ0bF0gLnNlbGVjdC1pY29uLWlubmVyLDpob3N0LWNvbnRleHQoW2Rpcj1ydGxdKSAuc2VsZWN0LWljb24taW5uZXJ7bGVmdDp1bnNldDtyaWdodDp1bnNldDtyaWdodDo1cHh9Omhvc3R7LS1wYWRkaW5nLXRvcDoxMHB4Oy0tcGFkZGluZy1lbmQ6MDstLXBhZGRpbmctYm90dG9tOjEwcHg7LS1wYWRkaW5nLXN0YXJ0OjE2cHh9LnNlbGVjdC1pY29ue3dpZHRoOjE5cHg7aGVpZ2h0OjE5cHg7LXdlYmtpdC10cmFuc2l0aW9uOi13ZWJraXQtdHJhbnNmb3JtIDAuMTVzIGN1YmljLWJlemllcigwLjQsIDAsIDAuMiwgMSk7dHJhbnNpdGlvbjotd2Via2l0LXRyYW5zZm9ybSAwLjE1cyBjdWJpYy1iZXppZXIoMC40LCAwLCAwLjIsIDEpO3RyYW5zaXRpb246dHJhbnNmb3JtIDAuMTVzIGN1YmljLWJlemllcigwLjQsIDAsIDAuMiwgMSk7dHJhbnNpdGlvbjp0cmFuc2Zvcm0gMC4xNXMgY3ViaWMtYmV6aWVyKDAuNCwgMCwgMC4yLCAxKSwgLXdlYmtpdC10cmFuc2Zvcm0gMC4xNXMgY3ViaWMtYmV6aWVyKDAuNCwgMCwgMC4yLCAxKTtvcGFjaXR5OjAuNTV9Omhvc3QtY29udGV4dCguaXRlbS1sYWJlbC1zdGFja2VkKSAuc2VsZWN0LWljb24sOmhvc3QtY29udGV4dCguaXRlbS1sYWJlbC1mbG9hdGluZzpub3QoLml0ZW0tZmlsbC1vdXRsaW5lKSkgLnNlbGVjdC1pY29uLDpob3N0LWNvbnRleHQoLml0ZW0tbGFiZWwtZmxvYXRpbmcuaXRlbS1maWxsLW91dGxpbmUpey13ZWJraXQtdHJhbnNmb3JtOnRyYW5zbGF0ZTNkKDAsICAtOXB4LCAgMCk7dHJhbnNmb3JtOnRyYW5zbGF0ZTNkKDAsICAtOXB4LCAgMCl9Omhvc3QtY29udGV4dCguaXRlbS1oYXMtZm9jdXMpIC5zZWxlY3QtaWNvbnstd2Via2l0LXRyYW5zZm9ybTpyb3RhdGUoMTgwZGVnKTt0cmFuc2Zvcm06cm90YXRlKDE4MGRlZyl9Omhvc3QtY29udGV4dCguaXRlbS1oYXMtZm9jdXMuaXRlbS1sYWJlbC1zdGFja2VkKSAuc2VsZWN0LWljb24sOmhvc3QtY29udGV4dCguaXRlbS1oYXMtZm9jdXMuaXRlbS1sYWJlbC1mbG9hdGluZzpub3QoLml0ZW0tZmlsbC1vdXRsaW5lKSkgLnNlbGVjdC1pY29uey13ZWJraXQtdHJhbnNmb3JtOnRyYW5zbGF0ZTNkKDAsICAtOXB4LCAgMCkgcm90YXRlKDE4MGRlZyk7dHJhbnNmb3JtOnRyYW5zbGF0ZTNkKDAsICAtOXB4LCAgMCkgcm90YXRlKDE4MGRlZyl9Omhvc3QtY29udGV4dChpb24taXRlbS5pb24tZm9jdXNlZCkgLnNlbGVjdC1pY29uLDpob3N0LWNvbnRleHQoLml0ZW0taGFzLWZvY3VzKSAuc2VsZWN0LWljb257Y29sb3I6dmFyKC0taGlnaGxpZ2h0LWNvbG9yLWZvY3VzZWQpO29wYWNpdHk6MX1cIjtcblxubGV0IFNlbGVjdCA9IGNsYXNzIHtcbiAgY29uc3RydWN0b3IoaG9zdFJlZikge1xuICAgIHJlZ2lzdGVySW5zdGFuY2UodGhpcywgaG9zdFJlZik7XG4gICAgdGhpcy5pb25DaGFuZ2UgPSBjcmVhdGVFdmVudCh0aGlzLCBcImlvbkNoYW5nZVwiLCA3KTtcbiAgICB0aGlzLmlvbkNhbmNlbCA9IGNyZWF0ZUV2ZW50KHRoaXMsIFwiaW9uQ2FuY2VsXCIsIDcpO1xuICAgIHRoaXMuaW9uRm9jdXMgPSBjcmVhdGVFdmVudCh0aGlzLCBcImlvbkZvY3VzXCIsIDcpO1xuICAgIHRoaXMuaW9uQmx1ciA9IGNyZWF0ZUV2ZW50KHRoaXMsIFwiaW9uQmx1clwiLCA3KTtcbiAgICB0aGlzLmlvblN0eWxlID0gY3JlYXRlRXZlbnQodGhpcywgXCJpb25TdHlsZVwiLCA3KTtcbiAgICB0aGlzLmlucHV0SWQgPSBgaW9uLXNlbC0ke3NlbGVjdElkcysrfWA7XG4gICAgdGhpcy5kaWRJbml0ID0gZmFsc2U7XG4gICAgdGhpcy5pc0V4cGFuZGVkID0gZmFsc2U7XG4gICAgLyoqXG4gICAgICogSWYgYHRydWVgLCB0aGUgdXNlciBjYW5ub3QgaW50ZXJhY3Qgd2l0aCB0aGUgc2VsZWN0LlxuICAgICAqL1xuICAgIHRoaXMuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAvKipcbiAgICAgKiBUaGUgdGV4dCB0byBkaXNwbGF5IG9uIHRoZSBjYW5jZWwgYnV0dG9uLlxuICAgICAqL1xuICAgIHRoaXMuY2FuY2VsVGV4dCA9ICdDYW5jZWwnO1xuICAgIC8qKlxuICAgICAqIFRoZSB0ZXh0IHRvIGRpc3BsYXkgb24gdGhlIG9rIGJ1dHRvbi5cbiAgICAgKi9cbiAgICB0aGlzLm9rVGV4dCA9ICdPSyc7XG4gICAgLyoqXG4gICAgICogVGhlIG5hbWUgb2YgdGhlIGNvbnRyb2wsIHdoaWNoIGlzIHN1Ym1pdHRlZCB3aXRoIHRoZSBmb3JtIGRhdGEuXG4gICAgICovXG4gICAgdGhpcy5uYW1lID0gdGhpcy5pbnB1dElkO1xuICAgIC8qKlxuICAgICAqIElmIGB0cnVlYCwgdGhlIHNlbGVjdCBjYW4gYWNjZXB0IG11bHRpcGxlIHZhbHVlcy5cbiAgICAgKi9cbiAgICB0aGlzLm11bHRpcGxlID0gZmFsc2U7XG4gICAgLyoqXG4gICAgICogVGhlIGludGVyZmFjZSB0aGUgc2VsZWN0IHNob3VsZCB1c2U6IGBhY3Rpb24tc2hlZXRgLCBgcG9wb3ZlcmAgb3IgYGFsZXJ0YC5cbiAgICAgKi9cbiAgICB0aGlzLmludGVyZmFjZSA9ICdhbGVydCc7XG4gICAgLyoqXG4gICAgICogQW55IGFkZGl0aW9uYWwgb3B0aW9ucyB0aGF0IHRoZSBgYWxlcnRgLCBgYWN0aW9uLXNoZWV0YCBvciBgcG9wb3ZlcmAgaW50ZXJmYWNlXG4gICAgICogY2FuIHRha2UuIFNlZSB0aGUgW2lvbi1hbGVydCBkb2NzXSguLi9hbGVydCksIHRoZVxuICAgICAqIFtpb24tYWN0aW9uLXNoZWV0IGRvY3NdKC4uL2FjdGlvbi1zaGVldCkgYW5kIHRoZVxuICAgICAqIFtpb24tcG9wb3ZlciBkb2NzXSguLi9wb3BvdmVyKSBmb3IgdGhlXG4gICAgICogY3JlYXRlIG9wdGlvbnMgZm9yIGVhY2ggaW50ZXJmYWNlLlxuICAgICAqXG4gICAgICogTm90ZTogYGludGVyZmFjZU9wdGlvbnNgIHdpbGwgbm90IG92ZXJyaWRlIGBpbnB1dHNgIG9yIGBidXR0b25zYCB3aXRoIHRoZSBgYWxlcnRgIGludGVyZmFjZS5cbiAgICAgKi9cbiAgICB0aGlzLmludGVyZmFjZU9wdGlvbnMgPSB7fTtcbiAgICB0aGlzLm9uQ2xpY2sgPSAoZXYpID0+IHtcbiAgICAgIHRoaXMuc2V0Rm9jdXMoKTtcbiAgICAgIHRoaXMub3Blbihldik7XG4gICAgfTtcbiAgICB0aGlzLm9uRm9jdXMgPSAoKSA9PiB7XG4gICAgICB0aGlzLmlvbkZvY3VzLmVtaXQoKTtcbiAgICB9O1xuICAgIHRoaXMub25CbHVyID0gKCkgPT4ge1xuICAgICAgdGhpcy5pb25CbHVyLmVtaXQoKTtcbiAgICB9O1xuICB9XG4gIHN0eWxlQ2hhbmdlZCgpIHtcbiAgICB0aGlzLmVtaXRTdHlsZSgpO1xuICB9XG4gIHZhbHVlQ2hhbmdlZCgpIHtcbiAgICB0aGlzLmVtaXRTdHlsZSgpO1xuICAgIGlmICh0aGlzLmRpZEluaXQpIHtcbiAgICAgIHRoaXMuaW9uQ2hhbmdlLmVtaXQoe1xuICAgICAgICB2YWx1ZTogdGhpcy52YWx1ZSxcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICBhc3luYyBjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICB0aGlzLnVwZGF0ZU92ZXJsYXlPcHRpb25zKCk7XG4gICAgdGhpcy5lbWl0U3R5bGUoKTtcbiAgICB0aGlzLm11dGF0aW9uTyA9IHdhdGNoRm9yT3B0aW9ucyh0aGlzLmVsLCAnaW9uLXNlbGVjdC1vcHRpb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICB0aGlzLnVwZGF0ZU92ZXJsYXlPcHRpb25zKCk7XG4gICAgfSk7XG4gIH1cbiAgZGlzY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgaWYgKHRoaXMubXV0YXRpb25PKSB7XG4gICAgICB0aGlzLm11dGF0aW9uTy5kaXNjb25uZWN0KCk7XG4gICAgICB0aGlzLm11dGF0aW9uTyA9IHVuZGVmaW5lZDtcbiAgICB9XG4gIH1cbiAgY29tcG9uZW50RGlkTG9hZCgpIHtcbiAgICB0aGlzLmRpZEluaXQgPSB0cnVlO1xuICB9XG4gIC8qKlxuICAgKiBPcGVuIHRoZSBzZWxlY3Qgb3ZlcmxheS4gVGhlIG92ZXJsYXkgaXMgZWl0aGVyIGFuIGFsZXJ0LCBhY3Rpb24gc2hlZXQsIG9yIHBvcG92ZXIsXG4gICAqIGRlcGVuZGluZyBvbiB0aGUgYGludGVyZmFjZWAgcHJvcGVydHkgb24gdGhlIGBpb24tc2VsZWN0YC5cbiAgICpcbiAgICogQHBhcmFtIGV2ZW50IFRoZSB1c2VyIGludGVyZmFjZSBldmVudCB0aGF0IGNhbGxlZCB0aGUgb3Blbi5cbiAgICovXG4gIGFzeW5jIG9wZW4oZXZlbnQpIHtcbiAgICBpZiAodGhpcy5kaXNhYmxlZCB8fCB0aGlzLmlzRXhwYW5kZWQpIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGNvbnN0IG92ZXJsYXkgPSB0aGlzLm92ZXJsYXkgPSBhd2FpdCB0aGlzLmNyZWF0ZU92ZXJsYXkoZXZlbnQpO1xuICAgIHRoaXMuaXNFeHBhbmRlZCA9IHRydWU7XG4gICAgb3ZlcmxheS5vbkRpZERpc21pc3MoKS50aGVuKCgpID0+IHtcbiAgICAgIHRoaXMub3ZlcmxheSA9IHVuZGVmaW5lZDtcbiAgICAgIHRoaXMuaXNFeHBhbmRlZCA9IGZhbHNlO1xuICAgICAgdGhpcy5zZXRGb2N1cygpO1xuICAgIH0pO1xuICAgIGF3YWl0IG92ZXJsYXkucHJlc2VudCgpO1xuICAgIC8vIGZvY3VzIHNlbGVjdGVkIG9wdGlvbiBmb3IgcG9wb3ZlcnNcbiAgICBpZiAodGhpcy5pbnRlcmZhY2UgPT09ICdwb3BvdmVyJykge1xuICAgICAgbGV0IGluZGV4T2ZTZWxlY3RlZCA9IHRoaXMuY2hpbGRPcHRzLm1hcChvID0+IG8udmFsdWUpLmluZGV4T2YodGhpcy52YWx1ZSk7XG4gICAgICBpbmRleE9mU2VsZWN0ZWQgPSBpbmRleE9mU2VsZWN0ZWQgPiAtMSA/IGluZGV4T2ZTZWxlY3RlZCA6IDA7IC8vIGRlZmF1bHQgdG8gZmlyc3Qgb3B0aW9uIGlmIG5vdGhpbmcgc2VsZWN0ZWRcbiAgICAgIGNvbnN0IHNlbGVjdGVkRWwgPSBvdmVybGF5LnF1ZXJ5U2VsZWN0b3IoYC5zZWxlY3QtaW50ZXJmYWNlLW9wdGlvbjpudGgtY2hpbGQoJHtpbmRleE9mU2VsZWN0ZWQgKyAxfSlgKTtcbiAgICAgIGlmIChzZWxlY3RlZEVsKSB7XG4gICAgICAgIGZvY3VzRWxlbWVudChzZWxlY3RlZEVsKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG92ZXJsYXk7XG4gIH1cbiAgY3JlYXRlT3ZlcmxheShldikge1xuICAgIGxldCBzZWxlY3RJbnRlcmZhY2UgPSB0aGlzLmludGVyZmFjZTtcbiAgICBpZiAoc2VsZWN0SW50ZXJmYWNlID09PSAnYWN0aW9uLXNoZWV0JyAmJiB0aGlzLm11bHRpcGxlKSB7XG4gICAgICBjb25zb2xlLndhcm4oYFNlbGVjdCBpbnRlcmZhY2UgY2Fubm90IGJlIFwiJHtzZWxlY3RJbnRlcmZhY2V9XCIgd2l0aCBhIG11bHRpLXZhbHVlIHNlbGVjdC4gVXNpbmcgdGhlIFwiYWxlcnRcIiBpbnRlcmZhY2UgaW5zdGVhZC5gKTtcbiAgICAgIHNlbGVjdEludGVyZmFjZSA9ICdhbGVydCc7XG4gICAgfVxuICAgIGlmIChzZWxlY3RJbnRlcmZhY2UgPT09ICdwb3BvdmVyJyAmJiAhZXYpIHtcbiAgICAgIGNvbnNvbGUud2FybihgU2VsZWN0IGludGVyZmFjZSBjYW5ub3QgYmUgYSBcIiR7c2VsZWN0SW50ZXJmYWNlfVwiIHdpdGhvdXQgcGFzc2luZyBhbiBldmVudC4gVXNpbmcgdGhlIFwiYWxlcnRcIiBpbnRlcmZhY2UgaW5zdGVhZC5gKTtcbiAgICAgIHNlbGVjdEludGVyZmFjZSA9ICdhbGVydCc7XG4gICAgfVxuICAgIGlmIChzZWxlY3RJbnRlcmZhY2UgPT09ICdhY3Rpb24tc2hlZXQnKSB7XG4gICAgICByZXR1cm4gdGhpcy5vcGVuQWN0aW9uU2hlZXQoKTtcbiAgICB9XG4gICAgaWYgKHNlbGVjdEludGVyZmFjZSA9PT0gJ3BvcG92ZXInKSB7XG4gICAgICByZXR1cm4gdGhpcy5vcGVuUG9wb3Zlcihldik7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLm9wZW5BbGVydCgpO1xuICB9XG4gIHVwZGF0ZU92ZXJsYXlPcHRpb25zKCkge1xuICAgIGNvbnN0IG92ZXJsYXkgPSB0aGlzLm92ZXJsYXk7XG4gICAgaWYgKCFvdmVybGF5KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGNoaWxkT3B0cyA9IHRoaXMuY2hpbGRPcHRzO1xuICAgIGNvbnN0IHZhbHVlID0gdGhpcy52YWx1ZTtcbiAgICBzd2l0Y2ggKHRoaXMuaW50ZXJmYWNlKSB7XG4gICAgICBjYXNlICdhY3Rpb24tc2hlZXQnOlxuICAgICAgICBvdmVybGF5LmJ1dHRvbnMgPSB0aGlzLmNyZWF0ZUFjdGlvblNoZWV0QnV0dG9ucyhjaGlsZE9wdHMsIHZhbHVlKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdwb3BvdmVyJzpcbiAgICAgICAgY29uc3QgcG9wb3ZlciA9IG92ZXJsYXkucXVlcnlTZWxlY3RvcignaW9uLXNlbGVjdC1wb3BvdmVyJyk7XG4gICAgICAgIGlmIChwb3BvdmVyKSB7XG4gICAgICAgICAgcG9wb3Zlci5vcHRpb25zID0gdGhpcy5jcmVhdGVQb3BvdmVyT3B0aW9ucyhjaGlsZE9wdHMsIHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2FsZXJ0JzpcbiAgICAgICAgY29uc3QgaW5wdXRUeXBlID0gKHRoaXMubXVsdGlwbGUgPyAnY2hlY2tib3gnIDogJ3JhZGlvJyk7XG4gICAgICAgIG92ZXJsYXkuaW5wdXRzID0gdGhpcy5jcmVhdGVBbGVydElucHV0cyhjaGlsZE9wdHMsIGlucHV0VHlwZSwgdmFsdWUpO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gIH1cbiAgY3JlYXRlQWN0aW9uU2hlZXRCdXR0b25zKGRhdGEsIHNlbGVjdFZhbHVlKSB7XG4gICAgY29uc3QgYWN0aW9uU2hlZXRCdXR0b25zID0gZGF0YS5tYXAob3B0aW9uID0+IHtcbiAgICAgIGNvbnN0IHZhbHVlID0gZ2V0T3B0aW9uVmFsdWUob3B0aW9uKTtcbiAgICAgIC8vIFJlbW92ZSBoeWRyYXRlZCBiZWZvcmUgY29weWluZyBvdmVyIGNsYXNzZXNcbiAgICAgIGNvbnN0IGNvcHlDbGFzc2VzID0gQXJyYXkuZnJvbShvcHRpb24uY2xhc3NMaXN0KS5maWx0ZXIoY2xzID0+IGNscyAhPT0gJ2h5ZHJhdGVkJykuam9pbignICcpO1xuICAgICAgY29uc3Qgb3B0Q2xhc3MgPSBgJHtPUFRJT05fQ0xBU1N9ICR7Y29weUNsYXNzZXN9YDtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHJvbGU6IChpc09wdGlvblNlbGVjdGVkKHZhbHVlLCBzZWxlY3RWYWx1ZSwgdGhpcy5jb21wYXJlV2l0aCkgPyAnc2VsZWN0ZWQnIDogJycpLFxuICAgICAgICB0ZXh0OiBvcHRpb24udGV4dENvbnRlbnQsXG4gICAgICAgIGNzc0NsYXNzOiBvcHRDbGFzcyxcbiAgICAgICAgaGFuZGxlcjogKCkgPT4ge1xuICAgICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9KTtcbiAgICAvLyBBZGQgXCJjYW5jZWxcIiBidXR0b25cbiAgICBhY3Rpb25TaGVldEJ1dHRvbnMucHVzaCh7XG4gICAgICB0ZXh0OiB0aGlzLmNhbmNlbFRleHQsXG4gICAgICByb2xlOiAnY2FuY2VsJyxcbiAgICAgIGhhbmRsZXI6ICgpID0+IHtcbiAgICAgICAgdGhpcy5pb25DYW5jZWwuZW1pdCgpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBhY3Rpb25TaGVldEJ1dHRvbnM7XG4gIH1cbiAgY3JlYXRlQWxlcnRJbnB1dHMoZGF0YSwgaW5wdXRUeXBlLCBzZWxlY3RWYWx1ZSkge1xuICAgIGNvbnN0IGFsZXJ0SW5wdXRzID0gZGF0YS5tYXAob3B0aW9uID0+IHtcbiAgICAgIGNvbnN0IHZhbHVlID0gZ2V0T3B0aW9uVmFsdWUob3B0aW9uKTtcbiAgICAgIC8vIFJlbW92ZSBoeWRyYXRlZCBiZWZvcmUgY29weWluZyBvdmVyIGNsYXNzZXNcbiAgICAgIGNvbnN0IGNvcHlDbGFzc2VzID0gQXJyYXkuZnJvbShvcHRpb24uY2xhc3NMaXN0KS5maWx0ZXIoY2xzID0+IGNscyAhPT0gJ2h5ZHJhdGVkJykuam9pbignICcpO1xuICAgICAgY29uc3Qgb3B0Q2xhc3MgPSBgJHtPUFRJT05fQ0xBU1N9ICR7Y29weUNsYXNzZXN9YDtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6IGlucHV0VHlwZSxcbiAgICAgICAgY3NzQ2xhc3M6IG9wdENsYXNzLFxuICAgICAgICBsYWJlbDogb3B0aW9uLnRleHRDb250ZW50IHx8ICcnLFxuICAgICAgICB2YWx1ZSxcbiAgICAgICAgY2hlY2tlZDogaXNPcHRpb25TZWxlY3RlZCh2YWx1ZSwgc2VsZWN0VmFsdWUsIHRoaXMuY29tcGFyZVdpdGgpLFxuICAgICAgICBkaXNhYmxlZDogb3B0aW9uLmRpc2FibGVkXG4gICAgICB9O1xuICAgIH0pO1xuICAgIHJldHVybiBhbGVydElucHV0cztcbiAgfVxuICBjcmVhdGVQb3BvdmVyT3B0aW9ucyhkYXRhLCBzZWxlY3RWYWx1ZSkge1xuICAgIGNvbnN0IHBvcG92ZXJPcHRpb25zID0gZGF0YS5tYXAob3B0aW9uID0+IHtcbiAgICAgIGNvbnN0IHZhbHVlID0gZ2V0T3B0aW9uVmFsdWUob3B0aW9uKTtcbiAgICAgIC8vIFJlbW92ZSBoeWRyYXRlZCBiZWZvcmUgY29weWluZyBvdmVyIGNsYXNzZXNcbiAgICAgIGNvbnN0IGNvcHlDbGFzc2VzID0gQXJyYXkuZnJvbShvcHRpb24uY2xhc3NMaXN0KS5maWx0ZXIoY2xzID0+IGNscyAhPT0gJ2h5ZHJhdGVkJykuam9pbignICcpO1xuICAgICAgY29uc3Qgb3B0Q2xhc3MgPSBgJHtPUFRJT05fQ0xBU1N9ICR7Y29weUNsYXNzZXN9YDtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHRleHQ6IG9wdGlvbi50ZXh0Q29udGVudCB8fCAnJyxcbiAgICAgICAgY3NzQ2xhc3M6IG9wdENsYXNzLFxuICAgICAgICB2YWx1ZSxcbiAgICAgICAgY2hlY2tlZDogaXNPcHRpb25TZWxlY3RlZCh2YWx1ZSwgc2VsZWN0VmFsdWUsIHRoaXMuY29tcGFyZVdpdGgpLFxuICAgICAgICBkaXNhYmxlZDogb3B0aW9uLmRpc2FibGVkLFxuICAgICAgICBoYW5kbGVyOiAoc2VsZWN0ZWQpID0+IHtcbiAgICAgICAgICB0aGlzLnZhbHVlID0gc2VsZWN0ZWQ7XG4gICAgICAgICAgaWYgKCF0aGlzLm11bHRpcGxlKSB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9O1xuICAgIH0pO1xuICAgIHJldHVybiBwb3BvdmVyT3B0aW9ucztcbiAgfVxuICBhc3luYyBvcGVuUG9wb3Zlcihldikge1xuICAgIGNvbnN0IGludGVyZmFjZU9wdGlvbnMgPSB0aGlzLmludGVyZmFjZU9wdGlvbnM7XG4gICAgY29uc3QgbW9kZSA9IGdldElvbk1vZGUodGhpcyk7XG4gICAgY29uc3Qgc2hvd0JhY2tkcm9wID0gbW9kZSA9PT0gJ21kJyA/IGZhbHNlIDogdHJ1ZTtcbiAgICBjb25zdCBtdWx0aXBsZSA9IHRoaXMubXVsdGlwbGU7XG4gICAgY29uc3QgdmFsdWUgPSB0aGlzLnZhbHVlO1xuICAgIGxldCBldmVudCA9IGV2O1xuICAgIGxldCBzaXplID0gJ2F1dG8nO1xuICAgIGNvbnN0IGl0ZW0gPSB0aGlzLmVsLmNsb3Nlc3QoJ2lvbi1pdGVtJyk7XG4gICAgLy8gSWYgdGhlIHNlbGVjdCBpcyBpbnNpZGUgb2YgYW4gaXRlbSBjb250YWluaW5nIGEgZmxvYXRpbmdcbiAgICAvLyBvciBzdGFja2VkIGxhYmVsIHRoZW4gdGhlIHBvcG92ZXIgc2hvdWxkIHRha2UgdXAgdGhlXG4gICAgLy8gZnVsbCB3aWR0aCBvZiB0aGUgaXRlbSB3aGVuIGl0IHByZXNlbnRzXG4gICAgaWYgKGl0ZW0gJiYgKGl0ZW0uY2xhc3NMaXN0LmNvbnRhaW5zKCdpdGVtLWxhYmVsLWZsb2F0aW5nJykgfHwgaXRlbS5jbGFzc0xpc3QuY29udGFpbnMoJ2l0ZW0tbGFiZWwtc3RhY2tlZCcpKSkge1xuICAgICAgZXZlbnQgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGV2KSwgeyBkZXRhaWw6IHtcbiAgICAgICAgICBpb25TaGFkb3dUYXJnZXQ6IGl0ZW1cbiAgICAgICAgfSB9KTtcbiAgICAgIHNpemUgPSAnY292ZXInO1xuICAgIH1cbiAgICBjb25zdCBwb3BvdmVyT3B0cyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7IG1vZGUsXG4gICAgICBldmVudCwgYWxpZ25tZW50OiAnY2VudGVyJywgc2l6ZSxcbiAgICAgIHNob3dCYWNrZHJvcCB9LCBpbnRlcmZhY2VPcHRpb25zKSwgeyBjb21wb25lbnQ6ICdpb24tc2VsZWN0LXBvcG92ZXInLCBjc3NDbGFzczogWydzZWxlY3QtcG9wb3ZlcicsIGludGVyZmFjZU9wdGlvbnMuY3NzQ2xhc3NdLCBjb21wb25lbnRQcm9wczoge1xuICAgICAgICBoZWFkZXI6IGludGVyZmFjZU9wdGlvbnMuaGVhZGVyLFxuICAgICAgICBzdWJIZWFkZXI6IGludGVyZmFjZU9wdGlvbnMuc3ViSGVhZGVyLFxuICAgICAgICBtZXNzYWdlOiBpbnRlcmZhY2VPcHRpb25zLm1lc3NhZ2UsXG4gICAgICAgIG11bHRpcGxlLFxuICAgICAgICB2YWx1ZSxcbiAgICAgICAgb3B0aW9uczogdGhpcy5jcmVhdGVQb3BvdmVyT3B0aW9ucyh0aGlzLmNoaWxkT3B0cywgdmFsdWUpXG4gICAgICB9IH0pO1xuICAgIHJldHVybiBwb3BvdmVyQ29udHJvbGxlci5jcmVhdGUocG9wb3Zlck9wdHMpO1xuICB9XG4gIGFzeW5jIG9wZW5BY3Rpb25TaGVldCgpIHtcbiAgICBjb25zdCBtb2RlID0gZ2V0SW9uTW9kZSh0aGlzKTtcbiAgICBjb25zdCBpbnRlcmZhY2VPcHRpb25zID0gdGhpcy5pbnRlcmZhY2VPcHRpb25zO1xuICAgIGNvbnN0IGFjdGlvblNoZWV0T3B0cyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7IG1vZGUgfSwgaW50ZXJmYWNlT3B0aW9ucyksIHsgYnV0dG9uczogdGhpcy5jcmVhdGVBY3Rpb25TaGVldEJ1dHRvbnModGhpcy5jaGlsZE9wdHMsIHRoaXMudmFsdWUpLCBjc3NDbGFzczogWydzZWxlY3QtYWN0aW9uLXNoZWV0JywgaW50ZXJmYWNlT3B0aW9ucy5jc3NDbGFzc10gfSk7XG4gICAgcmV0dXJuIGFjdGlvblNoZWV0Q29udHJvbGxlci5jcmVhdGUoYWN0aW9uU2hlZXRPcHRzKTtcbiAgfVxuICBhc3luYyBvcGVuQWxlcnQoKSB7XG4gICAgY29uc3QgbGFiZWwgPSB0aGlzLmdldExhYmVsKCk7XG4gICAgY29uc3QgbGFiZWxUZXh0ID0gKGxhYmVsKSA/IGxhYmVsLnRleHRDb250ZW50IDogbnVsbDtcbiAgICBjb25zdCBpbnRlcmZhY2VPcHRpb25zID0gdGhpcy5pbnRlcmZhY2VPcHRpb25zO1xuICAgIGNvbnN0IGlucHV0VHlwZSA9ICh0aGlzLm11bHRpcGxlID8gJ2NoZWNrYm94JyA6ICdyYWRpbycpO1xuICAgIGNvbnN0IG1vZGUgPSBnZXRJb25Nb2RlKHRoaXMpO1xuICAgIGNvbnN0IGFsZXJ0T3B0cyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7IG1vZGUgfSwgaW50ZXJmYWNlT3B0aW9ucyksIHsgaGVhZGVyOiBpbnRlcmZhY2VPcHRpb25zLmhlYWRlciA/IGludGVyZmFjZU9wdGlvbnMuaGVhZGVyIDogbGFiZWxUZXh0LCBpbnB1dHM6IHRoaXMuY3JlYXRlQWxlcnRJbnB1dHModGhpcy5jaGlsZE9wdHMsIGlucHV0VHlwZSwgdGhpcy52YWx1ZSksIGJ1dHRvbnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIHRleHQ6IHRoaXMuY2FuY2VsVGV4dCxcbiAgICAgICAgICByb2xlOiAnY2FuY2VsJyxcbiAgICAgICAgICBoYW5kbGVyOiAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmlvbkNhbmNlbC5lbWl0KCk7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgdGV4dDogdGhpcy5va1RleHQsXG4gICAgICAgICAgaGFuZGxlcjogKHNlbGVjdGVkVmFsdWVzKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnZhbHVlID0gc2VsZWN0ZWRWYWx1ZXM7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICBdLCBjc3NDbGFzczogWydzZWxlY3QtYWxlcnQnLCBpbnRlcmZhY2VPcHRpb25zLmNzc0NsYXNzLFxuICAgICAgICAodGhpcy5tdWx0aXBsZSA/ICdtdWx0aXBsZS1zZWxlY3QtYWxlcnQnIDogJ3NpbmdsZS1zZWxlY3QtYWxlcnQnKV0gfSk7XG4gICAgcmV0dXJuIGFsZXJ0Q29udHJvbGxlci5jcmVhdGUoYWxlcnRPcHRzKTtcbiAgfVxuICAvKipcbiAgICogQ2xvc2UgdGhlIHNlbGVjdCBpbnRlcmZhY2UuXG4gICAqL1xuICBjbG9zZSgpIHtcbiAgICAvLyBUT0RPIGNoZWNrICF0aGlzLm92ZXJsYXkgfHwgIXRoaXMuaXNGb2N1cygpXG4gICAgaWYgKCF0aGlzLm92ZXJsYXkpIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoZmFsc2UpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5vdmVybGF5LmRpc21pc3MoKTtcbiAgfVxuICBnZXRMYWJlbCgpIHtcbiAgICByZXR1cm4gZmluZEl0ZW1MYWJlbCh0aGlzLmVsKTtcbiAgfVxuICBoYXNWYWx1ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRUZXh0KCkgIT09ICcnO1xuICB9XG4gIGdldCBjaGlsZE9wdHMoKSB7XG4gICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy5lbC5xdWVyeVNlbGVjdG9yQWxsKCdpb24tc2VsZWN0LW9wdGlvbicpKTtcbiAgfVxuICBnZXRUZXh0KCkge1xuICAgIGNvbnN0IHNlbGVjdGVkVGV4dCA9IHRoaXMuc2VsZWN0ZWRUZXh0O1xuICAgIGlmIChzZWxlY3RlZFRleHQgIT0gbnVsbCAmJiBzZWxlY3RlZFRleHQgIT09ICcnKSB7XG4gICAgICByZXR1cm4gc2VsZWN0ZWRUZXh0O1xuICAgIH1cbiAgICByZXR1cm4gZ2VuZXJhdGVUZXh0KHRoaXMuY2hpbGRPcHRzLCB0aGlzLnZhbHVlLCB0aGlzLmNvbXBhcmVXaXRoKTtcbiAgfVxuICBzZXRGb2N1cygpIHtcbiAgICBpZiAodGhpcy5mb2N1c0VsKSB7XG4gICAgICB0aGlzLmZvY3VzRWwuZm9jdXMoKTtcbiAgICB9XG4gIH1cbiAgZW1pdFN0eWxlKCkge1xuICAgIHRoaXMuaW9uU3R5bGUuZW1pdCh7XG4gICAgICAnaW50ZXJhY3RpdmUnOiB0cnVlLFxuICAgICAgJ2ludGVyYWN0aXZlLWRpc2FibGVkJzogdGhpcy5kaXNhYmxlZCxcbiAgICAgICdzZWxlY3QnOiB0cnVlLFxuICAgICAgJ3NlbGVjdC1kaXNhYmxlZCc6IHRoaXMuZGlzYWJsZWQsXG4gICAgICAnaGFzLXBsYWNlaG9sZGVyJzogdGhpcy5wbGFjZWhvbGRlciAhPT0gdW5kZWZpbmVkLFxuICAgICAgJ2hhcy12YWx1ZSc6IHRoaXMuaGFzVmFsdWUoKSxcbiAgICAgICdoYXMtZm9jdXMnOiB0aGlzLmlzRXhwYW5kZWQsXG4gICAgfSk7XG4gIH1cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IHsgZGlzYWJsZWQsIGVsLCBpbnB1dElkLCBpc0V4cGFuZGVkLCBuYW1lLCBwbGFjZWhvbGRlciwgdmFsdWUgfSA9IHRoaXM7XG4gICAgY29uc3QgbW9kZSA9IGdldElvbk1vZGUodGhpcyk7XG4gICAgY29uc3QgeyBsYWJlbFRleHQsIGxhYmVsSWQgfSA9IGdldEFyaWFMYWJlbChlbCwgaW5wdXRJZCk7XG4gICAgcmVuZGVySGlkZGVuSW5wdXQodHJ1ZSwgZWwsIG5hbWUsIHBhcnNlVmFsdWUodmFsdWUpLCBkaXNhYmxlZCk7XG4gICAgY29uc3QgZGlzcGxheVZhbHVlID0gdGhpcy5nZXRUZXh0KCk7XG4gICAgbGV0IGFkZFBsYWNlaG9sZGVyQ2xhc3MgPSBmYWxzZTtcbiAgICBsZXQgc2VsZWN0VGV4dCA9IGRpc3BsYXlWYWx1ZTtcbiAgICBpZiAoc2VsZWN0VGV4dCA9PT0gJycgJiYgcGxhY2Vob2xkZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgc2VsZWN0VGV4dCA9IHBsYWNlaG9sZGVyO1xuICAgICAgYWRkUGxhY2Vob2xkZXJDbGFzcyA9IHRydWU7XG4gICAgfVxuICAgIGNvbnN0IHNlbGVjdFRleHRDbGFzc2VzID0ge1xuICAgICAgJ3NlbGVjdC10ZXh0JzogdHJ1ZSxcbiAgICAgICdzZWxlY3QtcGxhY2Vob2xkZXInOiBhZGRQbGFjZWhvbGRlckNsYXNzXG4gICAgfTtcbiAgICBjb25zdCB0ZXh0UGFydCA9IGFkZFBsYWNlaG9sZGVyQ2xhc3MgPyAncGxhY2Vob2xkZXInIDogJ3RleHQnO1xuICAgIC8vIElmIHRoZXJlIGlzIGEgbGFiZWwgdGhlbiB3ZSBuZWVkIHRvIGNvbmNhdGVuYXRlIGl0IHdpdGggdGhlXG4gICAgLy8gY3VycmVudCB2YWx1ZSAob3IgcGxhY2Vob2xkZXIpIGFuZCBhIGNvbW1hIHNvIGl0IHNlcGFyYXRlc1xuICAgIC8vIG5pY2VseSB3aGVuIHRoZSBzY3JlZW4gcmVhZGVyIGFubm91bmNlcyBpdCwgb3RoZXJ3aXNlIGp1c3RcbiAgICAvLyBhbm5vdW5jZSB0aGUgdmFsdWUgLyBwbGFjZWhvbGRlclxuICAgIGNvbnN0IGRpc3BsYXlMYWJlbCA9IGxhYmVsVGV4dCAhPT0gdW5kZWZpbmVkXG4gICAgICA/IChzZWxlY3RUZXh0ICE9PSAnJyA/IGAke3NlbGVjdFRleHR9LCAke2xhYmVsVGV4dH1gIDogbGFiZWxUZXh0KVxuICAgICAgOiBzZWxlY3RUZXh0O1xuICAgIHJldHVybiAoaChIb3N0LCB7IG9uQ2xpY2s6IHRoaXMub25DbGljaywgcm9sZTogXCJidXR0b25cIiwgXCJhcmlhLWhhc3BvcHVwXCI6IFwibGlzdGJveFwiLCBcImFyaWEtZGlzYWJsZWRcIjogZGlzYWJsZWQgPyAndHJ1ZScgOiBudWxsLCBcImFyaWEtbGFiZWxcIjogZGlzcGxheUxhYmVsLCBjbGFzczoge1xuICAgICAgICBbbW9kZV06IHRydWUsXG4gICAgICAgICdpbi1pdGVtJzogaG9zdENvbnRleHQoJ2lvbi1pdGVtJywgZWwpLFxuICAgICAgICAnc2VsZWN0LWRpc2FibGVkJzogZGlzYWJsZWQsXG4gICAgICAgICdzZWxlY3QtZXhwYW5kZWQnOiBpc0V4cGFuZGVkXG4gICAgICB9IH0sIGgoXCJkaXZcIiwgeyBcImFyaWEtaGlkZGVuXCI6IFwidHJ1ZVwiLCBjbGFzczogc2VsZWN0VGV4dENsYXNzZXMsIHBhcnQ6IHRleHRQYXJ0IH0sIHNlbGVjdFRleHQpLCBoKFwiZGl2XCIsIHsgY2xhc3M6IFwic2VsZWN0LWljb25cIiwgcm9sZTogXCJwcmVzZW50YXRpb25cIiwgcGFydDogXCJpY29uXCIgfSwgaChcImRpdlwiLCB7IGNsYXNzOiBcInNlbGVjdC1pY29uLWlubmVyXCIgfSkpLCBoKFwibGFiZWxcIiwgeyBpZDogbGFiZWxJZCB9LCBkaXNwbGF5TGFiZWwpLCBoKFwiYnV0dG9uXCIsIHsgdHlwZTogXCJidXR0b25cIiwgZGlzYWJsZWQ6IGRpc2FibGVkLCBpZDogaW5wdXRJZCwgXCJhcmlhLWxhYmVsbGVkYnlcIjogbGFiZWxJZCwgXCJhcmlhLWhhc3BvcHVwXCI6IFwibGlzdGJveFwiLCBcImFyaWEtZXhwYW5kZWRcIjogYCR7aXNFeHBhbmRlZH1gLCBvbkZvY3VzOiB0aGlzLm9uRm9jdXMsIG9uQmx1cjogdGhpcy5vbkJsdXIsIHJlZjogKGZvY3VzRWwgPT4gdGhpcy5mb2N1c0VsID0gZm9jdXNFbCkgfSkpKTtcbiAgfVxuICBnZXQgZWwoKSB7IHJldHVybiBnZXRFbGVtZW50KHRoaXMpOyB9XG4gIHN0YXRpYyBnZXQgd2F0Y2hlcnMoKSB7IHJldHVybiB7XG4gICAgXCJkaXNhYmxlZFwiOiBbXCJzdHlsZUNoYW5nZWRcIl0sXG4gICAgXCJwbGFjZWhvbGRlclwiOiBbXCJzdHlsZUNoYW5nZWRcIl0sXG4gICAgXCJpc0V4cGFuZGVkXCI6IFtcInN0eWxlQ2hhbmdlZFwiXSxcbiAgICBcInZhbHVlXCI6IFtcInZhbHVlQ2hhbmdlZFwiXVxuICB9OyB9XG59O1xuY29uc3QgaXNPcHRpb25TZWxlY3RlZCA9IChjdXJyZW50VmFsdWUsIGNvbXBhcmVWYWx1ZSwgY29tcGFyZVdpdGgpID0+IHtcbiAgaWYgKGN1cnJlbnRWYWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGlmIChBcnJheS5pc0FycmF5KGN1cnJlbnRWYWx1ZSkpIHtcbiAgICByZXR1cm4gY3VycmVudFZhbHVlLnNvbWUodmFsID0+IGNvbXBhcmVPcHRpb25zKHZhbCwgY29tcGFyZVZhbHVlLCBjb21wYXJlV2l0aCkpO1xuICB9XG4gIGVsc2Uge1xuICAgIHJldHVybiBjb21wYXJlT3B0aW9ucyhjdXJyZW50VmFsdWUsIGNvbXBhcmVWYWx1ZSwgY29tcGFyZVdpdGgpO1xuICB9XG59O1xuY29uc3QgZ2V0T3B0aW9uVmFsdWUgPSAoZWwpID0+IHtcbiAgY29uc3QgdmFsdWUgPSBlbC52YWx1ZTtcbiAgcmV0dXJuICh2YWx1ZSA9PT0gdW5kZWZpbmVkKVxuICAgID8gZWwudGV4dENvbnRlbnQgfHwgJydcbiAgICA6IHZhbHVlO1xufTtcbmNvbnN0IHBhcnNlVmFsdWUgPSAodmFsdWUpID0+IHtcbiAgaWYgKHZhbHVlID09IG51bGwpIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG4gIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgIHJldHVybiB2YWx1ZS5qb2luKCcsJyk7XG4gIH1cbiAgcmV0dXJuIHZhbHVlLnRvU3RyaW5nKCk7XG59O1xuY29uc3QgY29tcGFyZU9wdGlvbnMgPSAoY3VycmVudFZhbHVlLCBjb21wYXJlVmFsdWUsIGNvbXBhcmVXaXRoKSA9PiB7XG4gIGlmICh0eXBlb2YgY29tcGFyZVdpdGggPT09ICdmdW5jdGlvbicpIHtcbiAgICByZXR1cm4gY29tcGFyZVdpdGgoY3VycmVudFZhbHVlLCBjb21wYXJlVmFsdWUpO1xuICB9XG4gIGVsc2UgaWYgKHR5cGVvZiBjb21wYXJlV2l0aCA9PT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gY3VycmVudFZhbHVlW2NvbXBhcmVXaXRoXSA9PT0gY29tcGFyZVZhbHVlW2NvbXBhcmVXaXRoXTtcbiAgfVxuICBlbHNlIHtcbiAgICByZXR1cm4gQXJyYXkuaXNBcnJheShjb21wYXJlVmFsdWUpID8gY29tcGFyZVZhbHVlLmluY2x1ZGVzKGN1cnJlbnRWYWx1ZSkgOiBjdXJyZW50VmFsdWUgPT09IGNvbXBhcmVWYWx1ZTtcbiAgfVxufTtcbmNvbnN0IGdlbmVyYXRlVGV4dCA9IChvcHRzLCB2YWx1ZSwgY29tcGFyZVdpdGgpID0+IHtcbiAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gJyc7XG4gIH1cbiAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgcmV0dXJuIHZhbHVlXG4gICAgICAubWFwKHYgPT4gdGV4dEZvclZhbHVlKG9wdHMsIHYsIGNvbXBhcmVXaXRoKSlcbiAgICAgIC5maWx0ZXIob3B0ID0+IG9wdCAhPT0gbnVsbClcbiAgICAgIC5qb2luKCcsICcpO1xuICB9XG4gIGVsc2Uge1xuICAgIHJldHVybiB0ZXh0Rm9yVmFsdWUob3B0cywgdmFsdWUsIGNvbXBhcmVXaXRoKSB8fCAnJztcbiAgfVxufTtcbmNvbnN0IHRleHRGb3JWYWx1ZSA9IChvcHRzLCB2YWx1ZSwgY29tcGFyZVdpdGgpID0+IHtcbiAgY29uc3Qgc2VsZWN0T3B0ID0gb3B0cy5maW5kKG9wdCA9PiB7XG4gICAgcmV0dXJuIGNvbXBhcmVPcHRpb25zKGdldE9wdGlvblZhbHVlKG9wdCksIHZhbHVlLCBjb21wYXJlV2l0aCk7XG4gIH0pO1xuICByZXR1cm4gc2VsZWN0T3B0XG4gICAgPyBzZWxlY3RPcHQudGV4dENvbnRlbnRcbiAgICA6IG51bGw7XG59O1xubGV0IHNlbGVjdElkcyA9IDA7XG5jb25zdCBPUFRJT05fQ0xBU1MgPSAnc2VsZWN0LWludGVyZmFjZS1vcHRpb24nO1xuU2VsZWN0LnN0eWxlID0ge1xuICBpb3M6IHNlbGVjdElvc0NzcyxcbiAgbWQ6IHNlbGVjdE1kQ3NzXG59O1xuXG5jb25zdCBzZWxlY3RPcHRpb25Dc3MgPSBcIjpob3N0e2Rpc3BsYXk6bm9uZX1cIjtcblxubGV0IFNlbGVjdE9wdGlvbiA9IGNsYXNzIHtcbiAgY29uc3RydWN0b3IoaG9zdFJlZikge1xuICAgIHJlZ2lzdGVySW5zdGFuY2UodGhpcywgaG9zdFJlZik7XG4gICAgdGhpcy5pbnB1dElkID0gYGlvbi1zZWxvcHQtJHtzZWxlY3RPcHRpb25JZHMrK31gO1xuICAgIC8qKlxuICAgICAqIElmIGB0cnVlYCwgdGhlIHVzZXIgY2Fubm90IGludGVyYWN0IHdpdGggdGhlIHNlbGVjdCBvcHRpb24uIFRoaXMgcHJvcGVydHkgZG9lcyBub3QgYXBwbHkgd2hlbiBgaW50ZXJmYWNlPVwiYWN0aW9uLXNoZWV0XCJgIGFzIGBpb24tYWN0aW9uLXNoZWV0YCBkb2VzIG5vdCBhbGxvdyBmb3IgZGlzYWJsZWQgYnV0dG9ucy5cbiAgICAgKi9cbiAgICB0aGlzLmRpc2FibGVkID0gZmFsc2U7XG4gIH1cbiAgcmVuZGVyKCkge1xuICAgIHJldHVybiAoaChIb3N0LCB7IHJvbGU6IFwib3B0aW9uXCIsIGlkOiB0aGlzLmlucHV0SWQsIGNsYXNzOiBnZXRJb25Nb2RlKHRoaXMpIH0pKTtcbiAgfVxuICBnZXQgZWwoKSB7IHJldHVybiBnZXRFbGVtZW50KHRoaXMpOyB9XG59O1xubGV0IHNlbGVjdE9wdGlvbklkcyA9IDA7XG5TZWxlY3RPcHRpb24uc3R5bGUgPSBzZWxlY3RPcHRpb25Dc3M7XG5cbmNvbnN0IHNlbGVjdFBvcG92ZXJJb3NDc3MgPSBcIi5zYy1pb24tc2VsZWN0LXBvcG92ZXItaW9zLWggaW9uLWxpc3Quc2MtaW9uLXNlbGVjdC1wb3BvdmVyLWlvc3ttYXJnaW4tbGVmdDowO21hcmdpbi1yaWdodDowO21hcmdpbi10b3A6MDttYXJnaW4tYm90dG9tOjB9aW9uLWxpc3QtaGVhZGVyLnNjLWlvbi1zZWxlY3QtcG9wb3Zlci1pb3MsaW9uLWxhYmVsLnNjLWlvbi1zZWxlY3QtcG9wb3Zlci1pb3N7bWFyZ2luLWxlZnQ6MDttYXJnaW4tcmlnaHQ6MDttYXJnaW4tdG9wOjA7bWFyZ2luLWJvdHRvbTowfVwiO1xuXG5jb25zdCBzZWxlY3RQb3BvdmVyTWRDc3MgPSBcIi5zYy1pb24tc2VsZWN0LXBvcG92ZXItbWQtaCBpb24tbGlzdC5zYy1pb24tc2VsZWN0LXBvcG92ZXItbWR7bWFyZ2luLWxlZnQ6MDttYXJnaW4tcmlnaHQ6MDttYXJnaW4tdG9wOjA7bWFyZ2luLWJvdHRvbTowfWlvbi1saXN0LWhlYWRlci5zYy1pb24tc2VsZWN0LXBvcG92ZXItbWQsaW9uLWxhYmVsLnNjLWlvbi1zZWxlY3QtcG9wb3Zlci1tZHttYXJnaW4tbGVmdDowO21hcmdpbi1yaWdodDowO21hcmdpbi10b3A6MDttYXJnaW4tYm90dG9tOjB9aW9uLWxpc3Quc2MtaW9uLXNlbGVjdC1wb3BvdmVyLW1kIGlvbi1yYWRpby5zYy1pb24tc2VsZWN0LXBvcG92ZXItbWR7b3BhY2l0eTowfWlvbi1pdGVtLnNjLWlvbi1zZWxlY3QtcG9wb3Zlci1tZHstLWlubmVyLWJvcmRlci13aWR0aDowfS5pdGVtLXJhZGlvLWNoZWNrZWQuc2MtaW9uLXNlbGVjdC1wb3BvdmVyLW1key0tYmFja2dyb3VuZDpyZ2JhKHZhcigtLWlvbi1jb2xvci1wcmltYXJ5LXJnYiwgNTYsIDEyOCwgMjU1KSwgMC4wOCk7LS1iYWNrZ3JvdW5kLWZvY3VzZWQ6dmFyKC0taW9uLWNvbG9yLXByaW1hcnksICMzODgwZmYpOy0tYmFja2dyb3VuZC1mb2N1c2VkLW9wYWNpdHk6MC4yOy0tYmFja2dyb3VuZC1ob3Zlcjp2YXIoLS1pb24tY29sb3ItcHJpbWFyeSwgIzM4ODBmZik7LS1iYWNrZ3JvdW5kLWhvdmVyLW9wYWNpdHk6MC4xMn0uaXRlbS1jaGVja2JveC1jaGVja2VkLnNjLWlvbi1zZWxlY3QtcG9wb3Zlci1tZHstLWJhY2tncm91bmQtYWN0aXZhdGVkOnZhcigtLWlvbi1pdGVtLWNvbG9yLCB2YXIoLS1pb24tdGV4dC1jb2xvciwgIzAwMCkpOy0tYmFja2dyb3VuZC1mb2N1c2VkOnZhcigtLWlvbi1pdGVtLWNvbG9yLCB2YXIoLS1pb24tdGV4dC1jb2xvciwgIzAwMCkpOy0tYmFja2dyb3VuZC1ob3Zlcjp2YXIoLS1pb24taXRlbS1jb2xvciwgdmFyKC0taW9uLXRleHQtY29sb3IsICMwMDApKTstLWNvbG9yOnZhcigtLWlvbi1jb2xvci1wcmltYXJ5LCAjMzg4MGZmKX1cIjtcblxubGV0IFNlbGVjdFBvcG92ZXIgPSBjbGFzcyB7XG4gIGNvbnN0cnVjdG9yKGhvc3RSZWYpIHtcbiAgICByZWdpc3Rlckluc3RhbmNlKHRoaXMsIGhvc3RSZWYpO1xuICAgIC8qKlxuICAgICAqIEFuIGFycmF5IG9mIG9wdGlvbnMgZm9yIHRoZSBwb3BvdmVyXG4gICAgICovXG4gICAgdGhpcy5vcHRpb25zID0gW107XG4gIH1cbiAgb25TZWxlY3QoZXYpIHtcbiAgICB0aGlzLnNldENoZWNrZWQoZXYpO1xuICAgIHRoaXMuY2FsbE9wdGlvbkhhbmRsZXIoZXYpO1xuICB9XG4gIGZpbmRPcHRpb25Gcm9tRXZlbnQoZXYpIHtcbiAgICBjb25zdCB7IG9wdGlvbnMgfSA9IHRoaXM7XG4gICAgcmV0dXJuIG9wdGlvbnMuZmluZChvID0+IG8udmFsdWUgPT09IGV2LnRhcmdldC52YWx1ZSk7XG4gIH1cbiAgLyoqXG4gICAqIFdoZW4gYW4gb3B0aW9uIGlzIHNlbGVjdGVkIHdlIG5lZWQgdG8gZ2V0IHRoZSB2YWx1ZShzKVxuICAgKiBvZiB0aGUgc2VsZWN0ZWQgb3B0aW9uKHMpIGFuZCByZXR1cm4gaXQgaW4gdGhlIG9wdGlvblxuICAgKiBoYW5kbGVyXG4gICAqL1xuICBjYWxsT3B0aW9uSGFuZGxlcihldikge1xuICAgIGNvbnN0IG9wdGlvbiA9IHRoaXMuZmluZE9wdGlvbkZyb21FdmVudChldik7XG4gICAgY29uc3QgdmFsdWVzID0gdGhpcy5nZXRWYWx1ZXMoZXYpO1xuICAgIGlmIChvcHRpb24gJiYgb3B0aW9uLmhhbmRsZXIpIHtcbiAgICAgIHNhZmVDYWxsKG9wdGlvbi5oYW5kbGVyLCB2YWx1ZXMpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogVGhpcyBpcyByZXF1aXJlZCB3aGVuIHNlbGVjdGluZyBhIHJhZGlvIHRoYXQgaXMgYWxyZWFkeVxuICAgKiBzZWxlY3RlZCBiZWNhdXNlIGl0IHdpbGwgbm90IHRyaWdnZXIgdGhlIGlvbkNoYW5nZSBldmVudFxuICAgKiBidXQgd2Ugc3RpbGwgd2FudCB0byBjbG9zZSB0aGUgcG9wb3ZlclxuICAgKi9cbiAgcmJDbGljayhldikge1xuICAgIHRoaXMuY2FsbE9wdGlvbkhhbmRsZXIoZXYpO1xuICB9XG4gIHNldENoZWNrZWQoZXYpIHtcbiAgICBjb25zdCB7IG11bHRpcGxlIH0gPSB0aGlzO1xuICAgIGNvbnN0IG9wdGlvbiA9IHRoaXMuZmluZE9wdGlvbkZyb21FdmVudChldik7XG4gICAgLy8gdGhpcyBpcyBhIHBvcG92ZXIgd2l0aCBjaGVja2JveGVzIChtdWx0aXBsZSB2YWx1ZSBzZWxlY3QpXG4gICAgLy8gd2UgbmVlZCB0byBzZXQgdGhlIGNoZWNrZWQgdmFsdWUgZm9yIHRoaXMgb3B0aW9uXG4gICAgaWYgKG11bHRpcGxlICYmIG9wdGlvbikge1xuICAgICAgb3B0aW9uLmNoZWNrZWQgPSBldi5kZXRhaWwuY2hlY2tlZDtcbiAgICB9XG4gIH1cbiAgZ2V0VmFsdWVzKGV2KSB7XG4gICAgY29uc3QgeyBtdWx0aXBsZSwgb3B0aW9ucyB9ID0gdGhpcztcbiAgICBpZiAobXVsdGlwbGUpIHtcbiAgICAgIC8vIHRoaXMgaXMgYSBwb3BvdmVyIHdpdGggY2hlY2tib3hlcyAobXVsdGlwbGUgdmFsdWUgc2VsZWN0KVxuICAgICAgLy8gcmV0dXJuIGFuIGFycmF5IG9mIGFsbCB0aGUgY2hlY2tlZCB2YWx1ZXNcbiAgICAgIHJldHVybiBvcHRpb25zLmZpbHRlcihvID0+IG8uY2hlY2tlZCkubWFwKG8gPT4gby52YWx1ZSk7XG4gICAgfVxuICAgIC8vIHRoaXMgaXMgYSBwb3BvdmVyIHdpdGggcmFkaW8gYnV0dG9ucyAoc2luZ2xlIHZhbHVlIHNlbGVjdClcbiAgICAvLyByZXR1cm4gdGhlIHZhbHVlIHRoYXQgd2FzIGNsaWNrZWQsIG90aGVyd2lzZSB1bmRlZmluZWRcbiAgICBjb25zdCBvcHRpb24gPSB0aGlzLmZpbmRPcHRpb25Gcm9tRXZlbnQoZXYpO1xuICAgIHJldHVybiBvcHRpb24gPyBvcHRpb24udmFsdWUgOiB1bmRlZmluZWQ7XG4gIH1cbiAgcmVuZGVyT3B0aW9ucyhvcHRpb25zKSB7XG4gICAgY29uc3QgeyBtdWx0aXBsZSB9ID0gdGhpcztcbiAgICBzd2l0Y2ggKG11bHRpcGxlKSB7XG4gICAgICBjYXNlIHRydWU6IHJldHVybiB0aGlzLnJlbmRlckNoZWNrYm94T3B0aW9ucyhvcHRpb25zKTtcbiAgICAgIGRlZmF1bHQ6IHJldHVybiB0aGlzLnJlbmRlclJhZGlvT3B0aW9ucyhvcHRpb25zKTtcbiAgICB9XG4gIH1cbiAgcmVuZGVyQ2hlY2tib3hPcHRpb25zKG9wdGlvbnMpIHtcbiAgICByZXR1cm4gKG9wdGlvbnMubWFwKG9wdGlvbiA9PiBoKFwiaW9uLWl0ZW1cIiwgeyBjbGFzczogZ2V0Q2xhc3NNYXAob3B0aW9uLmNzc0NsYXNzKSB9LCBoKFwiaW9uLWNoZWNrYm94XCIsIHsgc2xvdDogXCJzdGFydFwiLCB2YWx1ZTogb3B0aW9uLnZhbHVlLCBkaXNhYmxlZDogb3B0aW9uLmRpc2FibGVkLCBjaGVja2VkOiBvcHRpb24uY2hlY2tlZCB9KSwgaChcImlvbi1sYWJlbFwiLCBudWxsLCBvcHRpb24udGV4dCkpKSk7XG4gIH1cbiAgcmVuZGVyUmFkaW9PcHRpb25zKG9wdGlvbnMpIHtcbiAgICBjb25zdCBjaGVja2VkID0gb3B0aW9ucy5maWx0ZXIobyA9PiBvLmNoZWNrZWQpLm1hcChvID0+IG8udmFsdWUpWzBdO1xuICAgIHJldHVybiAoaChcImlvbi1yYWRpby1ncm91cFwiLCB7IHZhbHVlOiBjaGVja2VkIH0sIG9wdGlvbnMubWFwKG9wdGlvbiA9PiBoKFwiaW9uLWl0ZW1cIiwgeyBjbGFzczogZ2V0Q2xhc3NNYXAob3B0aW9uLmNzc0NsYXNzKSB9LCBoKFwiaW9uLWxhYmVsXCIsIG51bGwsIG9wdGlvbi50ZXh0KSwgaChcImlvbi1yYWRpb1wiLCB7IHZhbHVlOiBvcHRpb24udmFsdWUsIGRpc2FibGVkOiBvcHRpb24uZGlzYWJsZWQsIG9uQ2xpY2s6IGV2ID0+IHRoaXMucmJDbGljayhldikgfSkpKSkpO1xuICB9XG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCB7IGhlYWRlciwgbWVzc2FnZSwgb3B0aW9ucywgc3ViSGVhZGVyIH0gPSB0aGlzO1xuICAgIGNvbnN0IGhhc1N1YkhlYWRlck9yTWVzc2FnZSA9IHN1YkhlYWRlciAhPT0gdW5kZWZpbmVkIHx8IG1lc3NhZ2UgIT09IHVuZGVmaW5lZDtcbiAgICByZXR1cm4gKGgoSG9zdCwgeyBjbGFzczogZ2V0SW9uTW9kZSh0aGlzKSB9LCBoKFwiaW9uLWxpc3RcIiwgbnVsbCwgaGVhZGVyICE9PSB1bmRlZmluZWQgJiYgaChcImlvbi1saXN0LWhlYWRlclwiLCBudWxsLCBoZWFkZXIpLCBoYXNTdWJIZWFkZXJPck1lc3NhZ2UgJiZcbiAgICAgIGgoXCJpb24taXRlbVwiLCBudWxsLCBoKFwiaW9uLWxhYmVsXCIsIHsgY2xhc3M6IFwiaW9uLXRleHQtd3JhcFwiIH0sIHN1YkhlYWRlciAhPT0gdW5kZWZpbmVkICYmIGgoXCJoM1wiLCBudWxsLCBzdWJIZWFkZXIpLCBtZXNzYWdlICE9PSB1bmRlZmluZWQgJiYgaChcInBcIiwgbnVsbCwgbWVzc2FnZSkpKSwgdGhpcy5yZW5kZXJPcHRpb25zKG9wdGlvbnMpKSkpO1xuICB9XG59O1xuU2VsZWN0UG9wb3Zlci5zdHlsZSA9IHtcbiAgaW9zOiBzZWxlY3RQb3BvdmVySW9zQ3NzLFxuICBtZDogc2VsZWN0UG9wb3Zlck1kQ3NzXG59O1xuXG5leHBvcnQgeyBTZWxlY3QgYXMgaW9uX3NlbGVjdCwgU2VsZWN0T3B0aW9uIGFzIGlvbl9zZWxlY3Rfb3B0aW9uLCBTZWxlY3RQb3BvdmVyIGFzIGlvbl9zZWxlY3RfcG9wb3ZlciB9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9