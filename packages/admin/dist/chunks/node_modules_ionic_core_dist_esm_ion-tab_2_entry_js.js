"use strict";
(self["webpackChunk"] = self["webpackChunk"] || []).push([["node_modules_ionic_core_dist_esm_ion-tab_2_entry_js"],{

/***/ "../../../node_modules/@ionic/core/dist/esm/ion-tab_2.entry.js":
/*!*********************************************************************!*\
  !*** ../../../node_modules/@ionic/core/dist/esm/ion-tab_2.entry.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ion_tab": () => (/* binding */ Tab),
/* harmony export */   "ion_tabs": () => (/* binding */ Tabs)
/* harmony export */ });
/* harmony import */ var _index_06cd27b1_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-06cd27b1.js */ "../../../node_modules/@ionic/core/dist/esm/index-06cd27b1.js");
/* harmony import */ var _framework_delegate_a922018c_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./framework-delegate-a922018c.js */ "../../../node_modules/@ionic/core/dist/esm/framework-delegate-a922018c.js");
/* harmony import */ var _helpers_eed79a2b_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./helpers-eed79a2b.js */ "../../../node_modules/@ionic/core/dist/esm/helpers-eed79a2b.js");
/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */




const tabCss = ":host(.tab-hidden){display:none !important}";

let Tab = class {
  constructor(hostRef) {
    (0,_index_06cd27b1_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);
    this.loaded = false;
    /** @internal */
    this.active = false;
  }
  async componentWillLoad() {
    if (this.active) {
      await this.setActive();
    }
  }
  /** Set the active component for the tab */
  async setActive() {
    await this.prepareLazyLoaded();
    this.active = true;
  }
  changeActive(isActive) {
    if (isActive) {
      this.prepareLazyLoaded();
    }
  }
  prepareLazyLoaded() {
    if (!this.loaded && this.component != null) {
      this.loaded = true;
      try {
        return (0,_framework_delegate_a922018c_js__WEBPACK_IMPORTED_MODULE_1__.a)(this.delegate, this.el, this.component, ['ion-page']);
      }
      catch (e) {
        console.error(e);
      }
    }
    return Promise.resolve(undefined);
  }
  render() {
    const { tab, active, component } = this;
    return ((0,_index_06cd27b1_js__WEBPACK_IMPORTED_MODULE_0__.h)(_index_06cd27b1_js__WEBPACK_IMPORTED_MODULE_0__.H, { role: "tabpanel", "aria-hidden": !active ? 'true' : null, "aria-labelledby": `tab-button-${tab}`, class: {
        'ion-page': component === undefined,
        'tab-hidden': !active
      } }, (0,_index_06cd27b1_js__WEBPACK_IMPORTED_MODULE_0__.h)("slot", null)));
  }
  get el() { return (0,_index_06cd27b1_js__WEBPACK_IMPORTED_MODULE_0__.i)(this); }
  static get watchers() { return {
    "active": ["changeActive"]
  }; }
};
Tab.style = tabCss;

const tabsCss = ":host{left:0;right:0;top:0;bottom:0;display:-ms-flexbox;display:flex;position:absolute;-ms-flex-direction:column;flex-direction:column;width:100%;height:100%;contain:layout size style;z-index:0}.tabs-inner{position:relative;-ms-flex:1;flex:1;contain:layout size style}";

let Tabs = class {
  constructor(hostRef) {
    (0,_index_06cd27b1_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);
    this.ionNavWillLoad = (0,_index_06cd27b1_js__WEBPACK_IMPORTED_MODULE_0__.e)(this, "ionNavWillLoad", 7);
    this.ionTabsWillChange = (0,_index_06cd27b1_js__WEBPACK_IMPORTED_MODULE_0__.e)(this, "ionTabsWillChange", 3);
    this.ionTabsDidChange = (0,_index_06cd27b1_js__WEBPACK_IMPORTED_MODULE_0__.e)(this, "ionTabsDidChange", 3);
    this.transitioning = false;
    /** @internal */
    this.useRouter = false;
    this.onTabClicked = (ev) => {
      const { href, tab } = ev.detail;
      if (this.useRouter && href !== undefined) {
        const router = document.querySelector('ion-router');
        if (router) {
          router.push(href);
        }
      }
      else {
        this.select(tab);
      }
    };
  }
  async componentWillLoad() {
    if (!this.useRouter) {
      this.useRouter = !!document.querySelector('ion-router') && !this.el.closest('[no-router]');
    }
    if (!this.useRouter) {
      const tabs = this.tabs;
      if (tabs.length > 0) {
        await this.select(tabs[0]);
      }
    }
    this.ionNavWillLoad.emit();
  }
  componentWillRender() {
    const tabBar = this.el.querySelector('ion-tab-bar');
    if (tabBar) {
      const tab = this.selectedTab ? this.selectedTab.tab : undefined;
      tabBar.selectedTab = tab;
    }
  }
  /**
   * Select a tab by the value of its `tab` property or an element reference.
   *
   * @param tab The tab instance to select. If passed a string, it should be the value of the tab's `tab` property.
   */
  async select(tab) {
    const selectedTab = getTab(this.tabs, tab);
    if (!this.shouldSwitch(selectedTab)) {
      return false;
    }
    await this.setActive(selectedTab);
    await this.notifyRouter();
    this.tabSwitch();
    return true;
  }
  /**
   * Get a specific tab by the value of its `tab` property or an element reference.
   *
   * @param tab The tab instance to select. If passed a string, it should be the value of the tab's `tab` property.
   */
  async getTab(tab) {
    return getTab(this.tabs, tab);
  }
  /**
   * Get the currently selected tab.
   */
  getSelected() {
    return Promise.resolve(this.selectedTab ? this.selectedTab.tab : undefined);
  }
  /** @internal */
  async setRouteId(id) {
    const selectedTab = getTab(this.tabs, id);
    if (!this.shouldSwitch(selectedTab)) {
      return { changed: false, element: this.selectedTab };
    }
    await this.setActive(selectedTab);
    return {
      changed: true,
      element: this.selectedTab,
      markVisible: () => this.tabSwitch(),
    };
  }
  /** @internal */
  async getRouteId() {
    const tabId = this.selectedTab && this.selectedTab.tab;
    return tabId !== undefined ? { id: tabId, element: this.selectedTab } : undefined;
  }
  setActive(selectedTab) {
    if (this.transitioning) {
      return Promise.reject('transitioning already happening');
    }
    this.transitioning = true;
    this.leavingTab = this.selectedTab;
    this.selectedTab = selectedTab;
    this.ionTabsWillChange.emit({ tab: selectedTab.tab });
    selectedTab.active = true;
    return Promise.resolve();
  }
  tabSwitch() {
    const selectedTab = this.selectedTab;
    const leavingTab = this.leavingTab;
    this.leavingTab = undefined;
    this.transitioning = false;
    if (!selectedTab) {
      return;
    }
    if (leavingTab !== selectedTab) {
      if (leavingTab) {
        leavingTab.active = false;
      }
      this.ionTabsDidChange.emit({ tab: selectedTab.tab });
    }
  }
  notifyRouter() {
    if (this.useRouter) {
      const router = document.querySelector('ion-router');
      if (router) {
        return router.navChanged('forward');
      }
    }
    return Promise.resolve(false);
  }
  shouldSwitch(selectedTab) {
    const leavingTab = this.selectedTab;
    return selectedTab !== undefined && selectedTab !== leavingTab && !this.transitioning;
  }
  get tabs() {
    return Array.from(this.el.querySelectorAll('ion-tab'));
  }
  render() {
    return ((0,_index_06cd27b1_js__WEBPACK_IMPORTED_MODULE_0__.h)(_index_06cd27b1_js__WEBPACK_IMPORTED_MODULE_0__.H, { onIonTabButtonClick: this.onTabClicked }, (0,_index_06cd27b1_js__WEBPACK_IMPORTED_MODULE_0__.h)("slot", { name: "top" }), (0,_index_06cd27b1_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "tabs-inner" }, (0,_index_06cd27b1_js__WEBPACK_IMPORTED_MODULE_0__.h)("slot", null)), (0,_index_06cd27b1_js__WEBPACK_IMPORTED_MODULE_0__.h)("slot", { name: "bottom" })));
  }
  get el() { return (0,_index_06cd27b1_js__WEBPACK_IMPORTED_MODULE_0__.i)(this); }
};
const getTab = (tabs, tab) => {
  const tabEl = (typeof tab === 'string')
    ? tabs.find(t => t.tab === tab)
    : tab;
  if (!tabEl) {
    console.error(`tab with id: "${tabEl}" does not exist`);
  }
  return tabEl;
};
Tabs.style = tabsCss;




/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2h1bmtzL25vZGVfbW9kdWxlc19pb25pY19jb3JlX2Rpc3RfZXNtX2lvbi10YWJfMl9lbnRyeV9qcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUM2RztBQUNyQztBQUN6Qzs7QUFFL0IsbUNBQW1DLHdCQUF3Qjs7QUFFM0Q7QUFDQTtBQUNBLElBQUkscURBQWdCO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLGtFQUFlO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLHlCQUF5QjtBQUNyQyxZQUFZLHFEQUFDLENBQUMsaURBQUksSUFBSSwyRkFBMkYsSUFBSTtBQUNySDtBQUNBO0FBQ0EsU0FBUyxFQUFFLHFEQUFDO0FBQ1o7QUFDQSxhQUFhLE9BQU8scURBQVU7QUFDOUIsMEJBQTBCO0FBQzFCO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHVCQUF1QixPQUFPLFFBQVEsTUFBTSxTQUFTLG9CQUFvQixhQUFhLGtCQUFrQiwwQkFBMEIsc0JBQXNCLFdBQVcsWUFBWSwwQkFBMEIsVUFBVSxZQUFZLGtCQUFrQixXQUFXLE9BQU8sMEJBQTBCOztBQUU3UjtBQUNBO0FBQ0EsSUFBSSxxREFBZ0I7QUFDcEIsMEJBQTBCLHFEQUFXO0FBQ3JDLDZCQUE2QixxREFBVztBQUN4Qyw0QkFBNEIscURBQVc7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLFlBQVk7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsdUNBQXVDO0FBQzFFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0Msc0JBQXNCO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyxzQkFBc0I7QUFDekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLHFEQUFDLENBQUMsaURBQUksSUFBSSx3Q0FBd0MsRUFBRSxxREFBQyxXQUFXLGFBQWEsR0FBRyxxREFBQyxVQUFVLHFCQUFxQixFQUFFLHFEQUFDLGlCQUFpQixxREFBQyxXQUFXLGdCQUFnQjtBQUM1SztBQUNBLGFBQWEsT0FBTyxxREFBVTtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsTUFBTTtBQUN6QztBQUNBO0FBQ0E7QUFDQTs7QUFFNEMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL0Bpb25pYy9jb3JlL2Rpc3QvZXNtL2lvbi10YWJfMi5lbnRyeS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIChDKSBJb25pYyBodHRwOi8vaW9uaWNmcmFtZXdvcmsuY29tIC0gTUlUIExpY2Vuc2VcbiAqL1xuaW1wb3J0IHsgciBhcyByZWdpc3Rlckluc3RhbmNlLCBoLCBIIGFzIEhvc3QsIGkgYXMgZ2V0RWxlbWVudCwgZSBhcyBjcmVhdGVFdmVudCB9IGZyb20gJy4vaW5kZXgtMDZjZDI3YjEuanMnO1xuaW1wb3J0IHsgYSBhcyBhdHRhY2hDb21wb25lbnQgfSBmcm9tICcuL2ZyYW1ld29yay1kZWxlZ2F0ZS1hOTIyMDE4Yy5qcyc7XG5pbXBvcnQgJy4vaGVscGVycy1lZWQ3OWEyYi5qcyc7XG5cbmNvbnN0IHRhYkNzcyA9IFwiOmhvc3QoLnRhYi1oaWRkZW4pe2Rpc3BsYXk6bm9uZSAhaW1wb3J0YW50fVwiO1xuXG5sZXQgVGFiID0gY2xhc3Mge1xuICBjb25zdHJ1Y3Rvcihob3N0UmVmKSB7XG4gICAgcmVnaXN0ZXJJbnN0YW5jZSh0aGlzLCBob3N0UmVmKTtcbiAgICB0aGlzLmxvYWRlZCA9IGZhbHNlO1xuICAgIC8qKiBAaW50ZXJuYWwgKi9cbiAgICB0aGlzLmFjdGl2ZSA9IGZhbHNlO1xuICB9XG4gIGFzeW5jIGNvbXBvbmVudFdpbGxMb2FkKCkge1xuICAgIGlmICh0aGlzLmFjdGl2ZSkge1xuICAgICAgYXdhaXQgdGhpcy5zZXRBY3RpdmUoKTtcbiAgICB9XG4gIH1cbiAgLyoqIFNldCB0aGUgYWN0aXZlIGNvbXBvbmVudCBmb3IgdGhlIHRhYiAqL1xuICBhc3luYyBzZXRBY3RpdmUoKSB7XG4gICAgYXdhaXQgdGhpcy5wcmVwYXJlTGF6eUxvYWRlZCgpO1xuICAgIHRoaXMuYWN0aXZlID0gdHJ1ZTtcbiAgfVxuICBjaGFuZ2VBY3RpdmUoaXNBY3RpdmUpIHtcbiAgICBpZiAoaXNBY3RpdmUpIHtcbiAgICAgIHRoaXMucHJlcGFyZUxhenlMb2FkZWQoKTtcbiAgICB9XG4gIH1cbiAgcHJlcGFyZUxhenlMb2FkZWQoKSB7XG4gICAgaWYgKCF0aGlzLmxvYWRlZCAmJiB0aGlzLmNvbXBvbmVudCAhPSBudWxsKSB7XG4gICAgICB0aGlzLmxvYWRlZCA9IHRydWU7XG4gICAgICB0cnkge1xuICAgICAgICByZXR1cm4gYXR0YWNoQ29tcG9uZW50KHRoaXMuZGVsZWdhdGUsIHRoaXMuZWwsIHRoaXMuY29tcG9uZW50LCBbJ2lvbi1wYWdlJ10pO1xuICAgICAgfVxuICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh1bmRlZmluZWQpO1xuICB9XG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCB7IHRhYiwgYWN0aXZlLCBjb21wb25lbnQgfSA9IHRoaXM7XG4gICAgcmV0dXJuIChoKEhvc3QsIHsgcm9sZTogXCJ0YWJwYW5lbFwiLCBcImFyaWEtaGlkZGVuXCI6ICFhY3RpdmUgPyAndHJ1ZScgOiBudWxsLCBcImFyaWEtbGFiZWxsZWRieVwiOiBgdGFiLWJ1dHRvbi0ke3RhYn1gLCBjbGFzczoge1xuICAgICAgICAnaW9uLXBhZ2UnOiBjb21wb25lbnQgPT09IHVuZGVmaW5lZCxcbiAgICAgICAgJ3RhYi1oaWRkZW4nOiAhYWN0aXZlXG4gICAgICB9IH0sIGgoXCJzbG90XCIsIG51bGwpKSk7XG4gIH1cbiAgZ2V0IGVsKCkgeyByZXR1cm4gZ2V0RWxlbWVudCh0aGlzKTsgfVxuICBzdGF0aWMgZ2V0IHdhdGNoZXJzKCkgeyByZXR1cm4ge1xuICAgIFwiYWN0aXZlXCI6IFtcImNoYW5nZUFjdGl2ZVwiXVxuICB9OyB9XG59O1xuVGFiLnN0eWxlID0gdGFiQ3NzO1xuXG5jb25zdCB0YWJzQ3NzID0gXCI6aG9zdHtsZWZ0OjA7cmlnaHQ6MDt0b3A6MDtib3R0b206MDtkaXNwbGF5Oi1tcy1mbGV4Ym94O2Rpc3BsYXk6ZmxleDtwb3NpdGlvbjphYnNvbHV0ZTstbXMtZmxleC1kaXJlY3Rpb246Y29sdW1uO2ZsZXgtZGlyZWN0aW9uOmNvbHVtbjt3aWR0aDoxMDAlO2hlaWdodDoxMDAlO2NvbnRhaW46bGF5b3V0IHNpemUgc3R5bGU7ei1pbmRleDowfS50YWJzLWlubmVye3Bvc2l0aW9uOnJlbGF0aXZlOy1tcy1mbGV4OjE7ZmxleDoxO2NvbnRhaW46bGF5b3V0IHNpemUgc3R5bGV9XCI7XG5cbmxldCBUYWJzID0gY2xhc3Mge1xuICBjb25zdHJ1Y3Rvcihob3N0UmVmKSB7XG4gICAgcmVnaXN0ZXJJbnN0YW5jZSh0aGlzLCBob3N0UmVmKTtcbiAgICB0aGlzLmlvbk5hdldpbGxMb2FkID0gY3JlYXRlRXZlbnQodGhpcywgXCJpb25OYXZXaWxsTG9hZFwiLCA3KTtcbiAgICB0aGlzLmlvblRhYnNXaWxsQ2hhbmdlID0gY3JlYXRlRXZlbnQodGhpcywgXCJpb25UYWJzV2lsbENoYW5nZVwiLCAzKTtcbiAgICB0aGlzLmlvblRhYnNEaWRDaGFuZ2UgPSBjcmVhdGVFdmVudCh0aGlzLCBcImlvblRhYnNEaWRDaGFuZ2VcIiwgMyk7XG4gICAgdGhpcy50cmFuc2l0aW9uaW5nID0gZmFsc2U7XG4gICAgLyoqIEBpbnRlcm5hbCAqL1xuICAgIHRoaXMudXNlUm91dGVyID0gZmFsc2U7XG4gICAgdGhpcy5vblRhYkNsaWNrZWQgPSAoZXYpID0+IHtcbiAgICAgIGNvbnN0IHsgaHJlZiwgdGFiIH0gPSBldi5kZXRhaWw7XG4gICAgICBpZiAodGhpcy51c2VSb3V0ZXIgJiYgaHJlZiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGNvbnN0IHJvdXRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2lvbi1yb3V0ZXInKTtcbiAgICAgICAgaWYgKHJvdXRlcikge1xuICAgICAgICAgIHJvdXRlci5wdXNoKGhyZWYpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgdGhpcy5zZWxlY3QodGFiKTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG4gIGFzeW5jIGNvbXBvbmVudFdpbGxMb2FkKCkge1xuICAgIGlmICghdGhpcy51c2VSb3V0ZXIpIHtcbiAgICAgIHRoaXMudXNlUm91dGVyID0gISFkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdpb24tcm91dGVyJykgJiYgIXRoaXMuZWwuY2xvc2VzdCgnW25vLXJvdXRlcl0nKTtcbiAgICB9XG4gICAgaWYgKCF0aGlzLnVzZVJvdXRlcikge1xuICAgICAgY29uc3QgdGFicyA9IHRoaXMudGFicztcbiAgICAgIGlmICh0YWJzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgYXdhaXQgdGhpcy5zZWxlY3QodGFic1swXSk7XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuaW9uTmF2V2lsbExvYWQuZW1pdCgpO1xuICB9XG4gIGNvbXBvbmVudFdpbGxSZW5kZXIoKSB7XG4gICAgY29uc3QgdGFiQmFyID0gdGhpcy5lbC5xdWVyeVNlbGVjdG9yKCdpb24tdGFiLWJhcicpO1xuICAgIGlmICh0YWJCYXIpIHtcbiAgICAgIGNvbnN0IHRhYiA9IHRoaXMuc2VsZWN0ZWRUYWIgPyB0aGlzLnNlbGVjdGVkVGFiLnRhYiA6IHVuZGVmaW5lZDtcbiAgICAgIHRhYkJhci5zZWxlY3RlZFRhYiA9IHRhYjtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIFNlbGVjdCBhIHRhYiBieSB0aGUgdmFsdWUgb2YgaXRzIGB0YWJgIHByb3BlcnR5IG9yIGFuIGVsZW1lbnQgcmVmZXJlbmNlLlxuICAgKlxuICAgKiBAcGFyYW0gdGFiIFRoZSB0YWIgaW5zdGFuY2UgdG8gc2VsZWN0LiBJZiBwYXNzZWQgYSBzdHJpbmcsIGl0IHNob3VsZCBiZSB0aGUgdmFsdWUgb2YgdGhlIHRhYidzIGB0YWJgIHByb3BlcnR5LlxuICAgKi9cbiAgYXN5bmMgc2VsZWN0KHRhYikge1xuICAgIGNvbnN0IHNlbGVjdGVkVGFiID0gZ2V0VGFiKHRoaXMudGFicywgdGFiKTtcbiAgICBpZiAoIXRoaXMuc2hvdWxkU3dpdGNoKHNlbGVjdGVkVGFiKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBhd2FpdCB0aGlzLnNldEFjdGl2ZShzZWxlY3RlZFRhYik7XG4gICAgYXdhaXQgdGhpcy5ub3RpZnlSb3V0ZXIoKTtcbiAgICB0aGlzLnRhYlN3aXRjaCgpO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgYSBzcGVjaWZpYyB0YWIgYnkgdGhlIHZhbHVlIG9mIGl0cyBgdGFiYCBwcm9wZXJ0eSBvciBhbiBlbGVtZW50IHJlZmVyZW5jZS5cbiAgICpcbiAgICogQHBhcmFtIHRhYiBUaGUgdGFiIGluc3RhbmNlIHRvIHNlbGVjdC4gSWYgcGFzc2VkIGEgc3RyaW5nLCBpdCBzaG91bGQgYmUgdGhlIHZhbHVlIG9mIHRoZSB0YWIncyBgdGFiYCBwcm9wZXJ0eS5cbiAgICovXG4gIGFzeW5jIGdldFRhYih0YWIpIHtcbiAgICByZXR1cm4gZ2V0VGFiKHRoaXMudGFicywgdGFiKTtcbiAgfVxuICAvKipcbiAgICogR2V0IHRoZSBjdXJyZW50bHkgc2VsZWN0ZWQgdGFiLlxuICAgKi9cbiAgZ2V0U2VsZWN0ZWQoKSB7XG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLnNlbGVjdGVkVGFiID8gdGhpcy5zZWxlY3RlZFRhYi50YWIgOiB1bmRlZmluZWQpO1xuICB9XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgYXN5bmMgc2V0Um91dGVJZChpZCkge1xuICAgIGNvbnN0IHNlbGVjdGVkVGFiID0gZ2V0VGFiKHRoaXMudGFicywgaWQpO1xuICAgIGlmICghdGhpcy5zaG91bGRTd2l0Y2goc2VsZWN0ZWRUYWIpKSB7XG4gICAgICByZXR1cm4geyBjaGFuZ2VkOiBmYWxzZSwgZWxlbWVudDogdGhpcy5zZWxlY3RlZFRhYiB9O1xuICAgIH1cbiAgICBhd2FpdCB0aGlzLnNldEFjdGl2ZShzZWxlY3RlZFRhYik7XG4gICAgcmV0dXJuIHtcbiAgICAgIGNoYW5nZWQ6IHRydWUsXG4gICAgICBlbGVtZW50OiB0aGlzLnNlbGVjdGVkVGFiLFxuICAgICAgbWFya1Zpc2libGU6ICgpID0+IHRoaXMudGFiU3dpdGNoKCksXG4gICAgfTtcbiAgfVxuICAvKiogQGludGVybmFsICovXG4gIGFzeW5jIGdldFJvdXRlSWQoKSB7XG4gICAgY29uc3QgdGFiSWQgPSB0aGlzLnNlbGVjdGVkVGFiICYmIHRoaXMuc2VsZWN0ZWRUYWIudGFiO1xuICAgIHJldHVybiB0YWJJZCAhPT0gdW5kZWZpbmVkID8geyBpZDogdGFiSWQsIGVsZW1lbnQ6IHRoaXMuc2VsZWN0ZWRUYWIgfSA6IHVuZGVmaW5lZDtcbiAgfVxuICBzZXRBY3RpdmUoc2VsZWN0ZWRUYWIpIHtcbiAgICBpZiAodGhpcy50cmFuc2l0aW9uaW5nKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoJ3RyYW5zaXRpb25pbmcgYWxyZWFkeSBoYXBwZW5pbmcnKTtcbiAgICB9XG4gICAgdGhpcy50cmFuc2l0aW9uaW5nID0gdHJ1ZTtcbiAgICB0aGlzLmxlYXZpbmdUYWIgPSB0aGlzLnNlbGVjdGVkVGFiO1xuICAgIHRoaXMuc2VsZWN0ZWRUYWIgPSBzZWxlY3RlZFRhYjtcbiAgICB0aGlzLmlvblRhYnNXaWxsQ2hhbmdlLmVtaXQoeyB0YWI6IHNlbGVjdGVkVGFiLnRhYiB9KTtcbiAgICBzZWxlY3RlZFRhYi5hY3RpdmUgPSB0cnVlO1xuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgfVxuICB0YWJTd2l0Y2goKSB7XG4gICAgY29uc3Qgc2VsZWN0ZWRUYWIgPSB0aGlzLnNlbGVjdGVkVGFiO1xuICAgIGNvbnN0IGxlYXZpbmdUYWIgPSB0aGlzLmxlYXZpbmdUYWI7XG4gICAgdGhpcy5sZWF2aW5nVGFiID0gdW5kZWZpbmVkO1xuICAgIHRoaXMudHJhbnNpdGlvbmluZyA9IGZhbHNlO1xuICAgIGlmICghc2VsZWN0ZWRUYWIpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKGxlYXZpbmdUYWIgIT09IHNlbGVjdGVkVGFiKSB7XG4gICAgICBpZiAobGVhdmluZ1RhYikge1xuICAgICAgICBsZWF2aW5nVGFiLmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgfVxuICAgICAgdGhpcy5pb25UYWJzRGlkQ2hhbmdlLmVtaXQoeyB0YWI6IHNlbGVjdGVkVGFiLnRhYiB9KTtcbiAgICB9XG4gIH1cbiAgbm90aWZ5Um91dGVyKCkge1xuICAgIGlmICh0aGlzLnVzZVJvdXRlcikge1xuICAgICAgY29uc3Qgcm91dGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaW9uLXJvdXRlcicpO1xuICAgICAgaWYgKHJvdXRlcikge1xuICAgICAgICByZXR1cm4gcm91dGVyLm5hdkNoYW5nZWQoJ2ZvcndhcmQnKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShmYWxzZSk7XG4gIH1cbiAgc2hvdWxkU3dpdGNoKHNlbGVjdGVkVGFiKSB7XG4gICAgY29uc3QgbGVhdmluZ1RhYiA9IHRoaXMuc2VsZWN0ZWRUYWI7XG4gICAgcmV0dXJuIHNlbGVjdGVkVGFiICE9PSB1bmRlZmluZWQgJiYgc2VsZWN0ZWRUYWIgIT09IGxlYXZpbmdUYWIgJiYgIXRoaXMudHJhbnNpdGlvbmluZztcbiAgfVxuICBnZXQgdGFicygpIHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLmVsLnF1ZXJ5U2VsZWN0b3JBbGwoJ2lvbi10YWInKSk7XG4gIH1cbiAgcmVuZGVyKCkge1xuICAgIHJldHVybiAoaChIb3N0LCB7IG9uSW9uVGFiQnV0dG9uQ2xpY2s6IHRoaXMub25UYWJDbGlja2VkIH0sIGgoXCJzbG90XCIsIHsgbmFtZTogXCJ0b3BcIiB9KSwgaChcImRpdlwiLCB7IGNsYXNzOiBcInRhYnMtaW5uZXJcIiB9LCBoKFwic2xvdFwiLCBudWxsKSksIGgoXCJzbG90XCIsIHsgbmFtZTogXCJib3R0b21cIiB9KSkpO1xuICB9XG4gIGdldCBlbCgpIHsgcmV0dXJuIGdldEVsZW1lbnQodGhpcyk7IH1cbn07XG5jb25zdCBnZXRUYWIgPSAodGFicywgdGFiKSA9PiB7XG4gIGNvbnN0IHRhYkVsID0gKHR5cGVvZiB0YWIgPT09ICdzdHJpbmcnKVxuICAgID8gdGFicy5maW5kKHQgPT4gdC50YWIgPT09IHRhYilcbiAgICA6IHRhYjtcbiAgaWYgKCF0YWJFbCkge1xuICAgIGNvbnNvbGUuZXJyb3IoYHRhYiB3aXRoIGlkOiBcIiR7dGFiRWx9XCIgZG9lcyBub3QgZXhpc3RgKTtcbiAgfVxuICByZXR1cm4gdGFiRWw7XG59O1xuVGFicy5zdHlsZSA9IHRhYnNDc3M7XG5cbmV4cG9ydCB7IFRhYiBhcyBpb25fdGFiLCBUYWJzIGFzIGlvbl90YWJzIH07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=