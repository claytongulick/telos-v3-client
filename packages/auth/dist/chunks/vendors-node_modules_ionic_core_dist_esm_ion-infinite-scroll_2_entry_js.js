"use strict";
(self["webpackChunk"] = self["webpackChunk"] || []).push([["vendors-node_modules_ionic_core_dist_esm_ion-infinite-scroll_2_entry_js"],{

/***/ "../node_modules/@ionic/core/dist/esm/ion-infinite-scroll_2.entry.js":
/*!***************************************************************************!*\
  !*** ../node_modules/@ionic/core/dist/esm/ion-infinite-scroll_2.entry.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ion_infinite_scroll": () => (/* binding */ InfiniteScroll),
/* harmony export */   "ion_infinite_scroll_content": () => (/* binding */ InfiniteScrollContent)
/* harmony export */ });
/* harmony import */ var _index_06cd27b1_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index-06cd27b1.js */ "../node_modules/@ionic/core/dist/esm/index-06cd27b1.js");
/* harmony import */ var _ionic_global_a049bcbf_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ionic-global-a049bcbf.js */ "../node_modules/@ionic/core/dist/esm/ionic-global-a049bcbf.js");
/* harmony import */ var _helpers_eed79a2b_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./helpers-eed79a2b.js */ "../node_modules/@ionic/core/dist/esm/helpers-eed79a2b.js");
/* harmony import */ var _index_c841c933_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./index-c841c933.js */ "../node_modules/@ionic/core/dist/esm/index-c841c933.js");
/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */





const infiniteScrollCss = "ion-infinite-scroll{display:none;width:100%}.infinite-scroll-enabled{display:block}";

let InfiniteScroll = class {
  constructor(hostRef) {
    (0,_index_06cd27b1_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);
    this.ionInfinite = (0,_index_06cd27b1_js__WEBPACK_IMPORTED_MODULE_0__.e)(this, "ionInfinite", 7);
    this.thrPx = 0;
    this.thrPc = 0;
    this.didFire = false;
    this.isBusy = false;
    this.isLoading = false;
    /**
     * The threshold distance from the bottom
     * of the content to call the `infinite` output event when scrolled.
     * The threshold value can be either a percent, or
     * in pixels. For example, use the value of `10%` for the `infinite`
     * output event to get called when the user has scrolled 10%
     * from the bottom of the page. Use the value `100px` when the
     * scroll is within 100 pixels from the bottom of the page.
     */
    this.threshold = '15%';
    /**
     * If `true`, the infinite scroll will be hidden and scroll event listeners
     * will be removed.
     *
     * Set this to true to disable the infinite scroll from actively
     * trying to receive new data while scrolling. This is useful
     * when it is known that there is no more data that can be added, and
     * the infinite scroll is no longer needed.
     */
    this.disabled = false;
    /**
     * The position of the infinite scroll element.
     * The value can be either `top` or `bottom`.
     */
    this.position = 'bottom';
    this.onScroll = () => {
      const scrollEl = this.scrollEl;
      if (!scrollEl || !this.canStart()) {
        return 1;
      }
      const infiniteHeight = this.el.offsetHeight;
      if (infiniteHeight === 0) {
        // if there is no height of this element then do nothing
        return 2;
      }
      const scrollTop = scrollEl.scrollTop;
      const scrollHeight = scrollEl.scrollHeight;
      const height = scrollEl.offsetHeight;
      const threshold = this.thrPc !== 0 ? (height * this.thrPc) : this.thrPx;
      const distanceFromInfinite = (this.position === 'bottom')
        ? scrollHeight - infiniteHeight - scrollTop - threshold - height
        : scrollTop - infiniteHeight - threshold;
      if (distanceFromInfinite < 0) {
        if (!this.didFire) {
          this.isLoading = true;
          this.didFire = true;
          this.ionInfinite.emit();
          return 3;
        }
      }
      else {
        this.didFire = false;
      }
      return 4;
    };
  }
  thresholdChanged() {
    const val = this.threshold;
    if (val.lastIndexOf('%') > -1) {
      this.thrPx = 0;
      this.thrPc = (parseFloat(val) / 100);
    }
    else {
      this.thrPx = parseFloat(val);
      this.thrPc = 0;
    }
  }
  disabledChanged() {
    const disabled = this.disabled;
    if (disabled) {
      this.isLoading = false;
      this.isBusy = false;
    }
    this.enableScrollEvents(!disabled);
  }
  async connectedCallback() {
    const contentEl = this.el.closest('ion-content');
    if (!contentEl) {
      console.error('<ion-infinite-scroll> must be used inside an <ion-content>');
      return;
    }
    await new Promise(resolve => (0,_helpers_eed79a2b_js__WEBPACK_IMPORTED_MODULE_2__.c)(contentEl, resolve));
    this.scrollEl = await contentEl.getScrollElement();
    this.thresholdChanged();
    this.disabledChanged();
    if (this.position === 'top') {
      (0,_index_06cd27b1_js__WEBPACK_IMPORTED_MODULE_0__.c)(() => {
        if (this.scrollEl) {
          this.scrollEl.scrollTop = this.scrollEl.scrollHeight - this.scrollEl.clientHeight;
        }
      });
    }
  }
  disconnectedCallback() {
    this.enableScrollEvents(false);
    this.scrollEl = undefined;
  }
  /**
   * Call `complete()` within the `ionInfinite` output event handler when
   * your async operation has completed. For example, the `loading`
   * state is while the app is performing an asynchronous operation,
   * such as receiving more data from an AJAX request to add more items
   * to a data list. Once the data has been received and UI updated, you
   * then call this method to signify that the loading has completed.
   * This method will change the infinite scroll's state from `loading`
   * to `enabled`.
   */
  async complete() {
    const scrollEl = this.scrollEl;
    if (!this.isLoading || !scrollEl) {
      return;
    }
    this.isLoading = false;
    if (this.position === 'top') {
      /**
       * New content is being added at the top, but the scrollTop position stays the same,
       * which causes a scroll jump visually. This algorithm makes sure to prevent this.
       * (Frame 1)
       *    - complete() is called, but the UI hasn't had time to update yet.
       *    - Save the current content dimensions.
       *    - Wait for the next frame using _dom.read, so the UI will be updated.
       * (Frame 2)
       *    - Read the new content dimensions.
       *    - Calculate the height difference and the new scroll position.
       *    - Delay the scroll position change until other possible dom reads are done using _dom.write to be performant.
       * (Still frame 2, if I'm correct)
       *    - Change the scroll position (= visually maintain the scroll position).
       *    - Change the state to re-enable the InfiniteScroll.
       *    - This should be after changing the scroll position, or it could
       *    cause the InfiniteScroll to be triggered again immediately.
       * (Frame 3)
       *    Done.
       */
      this.isBusy = true;
      // ******** DOM READ ****************
      // Save the current content dimensions before the UI updates
      const prev = scrollEl.scrollHeight - scrollEl.scrollTop;
      // ******** DOM READ ****************
      requestAnimationFrame(() => {
        (0,_index_06cd27b1_js__WEBPACK_IMPORTED_MODULE_0__.f)(() => {
          // UI has updated, save the new content dimensions
          const scrollHeight = scrollEl.scrollHeight;
          // New content was added on top, so the scroll position should be changed immediately to prevent it from jumping around
          const newScrollTop = scrollHeight - prev;
          // ******** DOM WRITE ****************
          requestAnimationFrame(() => {
            (0,_index_06cd27b1_js__WEBPACK_IMPORTED_MODULE_0__.c)(() => {
              scrollEl.scrollTop = newScrollTop;
              this.isBusy = false;
            });
          });
        });
      });
    }
  }
  canStart() {
    return (!this.disabled &&
      !this.isBusy &&
      !!this.scrollEl &&
      !this.isLoading);
  }
  enableScrollEvents(shouldListen) {
    if (this.scrollEl) {
      if (shouldListen) {
        this.scrollEl.addEventListener('scroll', this.onScroll);
      }
      else {
        this.scrollEl.removeEventListener('scroll', this.onScroll);
      }
    }
  }
  render() {
    const mode = (0,_ionic_global_a049bcbf_js__WEBPACK_IMPORTED_MODULE_1__.b)(this);
    const disabled = this.disabled;
    return ((0,_index_06cd27b1_js__WEBPACK_IMPORTED_MODULE_0__.h)(_index_06cd27b1_js__WEBPACK_IMPORTED_MODULE_0__.H, { class: {
        [mode]: true,
        'infinite-scroll-loading': this.isLoading,
        'infinite-scroll-enabled': !disabled
      } }));
  }
  get el() { return (0,_index_06cd27b1_js__WEBPACK_IMPORTED_MODULE_0__.i)(this); }
  static get watchers() { return {
    "threshold": ["thresholdChanged"],
    "disabled": ["disabledChanged"]
  }; }
};
InfiniteScroll.style = infiniteScrollCss;

const infiniteScrollContentIosCss = "ion-infinite-scroll-content{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-pack:center;justify-content:center;min-height:84px;text-align:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.infinite-loading{margin-left:0;margin-right:0;margin-top:0;margin-bottom:32px;display:none;width:100%}.infinite-loading-text{margin-left:32px;margin-right:32px;margin-top:4px;margin-bottom:0}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){.infinite-loading-text{margin-left:unset;margin-right:unset;-webkit-margin-start:32px;margin-inline-start:32px;-webkit-margin-end:32px;margin-inline-end:32px}}.infinite-scroll-loading ion-infinite-scroll-content>.infinite-loading{display:block}.infinite-scroll-content-ios .infinite-loading-text{color:var(--ion-color-step-600, #666666)}.infinite-scroll-content-ios .infinite-loading-spinner .spinner-lines-ios line,.infinite-scroll-content-ios .infinite-loading-spinner .spinner-lines-small-ios line,.infinite-scroll-content-ios .infinite-loading-spinner .spinner-crescent circle{stroke:var(--ion-color-step-600, #666666)}.infinite-scroll-content-ios .infinite-loading-spinner .spinner-bubbles circle,.infinite-scroll-content-ios .infinite-loading-spinner .spinner-circles circle,.infinite-scroll-content-ios .infinite-loading-spinner .spinner-dots circle{fill:var(--ion-color-step-600, #666666)}";

const infiniteScrollContentMdCss = "ion-infinite-scroll-content{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-pack:center;justify-content:center;min-height:84px;text-align:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.infinite-loading{margin-left:0;margin-right:0;margin-top:0;margin-bottom:32px;display:none;width:100%}.infinite-loading-text{margin-left:32px;margin-right:32px;margin-top:4px;margin-bottom:0}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){.infinite-loading-text{margin-left:unset;margin-right:unset;-webkit-margin-start:32px;margin-inline-start:32px;-webkit-margin-end:32px;margin-inline-end:32px}}.infinite-scroll-loading ion-infinite-scroll-content>.infinite-loading{display:block}.infinite-scroll-content-md .infinite-loading-text{color:var(--ion-color-step-600, #666666)}.infinite-scroll-content-md .infinite-loading-spinner .spinner-lines-md line,.infinite-scroll-content-md .infinite-loading-spinner .spinner-lines-small-md line,.infinite-scroll-content-md .infinite-loading-spinner .spinner-crescent circle{stroke:var(--ion-color-step-600, #666666)}.infinite-scroll-content-md .infinite-loading-spinner .spinner-bubbles circle,.infinite-scroll-content-md .infinite-loading-spinner .spinner-circles circle,.infinite-scroll-content-md .infinite-loading-spinner .spinner-dots circle{fill:var(--ion-color-step-600, #666666)}";

let InfiniteScrollContent = class {
  constructor(hostRef) {
    (0,_index_06cd27b1_js__WEBPACK_IMPORTED_MODULE_0__.r)(this, hostRef);
  }
  componentDidLoad() {
    if (this.loadingSpinner === undefined) {
      const mode = (0,_ionic_global_a049bcbf_js__WEBPACK_IMPORTED_MODULE_1__.b)(this);
      this.loadingSpinner = _ionic_global_a049bcbf_js__WEBPACK_IMPORTED_MODULE_1__.c.get('infiniteLoadingSpinner', _ionic_global_a049bcbf_js__WEBPACK_IMPORTED_MODULE_1__.c.get('spinner', mode === 'ios' ? 'lines' : 'crescent'));
    }
  }
  render() {
    const mode = (0,_ionic_global_a049bcbf_js__WEBPACK_IMPORTED_MODULE_1__.b)(this);
    return ((0,_index_06cd27b1_js__WEBPACK_IMPORTED_MODULE_0__.h)(_index_06cd27b1_js__WEBPACK_IMPORTED_MODULE_0__.H, { class: {
        [mode]: true,
        // Used internally for styling
        [`infinite-scroll-content-${mode}`]: true
      } }, (0,_index_06cd27b1_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "infinite-loading" }, this.loadingSpinner && ((0,_index_06cd27b1_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "infinite-loading-spinner" }, (0,_index_06cd27b1_js__WEBPACK_IMPORTED_MODULE_0__.h)("ion-spinner", { name: this.loadingSpinner }))), this.loadingText && ((0,_index_06cd27b1_js__WEBPACK_IMPORTED_MODULE_0__.h)("div", { class: "infinite-loading-text", innerHTML: (0,_index_c841c933_js__WEBPACK_IMPORTED_MODULE_3__.s)(this.loadingText) })))));
  }
};
InfiniteScrollContent.style = {
  ios: infiniteScrollContentIosCss,
  md: infiniteScrollContentMdCss
};




/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2h1bmtzL3ZlbmRvcnMtbm9kZV9tb2R1bGVzX2lvbmljX2NvcmVfZGlzdF9lc21faW9uLWluZmluaXRlLXNjcm9sbF8yX2VudHJ5X2pzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUM0STtBQUNsRTtBQUNaO0FBQ0Q7O0FBRTdELCtDQUErQyxhQUFhLFdBQVcseUJBQXlCLGNBQWM7O0FBRTlHO0FBQ0E7QUFDQSxJQUFJLHFEQUFnQjtBQUNwQix1QkFBdUIscURBQVc7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyx1REFBZ0I7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLHFEQUFTO0FBQ2Y7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEscURBQVE7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxxREFBUztBQUNyQjtBQUNBO0FBQ0EsYUFBYTtBQUNiLFdBQVc7QUFDWCxTQUFTO0FBQ1QsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLDREQUFVO0FBQzNCO0FBQ0EsWUFBWSxxREFBQyxDQUFDLGlEQUFJLElBQUk7QUFDdEI7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsYUFBYSxPQUFPLHFEQUFVO0FBQzlCLDBCQUEwQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGlFQUFpRSxvQkFBb0IsYUFBYSwwQkFBMEIsc0JBQXNCLHFCQUFxQix1QkFBdUIsZ0JBQWdCLGtCQUFrQix5QkFBeUIsc0JBQXNCLHFCQUFxQixpQkFBaUIsa0JBQWtCLGNBQWMsZUFBZSxhQUFhLG1CQUFtQixhQUFhLFdBQVcsdUJBQXVCLGlCQUFpQixrQkFBa0IsZUFBZSxnQkFBZ0IsK0ZBQStGLHVCQUF1QixrQkFBa0IsbUJBQW1CLDBCQUEwQix5QkFBeUIsd0JBQXdCLHdCQUF3Qix1RUFBdUUsY0FBYyxvREFBb0QseUNBQXlDLG9QQUFvUCwwQ0FBMEMsME9BQTBPLHdDQUF3Qzs7QUFFcjlDLGdFQUFnRSxvQkFBb0IsYUFBYSwwQkFBMEIsc0JBQXNCLHFCQUFxQix1QkFBdUIsZ0JBQWdCLGtCQUFrQix5QkFBeUIsc0JBQXNCLHFCQUFxQixpQkFBaUIsa0JBQWtCLGNBQWMsZUFBZSxhQUFhLG1CQUFtQixhQUFhLFdBQVcsdUJBQXVCLGlCQUFpQixrQkFBa0IsZUFBZSxnQkFBZ0IsK0ZBQStGLHVCQUF1QixrQkFBa0IsbUJBQW1CLDBCQUEwQix5QkFBeUIsd0JBQXdCLHdCQUF3Qix1RUFBdUUsY0FBYyxtREFBbUQseUNBQXlDLCtPQUErTywwQ0FBMEMsdU9BQXVPLHdDQUF3Qzs7QUFFMzhDO0FBQ0E7QUFDQSxJQUFJLHFEQUFnQjtBQUNwQjtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsNERBQVU7QUFDN0IsNEJBQTRCLDREQUFVLDJCQUEyQiw0REFBVTtBQUMzRTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsNERBQVU7QUFDM0IsWUFBWSxxREFBQyxDQUFDLGlEQUFJLElBQUk7QUFDdEI7QUFDQTtBQUNBLG9DQUFvQyxLQUFLO0FBQ3pDLFNBQVMsRUFBRSxxREFBQyxVQUFVLDJCQUEyQiwwQkFBMEIscURBQUMsVUFBVSxtQ0FBbUMsRUFBRSxxREFBQyxrQkFBa0IsMkJBQTJCLDBCQUEwQixxREFBQyxVQUFVLDJDQUEyQyxxREFBaUIsb0JBQW9CO0FBQzlSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFdUciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi4vbm9kZV9tb2R1bGVzL0Bpb25pYy9jb3JlL2Rpc3QvZXNtL2lvbi1pbmZpbml0ZS1zY3JvbGxfMi5lbnRyeS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIChDKSBJb25pYyBodHRwOi8vaW9uaWNmcmFtZXdvcmsuY29tIC0gTUlUIExpY2Vuc2VcbiAqL1xuaW1wb3J0IHsgciBhcyByZWdpc3Rlckluc3RhbmNlLCBlIGFzIGNyZWF0ZUV2ZW50LCBjIGFzIHdyaXRlVGFzaywgZiBhcyByZWFkVGFzaywgaCwgaSBhcyBnZXRFbGVtZW50LCBIIGFzIEhvc3QgfSBmcm9tICcuL2luZGV4LTA2Y2QyN2IxLmpzJztcbmltcG9ydCB7IGIgYXMgZ2V0SW9uTW9kZSwgYyBhcyBjb25maWcgfSBmcm9tICcuL2lvbmljLWdsb2JhbC1hMDQ5YmNiZi5qcyc7XG5pbXBvcnQgeyBjIGFzIGNvbXBvbmVudE9uUmVhZHkgfSBmcm9tICcuL2hlbHBlcnMtZWVkNzlhMmIuanMnO1xuaW1wb3J0IHsgcyBhcyBzYW5pdGl6ZURPTVN0cmluZyB9IGZyb20gJy4vaW5kZXgtYzg0MWM5MzMuanMnO1xuXG5jb25zdCBpbmZpbml0ZVNjcm9sbENzcyA9IFwiaW9uLWluZmluaXRlLXNjcm9sbHtkaXNwbGF5Om5vbmU7d2lkdGg6MTAwJX0uaW5maW5pdGUtc2Nyb2xsLWVuYWJsZWR7ZGlzcGxheTpibG9ja31cIjtcblxubGV0IEluZmluaXRlU2Nyb2xsID0gY2xhc3Mge1xuICBjb25zdHJ1Y3Rvcihob3N0UmVmKSB7XG4gICAgcmVnaXN0ZXJJbnN0YW5jZSh0aGlzLCBob3N0UmVmKTtcbiAgICB0aGlzLmlvbkluZmluaXRlID0gY3JlYXRlRXZlbnQodGhpcywgXCJpb25JbmZpbml0ZVwiLCA3KTtcbiAgICB0aGlzLnRoclB4ID0gMDtcbiAgICB0aGlzLnRoclBjID0gMDtcbiAgICB0aGlzLmRpZEZpcmUgPSBmYWxzZTtcbiAgICB0aGlzLmlzQnVzeSA9IGZhbHNlO1xuICAgIHRoaXMuaXNMb2FkaW5nID0gZmFsc2U7XG4gICAgLyoqXG4gICAgICogVGhlIHRocmVzaG9sZCBkaXN0YW5jZSBmcm9tIHRoZSBib3R0b21cbiAgICAgKiBvZiB0aGUgY29udGVudCB0byBjYWxsIHRoZSBgaW5maW5pdGVgIG91dHB1dCBldmVudCB3aGVuIHNjcm9sbGVkLlxuICAgICAqIFRoZSB0aHJlc2hvbGQgdmFsdWUgY2FuIGJlIGVpdGhlciBhIHBlcmNlbnQsIG9yXG4gICAgICogaW4gcGl4ZWxzLiBGb3IgZXhhbXBsZSwgdXNlIHRoZSB2YWx1ZSBvZiBgMTAlYCBmb3IgdGhlIGBpbmZpbml0ZWBcbiAgICAgKiBvdXRwdXQgZXZlbnQgdG8gZ2V0IGNhbGxlZCB3aGVuIHRoZSB1c2VyIGhhcyBzY3JvbGxlZCAxMCVcbiAgICAgKiBmcm9tIHRoZSBib3R0b20gb2YgdGhlIHBhZ2UuIFVzZSB0aGUgdmFsdWUgYDEwMHB4YCB3aGVuIHRoZVxuICAgICAqIHNjcm9sbCBpcyB3aXRoaW4gMTAwIHBpeGVscyBmcm9tIHRoZSBib3R0b20gb2YgdGhlIHBhZ2UuXG4gICAgICovXG4gICAgdGhpcy50aHJlc2hvbGQgPSAnMTUlJztcbiAgICAvKipcbiAgICAgKiBJZiBgdHJ1ZWAsIHRoZSBpbmZpbml0ZSBzY3JvbGwgd2lsbCBiZSBoaWRkZW4gYW5kIHNjcm9sbCBldmVudCBsaXN0ZW5lcnNcbiAgICAgKiB3aWxsIGJlIHJlbW92ZWQuXG4gICAgICpcbiAgICAgKiBTZXQgdGhpcyB0byB0cnVlIHRvIGRpc2FibGUgdGhlIGluZmluaXRlIHNjcm9sbCBmcm9tIGFjdGl2ZWx5XG4gICAgICogdHJ5aW5nIHRvIHJlY2VpdmUgbmV3IGRhdGEgd2hpbGUgc2Nyb2xsaW5nLiBUaGlzIGlzIHVzZWZ1bFxuICAgICAqIHdoZW4gaXQgaXMga25vd24gdGhhdCB0aGVyZSBpcyBubyBtb3JlIGRhdGEgdGhhdCBjYW4gYmUgYWRkZWQsIGFuZFxuICAgICAqIHRoZSBpbmZpbml0ZSBzY3JvbGwgaXMgbm8gbG9uZ2VyIG5lZWRlZC5cbiAgICAgKi9cbiAgICB0aGlzLmRpc2FibGVkID0gZmFsc2U7XG4gICAgLyoqXG4gICAgICogVGhlIHBvc2l0aW9uIG9mIHRoZSBpbmZpbml0ZSBzY3JvbGwgZWxlbWVudC5cbiAgICAgKiBUaGUgdmFsdWUgY2FuIGJlIGVpdGhlciBgdG9wYCBvciBgYm90dG9tYC5cbiAgICAgKi9cbiAgICB0aGlzLnBvc2l0aW9uID0gJ2JvdHRvbSc7XG4gICAgdGhpcy5vblNjcm9sbCA9ICgpID0+IHtcbiAgICAgIGNvbnN0IHNjcm9sbEVsID0gdGhpcy5zY3JvbGxFbDtcbiAgICAgIGlmICghc2Nyb2xsRWwgfHwgIXRoaXMuY2FuU3RhcnQoKSkge1xuICAgICAgICByZXR1cm4gMTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGluZmluaXRlSGVpZ2h0ID0gdGhpcy5lbC5vZmZzZXRIZWlnaHQ7XG4gICAgICBpZiAoaW5maW5pdGVIZWlnaHQgPT09IDApIHtcbiAgICAgICAgLy8gaWYgdGhlcmUgaXMgbm8gaGVpZ2h0IG9mIHRoaXMgZWxlbWVudCB0aGVuIGRvIG5vdGhpbmdcbiAgICAgICAgcmV0dXJuIDI7XG4gICAgICB9XG4gICAgICBjb25zdCBzY3JvbGxUb3AgPSBzY3JvbGxFbC5zY3JvbGxUb3A7XG4gICAgICBjb25zdCBzY3JvbGxIZWlnaHQgPSBzY3JvbGxFbC5zY3JvbGxIZWlnaHQ7XG4gICAgICBjb25zdCBoZWlnaHQgPSBzY3JvbGxFbC5vZmZzZXRIZWlnaHQ7XG4gICAgICBjb25zdCB0aHJlc2hvbGQgPSB0aGlzLnRoclBjICE9PSAwID8gKGhlaWdodCAqIHRoaXMudGhyUGMpIDogdGhpcy50aHJQeDtcbiAgICAgIGNvbnN0IGRpc3RhbmNlRnJvbUluZmluaXRlID0gKHRoaXMucG9zaXRpb24gPT09ICdib3R0b20nKVxuICAgICAgICA/IHNjcm9sbEhlaWdodCAtIGluZmluaXRlSGVpZ2h0IC0gc2Nyb2xsVG9wIC0gdGhyZXNob2xkIC0gaGVpZ2h0XG4gICAgICAgIDogc2Nyb2xsVG9wIC0gaW5maW5pdGVIZWlnaHQgLSB0aHJlc2hvbGQ7XG4gICAgICBpZiAoZGlzdGFuY2VGcm9tSW5maW5pdGUgPCAwKSB7XG4gICAgICAgIGlmICghdGhpcy5kaWRGaXJlKSB7XG4gICAgICAgICAgdGhpcy5pc0xvYWRpbmcgPSB0cnVlO1xuICAgICAgICAgIHRoaXMuZGlkRmlyZSA9IHRydWU7XG4gICAgICAgICAgdGhpcy5pb25JbmZpbml0ZS5lbWl0KCk7XG4gICAgICAgICAgcmV0dXJuIDM7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICB0aGlzLmRpZEZpcmUgPSBmYWxzZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiA0O1xuICAgIH07XG4gIH1cbiAgdGhyZXNob2xkQ2hhbmdlZCgpIHtcbiAgICBjb25zdCB2YWwgPSB0aGlzLnRocmVzaG9sZDtcbiAgICBpZiAodmFsLmxhc3RJbmRleE9mKCclJykgPiAtMSkge1xuICAgICAgdGhpcy50aHJQeCA9IDA7XG4gICAgICB0aGlzLnRoclBjID0gKHBhcnNlRmxvYXQodmFsKSAvIDEwMCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgdGhpcy50aHJQeCA9IHBhcnNlRmxvYXQodmFsKTtcbiAgICAgIHRoaXMudGhyUGMgPSAwO1xuICAgIH1cbiAgfVxuICBkaXNhYmxlZENoYW5nZWQoKSB7XG4gICAgY29uc3QgZGlzYWJsZWQgPSB0aGlzLmRpc2FibGVkO1xuICAgIGlmIChkaXNhYmxlZCkge1xuICAgICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZTtcbiAgICAgIHRoaXMuaXNCdXN5ID0gZmFsc2U7XG4gICAgfVxuICAgIHRoaXMuZW5hYmxlU2Nyb2xsRXZlbnRzKCFkaXNhYmxlZCk7XG4gIH1cbiAgYXN5bmMgY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgY29uc3QgY29udGVudEVsID0gdGhpcy5lbC5jbG9zZXN0KCdpb24tY29udGVudCcpO1xuICAgIGlmICghY29udGVudEVsKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCc8aW9uLWluZmluaXRlLXNjcm9sbD4gbXVzdCBiZSB1c2VkIGluc2lkZSBhbiA8aW9uLWNvbnRlbnQ+Jyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gY29tcG9uZW50T25SZWFkeShjb250ZW50RWwsIHJlc29sdmUpKTtcbiAgICB0aGlzLnNjcm9sbEVsID0gYXdhaXQgY29udGVudEVsLmdldFNjcm9sbEVsZW1lbnQoKTtcbiAgICB0aGlzLnRocmVzaG9sZENoYW5nZWQoKTtcbiAgICB0aGlzLmRpc2FibGVkQ2hhbmdlZCgpO1xuICAgIGlmICh0aGlzLnBvc2l0aW9uID09PSAndG9wJykge1xuICAgICAgd3JpdGVUYXNrKCgpID0+IHtcbiAgICAgICAgaWYgKHRoaXMuc2Nyb2xsRWwpIHtcbiAgICAgICAgICB0aGlzLnNjcm9sbEVsLnNjcm9sbFRvcCA9IHRoaXMuc2Nyb2xsRWwuc2Nyb2xsSGVpZ2h0IC0gdGhpcy5zY3JvbGxFbC5jbGllbnRIZWlnaHQ7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICBkaXNjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICB0aGlzLmVuYWJsZVNjcm9sbEV2ZW50cyhmYWxzZSk7XG4gICAgdGhpcy5zY3JvbGxFbCA9IHVuZGVmaW5lZDtcbiAgfVxuICAvKipcbiAgICogQ2FsbCBgY29tcGxldGUoKWAgd2l0aGluIHRoZSBgaW9uSW5maW5pdGVgIG91dHB1dCBldmVudCBoYW5kbGVyIHdoZW5cbiAgICogeW91ciBhc3luYyBvcGVyYXRpb24gaGFzIGNvbXBsZXRlZC4gRm9yIGV4YW1wbGUsIHRoZSBgbG9hZGluZ2BcbiAgICogc3RhdGUgaXMgd2hpbGUgdGhlIGFwcCBpcyBwZXJmb3JtaW5nIGFuIGFzeW5jaHJvbm91cyBvcGVyYXRpb24sXG4gICAqIHN1Y2ggYXMgcmVjZWl2aW5nIG1vcmUgZGF0YSBmcm9tIGFuIEFKQVggcmVxdWVzdCB0byBhZGQgbW9yZSBpdGVtc1xuICAgKiB0byBhIGRhdGEgbGlzdC4gT25jZSB0aGUgZGF0YSBoYXMgYmVlbiByZWNlaXZlZCBhbmQgVUkgdXBkYXRlZCwgeW91XG4gICAqIHRoZW4gY2FsbCB0aGlzIG1ldGhvZCB0byBzaWduaWZ5IHRoYXQgdGhlIGxvYWRpbmcgaGFzIGNvbXBsZXRlZC5cbiAgICogVGhpcyBtZXRob2Qgd2lsbCBjaGFuZ2UgdGhlIGluZmluaXRlIHNjcm9sbCdzIHN0YXRlIGZyb20gYGxvYWRpbmdgXG4gICAqIHRvIGBlbmFibGVkYC5cbiAgICovXG4gIGFzeW5jIGNvbXBsZXRlKCkge1xuICAgIGNvbnN0IHNjcm9sbEVsID0gdGhpcy5zY3JvbGxFbDtcbiAgICBpZiAoIXRoaXMuaXNMb2FkaW5nIHx8ICFzY3JvbGxFbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlO1xuICAgIGlmICh0aGlzLnBvc2l0aW9uID09PSAndG9wJykge1xuICAgICAgLyoqXG4gICAgICAgKiBOZXcgY29udGVudCBpcyBiZWluZyBhZGRlZCBhdCB0aGUgdG9wLCBidXQgdGhlIHNjcm9sbFRvcCBwb3NpdGlvbiBzdGF5cyB0aGUgc2FtZSxcbiAgICAgICAqIHdoaWNoIGNhdXNlcyBhIHNjcm9sbCBqdW1wIHZpc3VhbGx5LiBUaGlzIGFsZ29yaXRobSBtYWtlcyBzdXJlIHRvIHByZXZlbnQgdGhpcy5cbiAgICAgICAqIChGcmFtZSAxKVxuICAgICAgICogICAgLSBjb21wbGV0ZSgpIGlzIGNhbGxlZCwgYnV0IHRoZSBVSSBoYXNuJ3QgaGFkIHRpbWUgdG8gdXBkYXRlIHlldC5cbiAgICAgICAqICAgIC0gU2F2ZSB0aGUgY3VycmVudCBjb250ZW50IGRpbWVuc2lvbnMuXG4gICAgICAgKiAgICAtIFdhaXQgZm9yIHRoZSBuZXh0IGZyYW1lIHVzaW5nIF9kb20ucmVhZCwgc28gdGhlIFVJIHdpbGwgYmUgdXBkYXRlZC5cbiAgICAgICAqIChGcmFtZSAyKVxuICAgICAgICogICAgLSBSZWFkIHRoZSBuZXcgY29udGVudCBkaW1lbnNpb25zLlxuICAgICAgICogICAgLSBDYWxjdWxhdGUgdGhlIGhlaWdodCBkaWZmZXJlbmNlIGFuZCB0aGUgbmV3IHNjcm9sbCBwb3NpdGlvbi5cbiAgICAgICAqICAgIC0gRGVsYXkgdGhlIHNjcm9sbCBwb3NpdGlvbiBjaGFuZ2UgdW50aWwgb3RoZXIgcG9zc2libGUgZG9tIHJlYWRzIGFyZSBkb25lIHVzaW5nIF9kb20ud3JpdGUgdG8gYmUgcGVyZm9ybWFudC5cbiAgICAgICAqIChTdGlsbCBmcmFtZSAyLCBpZiBJJ20gY29ycmVjdClcbiAgICAgICAqICAgIC0gQ2hhbmdlIHRoZSBzY3JvbGwgcG9zaXRpb24gKD0gdmlzdWFsbHkgbWFpbnRhaW4gdGhlIHNjcm9sbCBwb3NpdGlvbikuXG4gICAgICAgKiAgICAtIENoYW5nZSB0aGUgc3RhdGUgdG8gcmUtZW5hYmxlIHRoZSBJbmZpbml0ZVNjcm9sbC5cbiAgICAgICAqICAgIC0gVGhpcyBzaG91bGQgYmUgYWZ0ZXIgY2hhbmdpbmcgdGhlIHNjcm9sbCBwb3NpdGlvbiwgb3IgaXQgY291bGRcbiAgICAgICAqICAgIGNhdXNlIHRoZSBJbmZpbml0ZVNjcm9sbCB0byBiZSB0cmlnZ2VyZWQgYWdhaW4gaW1tZWRpYXRlbHkuXG4gICAgICAgKiAoRnJhbWUgMylcbiAgICAgICAqICAgIERvbmUuXG4gICAgICAgKi9cbiAgICAgIHRoaXMuaXNCdXN5ID0gdHJ1ZTtcbiAgICAgIC8vICoqKioqKioqIERPTSBSRUFEICoqKioqKioqKioqKioqKipcbiAgICAgIC8vIFNhdmUgdGhlIGN1cnJlbnQgY29udGVudCBkaW1lbnNpb25zIGJlZm9yZSB0aGUgVUkgdXBkYXRlc1xuICAgICAgY29uc3QgcHJldiA9IHNjcm9sbEVsLnNjcm9sbEhlaWdodCAtIHNjcm9sbEVsLnNjcm9sbFRvcDtcbiAgICAgIC8vICoqKioqKioqIERPTSBSRUFEICoqKioqKioqKioqKioqKipcbiAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgIHJlYWRUYXNrKCgpID0+IHtcbiAgICAgICAgICAvLyBVSSBoYXMgdXBkYXRlZCwgc2F2ZSB0aGUgbmV3IGNvbnRlbnQgZGltZW5zaW9uc1xuICAgICAgICAgIGNvbnN0IHNjcm9sbEhlaWdodCA9IHNjcm9sbEVsLnNjcm9sbEhlaWdodDtcbiAgICAgICAgICAvLyBOZXcgY29udGVudCB3YXMgYWRkZWQgb24gdG9wLCBzbyB0aGUgc2Nyb2xsIHBvc2l0aW9uIHNob3VsZCBiZSBjaGFuZ2VkIGltbWVkaWF0ZWx5IHRvIHByZXZlbnQgaXQgZnJvbSBqdW1waW5nIGFyb3VuZFxuICAgICAgICAgIGNvbnN0IG5ld1Njcm9sbFRvcCA9IHNjcm9sbEhlaWdodCAtIHByZXY7XG4gICAgICAgICAgLy8gKioqKioqKiogRE9NIFdSSVRFICoqKioqKioqKioqKioqKipcbiAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICAgICAgd3JpdGVUYXNrKCgpID0+IHtcbiAgICAgICAgICAgICAgc2Nyb2xsRWwuc2Nyb2xsVG9wID0gbmV3U2Nyb2xsVG9wO1xuICAgICAgICAgICAgICB0aGlzLmlzQnVzeSA9IGZhbHNlO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG4gIGNhblN0YXJ0KCkge1xuICAgIHJldHVybiAoIXRoaXMuZGlzYWJsZWQgJiZcbiAgICAgICF0aGlzLmlzQnVzeSAmJlxuICAgICAgISF0aGlzLnNjcm9sbEVsICYmXG4gICAgICAhdGhpcy5pc0xvYWRpbmcpO1xuICB9XG4gIGVuYWJsZVNjcm9sbEV2ZW50cyhzaG91bGRMaXN0ZW4pIHtcbiAgICBpZiAodGhpcy5zY3JvbGxFbCkge1xuICAgICAgaWYgKHNob3VsZExpc3Rlbikge1xuICAgICAgICB0aGlzLnNjcm9sbEVsLmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHRoaXMub25TY3JvbGwpO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIHRoaXMuc2Nyb2xsRWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgdGhpcy5vblNjcm9sbCk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCBtb2RlID0gZ2V0SW9uTW9kZSh0aGlzKTtcbiAgICBjb25zdCBkaXNhYmxlZCA9IHRoaXMuZGlzYWJsZWQ7XG4gICAgcmV0dXJuIChoKEhvc3QsIHsgY2xhc3M6IHtcbiAgICAgICAgW21vZGVdOiB0cnVlLFxuICAgICAgICAnaW5maW5pdGUtc2Nyb2xsLWxvYWRpbmcnOiB0aGlzLmlzTG9hZGluZyxcbiAgICAgICAgJ2luZmluaXRlLXNjcm9sbC1lbmFibGVkJzogIWRpc2FibGVkXG4gICAgICB9IH0pKTtcbiAgfVxuICBnZXQgZWwoKSB7IHJldHVybiBnZXRFbGVtZW50KHRoaXMpOyB9XG4gIHN0YXRpYyBnZXQgd2F0Y2hlcnMoKSB7IHJldHVybiB7XG4gICAgXCJ0aHJlc2hvbGRcIjogW1widGhyZXNob2xkQ2hhbmdlZFwiXSxcbiAgICBcImRpc2FibGVkXCI6IFtcImRpc2FibGVkQ2hhbmdlZFwiXVxuICB9OyB9XG59O1xuSW5maW5pdGVTY3JvbGwuc3R5bGUgPSBpbmZpbml0ZVNjcm9sbENzcztcblxuY29uc3QgaW5maW5pdGVTY3JvbGxDb250ZW50SW9zQ3NzID0gXCJpb24taW5maW5pdGUtc2Nyb2xsLWNvbnRlbnR7ZGlzcGxheTotbXMtZmxleGJveDtkaXNwbGF5OmZsZXg7LW1zLWZsZXgtZGlyZWN0aW9uOmNvbHVtbjtmbGV4LWRpcmVjdGlvbjpjb2x1bW47LW1zLWZsZXgtcGFjazpjZW50ZXI7anVzdGlmeS1jb250ZW50OmNlbnRlcjttaW4taGVpZ2h0Ojg0cHg7dGV4dC1hbGlnbjpjZW50ZXI7LXdlYmtpdC11c2VyLXNlbGVjdDpub25lOy1tb3otdXNlci1zZWxlY3Q6bm9uZTstbXMtdXNlci1zZWxlY3Q6bm9uZTt1c2VyLXNlbGVjdDpub25lfS5pbmZpbml0ZS1sb2FkaW5ne21hcmdpbi1sZWZ0OjA7bWFyZ2luLXJpZ2h0OjA7bWFyZ2luLXRvcDowO21hcmdpbi1ib3R0b206MzJweDtkaXNwbGF5Om5vbmU7d2lkdGg6MTAwJX0uaW5maW5pdGUtbG9hZGluZy10ZXh0e21hcmdpbi1sZWZ0OjMycHg7bWFyZ2luLXJpZ2h0OjMycHg7bWFyZ2luLXRvcDo0cHg7bWFyZ2luLWJvdHRvbTowfUBzdXBwb3J0cyAoKC13ZWJraXQtbWFyZ2luLXN0YXJ0OiAwKSBvciAobWFyZ2luLWlubGluZS1zdGFydDogMCkpIG9yICgtd2Via2l0LW1hcmdpbi1zdGFydDogMCl7LmluZmluaXRlLWxvYWRpbmctdGV4dHttYXJnaW4tbGVmdDp1bnNldDttYXJnaW4tcmlnaHQ6dW5zZXQ7LXdlYmtpdC1tYXJnaW4tc3RhcnQ6MzJweDttYXJnaW4taW5saW5lLXN0YXJ0OjMycHg7LXdlYmtpdC1tYXJnaW4tZW5kOjMycHg7bWFyZ2luLWlubGluZS1lbmQ6MzJweH19LmluZmluaXRlLXNjcm9sbC1sb2FkaW5nIGlvbi1pbmZpbml0ZS1zY3JvbGwtY29udGVudD4uaW5maW5pdGUtbG9hZGluZ3tkaXNwbGF5OmJsb2NrfS5pbmZpbml0ZS1zY3JvbGwtY29udGVudC1pb3MgLmluZmluaXRlLWxvYWRpbmctdGV4dHtjb2xvcjp2YXIoLS1pb24tY29sb3Itc3RlcC02MDAsICM2NjY2NjYpfS5pbmZpbml0ZS1zY3JvbGwtY29udGVudC1pb3MgLmluZmluaXRlLWxvYWRpbmctc3Bpbm5lciAuc3Bpbm5lci1saW5lcy1pb3MgbGluZSwuaW5maW5pdGUtc2Nyb2xsLWNvbnRlbnQtaW9zIC5pbmZpbml0ZS1sb2FkaW5nLXNwaW5uZXIgLnNwaW5uZXItbGluZXMtc21hbGwtaW9zIGxpbmUsLmluZmluaXRlLXNjcm9sbC1jb250ZW50LWlvcyAuaW5maW5pdGUtbG9hZGluZy1zcGlubmVyIC5zcGlubmVyLWNyZXNjZW50IGNpcmNsZXtzdHJva2U6dmFyKC0taW9uLWNvbG9yLXN0ZXAtNjAwLCAjNjY2NjY2KX0uaW5maW5pdGUtc2Nyb2xsLWNvbnRlbnQtaW9zIC5pbmZpbml0ZS1sb2FkaW5nLXNwaW5uZXIgLnNwaW5uZXItYnViYmxlcyBjaXJjbGUsLmluZmluaXRlLXNjcm9sbC1jb250ZW50LWlvcyAuaW5maW5pdGUtbG9hZGluZy1zcGlubmVyIC5zcGlubmVyLWNpcmNsZXMgY2lyY2xlLC5pbmZpbml0ZS1zY3JvbGwtY29udGVudC1pb3MgLmluZmluaXRlLWxvYWRpbmctc3Bpbm5lciAuc3Bpbm5lci1kb3RzIGNpcmNsZXtmaWxsOnZhcigtLWlvbi1jb2xvci1zdGVwLTYwMCwgIzY2NjY2Nil9XCI7XG5cbmNvbnN0IGluZmluaXRlU2Nyb2xsQ29udGVudE1kQ3NzID0gXCJpb24taW5maW5pdGUtc2Nyb2xsLWNvbnRlbnR7ZGlzcGxheTotbXMtZmxleGJveDtkaXNwbGF5OmZsZXg7LW1zLWZsZXgtZGlyZWN0aW9uOmNvbHVtbjtmbGV4LWRpcmVjdGlvbjpjb2x1bW47LW1zLWZsZXgtcGFjazpjZW50ZXI7anVzdGlmeS1jb250ZW50OmNlbnRlcjttaW4taGVpZ2h0Ojg0cHg7dGV4dC1hbGlnbjpjZW50ZXI7LXdlYmtpdC11c2VyLXNlbGVjdDpub25lOy1tb3otdXNlci1zZWxlY3Q6bm9uZTstbXMtdXNlci1zZWxlY3Q6bm9uZTt1c2VyLXNlbGVjdDpub25lfS5pbmZpbml0ZS1sb2FkaW5ne21hcmdpbi1sZWZ0OjA7bWFyZ2luLXJpZ2h0OjA7bWFyZ2luLXRvcDowO21hcmdpbi1ib3R0b206MzJweDtkaXNwbGF5Om5vbmU7d2lkdGg6MTAwJX0uaW5maW5pdGUtbG9hZGluZy10ZXh0e21hcmdpbi1sZWZ0OjMycHg7bWFyZ2luLXJpZ2h0OjMycHg7bWFyZ2luLXRvcDo0cHg7bWFyZ2luLWJvdHRvbTowfUBzdXBwb3J0cyAoKC13ZWJraXQtbWFyZ2luLXN0YXJ0OiAwKSBvciAobWFyZ2luLWlubGluZS1zdGFydDogMCkpIG9yICgtd2Via2l0LW1hcmdpbi1zdGFydDogMCl7LmluZmluaXRlLWxvYWRpbmctdGV4dHttYXJnaW4tbGVmdDp1bnNldDttYXJnaW4tcmlnaHQ6dW5zZXQ7LXdlYmtpdC1tYXJnaW4tc3RhcnQ6MzJweDttYXJnaW4taW5saW5lLXN0YXJ0OjMycHg7LXdlYmtpdC1tYXJnaW4tZW5kOjMycHg7bWFyZ2luLWlubGluZS1lbmQ6MzJweH19LmluZmluaXRlLXNjcm9sbC1sb2FkaW5nIGlvbi1pbmZpbml0ZS1zY3JvbGwtY29udGVudD4uaW5maW5pdGUtbG9hZGluZ3tkaXNwbGF5OmJsb2NrfS5pbmZpbml0ZS1zY3JvbGwtY29udGVudC1tZCAuaW5maW5pdGUtbG9hZGluZy10ZXh0e2NvbG9yOnZhcigtLWlvbi1jb2xvci1zdGVwLTYwMCwgIzY2NjY2Nil9LmluZmluaXRlLXNjcm9sbC1jb250ZW50LW1kIC5pbmZpbml0ZS1sb2FkaW5nLXNwaW5uZXIgLnNwaW5uZXItbGluZXMtbWQgbGluZSwuaW5maW5pdGUtc2Nyb2xsLWNvbnRlbnQtbWQgLmluZmluaXRlLWxvYWRpbmctc3Bpbm5lciAuc3Bpbm5lci1saW5lcy1zbWFsbC1tZCBsaW5lLC5pbmZpbml0ZS1zY3JvbGwtY29udGVudC1tZCAuaW5maW5pdGUtbG9hZGluZy1zcGlubmVyIC5zcGlubmVyLWNyZXNjZW50IGNpcmNsZXtzdHJva2U6dmFyKC0taW9uLWNvbG9yLXN0ZXAtNjAwLCAjNjY2NjY2KX0uaW5maW5pdGUtc2Nyb2xsLWNvbnRlbnQtbWQgLmluZmluaXRlLWxvYWRpbmctc3Bpbm5lciAuc3Bpbm5lci1idWJibGVzIGNpcmNsZSwuaW5maW5pdGUtc2Nyb2xsLWNvbnRlbnQtbWQgLmluZmluaXRlLWxvYWRpbmctc3Bpbm5lciAuc3Bpbm5lci1jaXJjbGVzIGNpcmNsZSwuaW5maW5pdGUtc2Nyb2xsLWNvbnRlbnQtbWQgLmluZmluaXRlLWxvYWRpbmctc3Bpbm5lciAuc3Bpbm5lci1kb3RzIGNpcmNsZXtmaWxsOnZhcigtLWlvbi1jb2xvci1zdGVwLTYwMCwgIzY2NjY2Nil9XCI7XG5cbmxldCBJbmZpbml0ZVNjcm9sbENvbnRlbnQgPSBjbGFzcyB7XG4gIGNvbnN0cnVjdG9yKGhvc3RSZWYpIHtcbiAgICByZWdpc3Rlckluc3RhbmNlKHRoaXMsIGhvc3RSZWYpO1xuICB9XG4gIGNvbXBvbmVudERpZExvYWQoKSB7XG4gICAgaWYgKHRoaXMubG9hZGluZ1NwaW5uZXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgY29uc3QgbW9kZSA9IGdldElvbk1vZGUodGhpcyk7XG4gICAgICB0aGlzLmxvYWRpbmdTcGlubmVyID0gY29uZmlnLmdldCgnaW5maW5pdGVMb2FkaW5nU3Bpbm5lcicsIGNvbmZpZy5nZXQoJ3NwaW5uZXInLCBtb2RlID09PSAnaW9zJyA/ICdsaW5lcycgOiAnY3Jlc2NlbnQnKSk7XG4gICAgfVxuICB9XG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCBtb2RlID0gZ2V0SW9uTW9kZSh0aGlzKTtcbiAgICByZXR1cm4gKGgoSG9zdCwgeyBjbGFzczoge1xuICAgICAgICBbbW9kZV06IHRydWUsXG4gICAgICAgIC8vIFVzZWQgaW50ZXJuYWxseSBmb3Igc3R5bGluZ1xuICAgICAgICBbYGluZmluaXRlLXNjcm9sbC1jb250ZW50LSR7bW9kZX1gXTogdHJ1ZVxuICAgICAgfSB9LCBoKFwiZGl2XCIsIHsgY2xhc3M6IFwiaW5maW5pdGUtbG9hZGluZ1wiIH0sIHRoaXMubG9hZGluZ1NwaW5uZXIgJiYgKGgoXCJkaXZcIiwgeyBjbGFzczogXCJpbmZpbml0ZS1sb2FkaW5nLXNwaW5uZXJcIiB9LCBoKFwiaW9uLXNwaW5uZXJcIiwgeyBuYW1lOiB0aGlzLmxvYWRpbmdTcGlubmVyIH0pKSksIHRoaXMubG9hZGluZ1RleHQgJiYgKGgoXCJkaXZcIiwgeyBjbGFzczogXCJpbmZpbml0ZS1sb2FkaW5nLXRleHRcIiwgaW5uZXJIVE1MOiBzYW5pdGl6ZURPTVN0cmluZyh0aGlzLmxvYWRpbmdUZXh0KSB9KSkpKSk7XG4gIH1cbn07XG5JbmZpbml0ZVNjcm9sbENvbnRlbnQuc3R5bGUgPSB7XG4gIGlvczogaW5maW5pdGVTY3JvbGxDb250ZW50SW9zQ3NzLFxuICBtZDogaW5maW5pdGVTY3JvbGxDb250ZW50TWRDc3Ncbn07XG5cbmV4cG9ydCB7IEluZmluaXRlU2Nyb2xsIGFzIGlvbl9pbmZpbml0ZV9zY3JvbGwsIEluZmluaXRlU2Nyb2xsQ29udGVudCBhcyBpb25faW5maW5pdGVfc2Nyb2xsX2NvbnRlbnQgfTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==